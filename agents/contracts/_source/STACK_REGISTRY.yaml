# STACK_REGISTRY.yaml
#
# Purpose:
#   Machine-readable SSOT for "what stacks exist" and "which compose files are authoritative entrypoints".
#
# Notes:
#   - Docs-only. Does not change runtime.
#   - This registry should match the compose inventory excluding .archive/ and .worktrees/.
#   - deploy_method values are descriptive; they do not imply automation.

version: 1

exclusions:
  - .archive/**
  - .worktrees/**

stack_roots:
  - infrastructure/**
  - finance/**
  - media-stack/**
  - modules/**

stacks:
  - stack_id: mint-os
    name: Mint OS (docker-host)
    path: infrastructure/docker-host/mint-os
    compose_files:
      - infrastructure/docker-host/mint-os/docker-compose.yml
      - infrastructure/docker-host/mint-os/docker-compose.frontends.yml
      - infrastructure/docker-host/mint-os/docker-compose.minio.yml
      - infrastructure/docker-host/mint-os/docker-compose.monitoring.yml
    deploy_method: ci_docker_host_runner
    deploy_notes:
      runner: docker-host
      default_stack_dir: ~/stacks/mint-os
      pattern: docker compose restart <service>
    owner: TBD
    notes: >
      Fragmented across multiple compose files by current design. Refactor/consolidation requires separate scope.

  - stack_id: finance
    name: Finance
    path: finance
    compose_files:
      - finance/docker-compose.yml
      - finance/mail-archiver/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: media-stack
    name: Media Stack
    path: media-stack
    compose_files:
      - media-stack/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: cloudflare-tunnel
    name: Cloudflare Tunnel
    path: infrastructure/cloudflare/tunnel
    compose_files:
      - infrastructure/cloudflare/tunnel/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: dashy
    name: Dashy
    path: infrastructure/dashy
    compose_files:
      - infrastructure/dashy/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: mcpjungle
    name: MCP Jungle
    path: infrastructure/mcpjungle
    compose_files:
      - infrastructure/mcpjungle/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: n8n
    name: n8n
    path: infrastructure/n8n
    compose_files:
      - infrastructure/n8n/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: pihole
    name: Pi-hole
    path: infrastructure/pihole
    compose_files:
      - infrastructure/pihole/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: secrets
    name: Secrets (Infisical)
    path: infrastructure/secrets
    compose_files:
      - infrastructure/secrets/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: storage
    name: Storage
    path: infrastructure/storage
    compose_files:
      - infrastructure/storage/docker-compose.yml
    deploy_method: manual_or_host
    owner: TBD
    notes: ""

  - stack_id: templates
    name: Templates (non-deploy)
    path: infrastructure/templates
    compose_files:
      - infrastructure/templates/docker-compose.template.yml
    deploy_method: none_template_only
    owner: TBD
    notes: >
      Template compose file(s) used for reference. Not intended for deployment.

  - stack_id: artwork-module
    name: Artwork Module (files-api)
    path: github:hypnotizedent/artwork-module
    compose_files:
      - docker-host:/home/docker-host/artwork-module/docker-compose.yml
    deploy_method: manual_compose
    owner: "@ronny"
    notes: "EXTRACTED - deploy from artwork-module repo, not github:hypnotizedent/artwork-module"
