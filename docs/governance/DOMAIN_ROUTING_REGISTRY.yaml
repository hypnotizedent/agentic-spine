# DOMAIN_ROUTING_REGISTRY.yaml
# Status: authoritative
# Last verified: 2026-02-04
#
# Purpose:
#   Machine-readable SSOT mapping for: hostname -> routing layer -> authority.
#
# Non-negotiables:
#   - Docs-only. This file does NOT change DNS, Cloudflare tunnel ingress, or runtime routing.
#   - Secrets rotation and git history rewrite are explicitly deferred.
#
# Update procedure (docs-only):
#   1) Export DNS records (Cloudflare) into infrastructure/cloudflare/exports/.
#   2) Diff export vs DOMAIN_REGISTRY.md (human doc) and this YAML (SSOT).
#   3) Add new hostnames here with routing_layer/authority_source set to "unknown" if uncertain.
#   4) Fill in stack/service as it becomes clear (no guessing required).
#
# Field notes:
#   - routing_layer: one of [cloudflare_tunnel, direct, unknown]
#   - authority_source: where edits happen today [cloudflare_dashboard, repo_script, compose_labels, unknown]
#   - target_hint: optional human hint (docker dns name, tailscale ip, etc). Keep non-sensitive.
#   - references: repo file paths that mention/relate to the hostname/routing.
#
version: 1

zones:
  - zone: ronny.works
    source:
      dns_export_file: infrastructure/cloudflare/exports/dns-records-2025-12-24.json
      human_registry_file: infrastructure/domains/DOMAIN_REGISTRY.md
    hostnames:
      - hostname: ronny.works
        service: TBD
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Apex domain; no service deployed yet"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: www.ronny.works
        service: TBD
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Apex www redirect; no service deployed yet"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: secrets.ronny.works
        service: secrets
        stack: infrastructure/secrets
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/cloudflare/tunnel/docker-compose.yml

      - hostname: files.ronny.works
        service: files
        stack: github:hypnotizedent/artwork-module
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - github:hypnotizedent/artwork-module/docker-compose.yml
          - infrastructure/cloudflare/tunnel/docker-compose.yml

      - hostname: mintprints-api.ronny.works
        service: mintprints-api
        stack: infrastructure/docker-host/mint-os
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/docker-host/mint-os/docker-compose.yml
          - infrastructure/cloudflare/tunnel/docker-compose.yml

      # Newly added for completeness from DNS export (routing/ownership may be TBD)
      - hostname: chat.ronny.works
        service: TBD
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: dash.ronny.works
        service: dashy
        stack: infrastructure/dashy
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/dashy/docker-compose.yml

      - hostname: docs.ronny.works
        service: TBD
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: finances.ronny.works
        service: finance
        stack: finance
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - finance/docker-compose.yml

      - hostname: grafana.ronny.works
        service: grafana
        stack: infrastructure/docker-host/mint-os
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/docker-host/mint-os/docker-compose.monitoring.yml

      - hostname: ha.ronny.works
        service: home-assistant
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: investments.ronny.works
        service: TBD
        stack: finance
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - finance/docker-compose.yml

      - hostname: jellyfin.ronny.works
        service: jellyfin
        stack: media-stack
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - media-stack/docker-compose.yml

      - hostname: minio.ronny.works
        service: minio
        stack: infrastructure/storage
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/storage/docker-compose.yml

      - hostname: mintprints-app.ronny.works
        service: mintprints-app
        stack: infrastructure/docker-host/mint-os
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/docker-host/mint-os/docker-compose.frontends.yml

      - hostname: mintprints-v3.ronny.works
        service: mintprints-v3
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: music.ronny.works
        service: navidrome
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: n8n.ronny.works
        service: n8n
        stack: infrastructure/n8n
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/n8n/docker-compose.yml

      - hostname: photos.ronny.works
        service: immich
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: production.ronny.works
        service: production
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: requests.ronny.works
        service: requests
        stack: media-stack
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - media-stack/docker-compose.yml

      - hostname: vault.ronny.works
        service: vaultwarden
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

  - zone: mintprints.co
    source:
      dns_export_file: infrastructure/cloudflare/exports/dns-records-mintprints-co-2026-01-23.json
      human_registry_file: infrastructure/domains/DOMAIN_REGISTRY.md
    hostnames:
      - hostname: mintprints.co
        service: TBD
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Apex domain; no service deployed yet"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: www.mintprints.co
        service: TBD
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Apex www redirect; no service deployed yet"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: admin.mintprints.co
        service: admin
        stack: TBD
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: api.mintprints.co
        service: api
        stack: TBD
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: customer.mintprints.co
        service: customer
        stack: TBD
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: production.mintprints.co
        service: production
        stack: TBD
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        note: "Service planned, routing TBD until compose stack created"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: files.mintprints.co
        service: files
        stack: github:hypnotizedent/artwork-module
        routing_layer: cloudflare_tunnel
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - github:hypnotizedent/artwork-module/docker-compose.yml

      - hostname: artwork.mintprints.co
        service: artwork
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: shipping.mintprints.co
        service: shipping
        stack: mint-os/apps/shipping
        routing_layer: cloudflare_pages
        authority_source: unknown
        target_hint: "Live Cloudflare Pages deploy (see shipping docs for wrangler/deploy commands)"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - mint-os/docs/modules/shipping/INDEX.md
          - mint-os/docs/modules/shipping/SPEC.md

      - hostname: suppliers.mintprints.co
        service: suppliers
        stack: mint-os/apps/suppliers
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - mint-os/docs/modules/suppliers/INDEX.md
          - mint-os/docs/modules/suppliers/SPEC.md

      - hostname: estimator.mintprints.co
        service: estimator
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: kanban.mintprints.co
        service: kanban
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: mcp.mintprints.co
        service: mcp
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: minio.mintprints.co
        service: minio
        stack: infrastructure/storage
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - infrastructure/storage/docker-compose.yml

      - hostname: pricing.mintprints.co
        service: pricing
        stack: mint-os/apps/job-estimator
        routing_layer: unknown
        authority_source: unknown
        target_hint: "Job Estimator is bypassed in production (see pricing docs)"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
          - mint-os/docs/modules/pricing/INDEX.md
          - mint-os/docs/modules/pricing/SPEC.md
          - mint-os/docs/modules/pricing/AUDIT_RESULTS.md

      - hostname: send.mintprints.co
        service: send
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: stock-dst.mintprints.co
        service: stock-dst
        stack: TBD
        routing_layer: unknown
        authority_source: unknown
        target_hint: ""
        note: "Domain registered but service not deployed"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: _dmarc.mintprints.co
        service: dmarc
        stack: TBD  # DNS-only record, no compose stack
        routing_layer: direct
        authority_source: cloudflare_dashboard
        target_hint: "DNS policy record"
        note: "DNS-only record, no routing target"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md

      - hostname: resend._domainkey.mintprints.co
        service: dkim
        stack: TBD  # DNS-only record, no compose stack
        routing_layer: direct
        authority_source: cloudflare_dashboard
        target_hint: "DKIM record (Resend)"
        note: "DNS-only record, no routing target"
        references:
          - infrastructure/domains/DOMAIN_REGISTRY.md
