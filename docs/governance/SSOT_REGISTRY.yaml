# SSOT Registry - ronny-ops
# Single Source of Truth for all SSOT claims
#
# This file is machine-readable. Parse with: yq '.ssots[]' docs/governance/SSOT_REGISTRY.yaml
#
# Priority: 1 = highest (foundational), 5 = lowest (derived/reference)
# When documents conflict, lower priority number wins.
#
# Last updated: 2026-01-23
# GitHub Issue: #541

version: "1.0"
updated: "2026-01-23"
github_issue: "#541"

# Conflict Resolution Order:
# 1. Check this registry for both documents
# 2. Compare priority numbers (lower wins)
# 3. Check last_reviewed dates (more recent = more likely correct)
# 4. If still unclear, escalate to @ronny

ssots:
  # ─────────────────────────────────────────────────────────────
  # TIER 1: Foundational (Priority 1) - These define reality
  # ─────────────────────────────────────────────────────────────
  
  - id: service-registry
    name: Service Registry
    path: infrastructure/SERVICE_REGISTRY.md
    scope: services-topology
    priority: 1
    applies_to:
      - "What services exist"
      - "Where services run (host, port, IP)"
      - "Service health and drift"
      - "Network topology"
    owner: "@ronny"
    last_reviewed: "2026-01-23"
    notes: "Ground truth for all service locations. YAML version at SERVICE_REGISTRY.yaml"
    archived: false

  - id: schema-truth
    name: Schema Truth
    path: mint-os/docs/SCHEMA_TRUTH.md
    scope: database-schema
    priority: 1
    applies_to:
      - "Database column names"
      - "Table relationships"
      - "Column name mappings (Printavo → intuitive)"
      - "Query patterns"
    owner: "@ronny"
    last_reviewed: "2026-01-13"
    notes: "THE definitive guide to Mint OS database columns. Printavo schema wins."
    archived: false

  - id: repo-structure
    name: Repo Structure Authority
    path: docs/governance/REPO_STRUCTURE_AUTHORITY.md
    scope: repository-structure
    priority: 1
    applies_to:
      - "Where folders belong"
      - "File placement rules"
      - "Pillar definitions"
      - "Naming conventions"
    owner: "@ronny"
    last_reviewed: "2026-01-23"
    notes: "ONLY authority for folder hierarchy. Git hooks enforce this."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # TIER 2: Domain-Specific (Priority 2) - Authority within scope
  # ─────────────────────────────────────────────────────────────

  - id: quote-ssot
    name: Quote System SSOT
    path: mint-os/docs/QUOTE_SINGLE_SOURCE_OF_TRUTH.md
    scope: quote-creation
    priority: 2
    applies_to:
      - "Quote creation flow"
      - "Quote → Order conversion"
      - "Approval link generation"
      - "Customer approval flow"
    owner: "@ronny"
    last_reviewed: "2026-01-13"
    notes: "ONE path: POST /api/v2/quotes/create"
    archived: false

  - id: shopify-ssot
    name: Shopify Integration SSOT
    path: infrastructure/shopify-mcp/SHOPIFY_SSOT.md
    scope: shopify-integration
    priority: 2
    applies_to:
      - "Shopify OAuth flow"
      - "Shopify credentials"
      - "Shopify API endpoints"
      - "Store connection"
    owner: "@ronny"
    last_reviewed: "2026-01-12"
    notes: "THE definitive document for Shopify integration"
    archived: false

  - id: files-spec
    name: Files Module SPEC
    path: mint-os/docs/modules/files/SPEC.md
    scope: files-minio
    priority: 2
    applies_to:
      - "MinIO bucket structure"
      - "File upload flows"
      - "Presigned URL generation"
      - "File metadata"
    owner: "@ronny"
    last_reviewed: "2026-01-22"
    notes: "Files/artwork module technical specification"
    archived: false

  # --- SPINE LOCK: ARTWORK MODULE (EXTRACTED) ---
  # This is the single canonical lock for Artwork deployment + verification.
  # Any doc contradicting this is LEGACY or HISTORICAL.
  - id: artwork-module
    name: Artwork Module
    status: canonical
    scope: artwork-minio-files
    scope_lock:
      quote_intake: out_of_scope
    code_truth: github:hypnotizedent/artwork-module
    deploy_truth: docker-host:/home/docker-host/artwork-module
    ci_truth: github:hypnotizedent/artwork-module/.github/workflows/ci.yml
    release_gate: docs/runbooks/ARTWORK_EXTRACTION_VERIFY_PACK.md
    agent_receipts_contract: github:hypnotizedent/agentic-spine/docs/RECEIPTS_CONTRACT.md
    runtime_receipts_location: docker-host:~/receipts/
    minio:
      bucket_authority: artwork-intake
      legacy_bucket: customer-artwork  # read-only legacy
    legacy_path: ronny-ops/modules/files-api
    authority_docs:
      - artwork-module/docs/DEPLOYMENT_AUTHORITY.md
      - artwork-module/docs/runbooks/DEPLOY_STANDARD_ROUTE.md
      - artwork-module/docs/runbooks/OPS_CADENCE.md
      - artwork-module/docs/runbooks/CI_GUARANTEES.md
    priority: 2
    applies_to:
      - "Artwork upload workflows"
      - "Standalone MinIO configuration"
      - "files-api module integration"
      - "Artwork pipeline verification"
    owner: "@ronny"
    last_reviewed: "2026-01-31"
    notes: "Extracted from ronny-ops. Do not consult docs/STATE_NOW_ARTWORK.md except as historical."
    archived: false
  # --- END SPINE LOCK ---

  - id: artwork-ticket-model
    name: Artwork Ticket Model
    path: docs/runbooks/artwork-files/ARTWORK_TICKET_MODEL.md
    scope: artwork-lifecycle
    priority: 2
    applies_to:
      - "Seed → Job lifecycle"
      - "Intake capture rules"
      - "Job creation requirements"
      - "Status + gates model"
      - "Bucket separation (artwork-intake vs client-assets)"
      - "API contracts for seeds/jobs"
    owner: "@ronny"
    last_reviewed: "2026-01-27"
    notes: "Jira-style ticket model for artwork. Seeds permissive, jobs operational, quoting gated. All inbound → artwork-intake bucket."
    archived: false

  - id: mint-files-integration
    name: Mint Files Integration
    path: docs/MINT_FILES_INTEGRATION.md
    scope: mint-files-platform
    priority: 2
    applies_to:
      - "Mint Files integration matrix"
      - "Upload flow (presigned URL pattern)"
      - "Bucket separation rules"
      - "Security invariant (no API keys in browser)"
      - "Canonical verify + trace commands"
    owner: "@ronny"
    last_reviewed: "2026-01-27"
    notes: "Integration SSOT for Mint Files platform. Verify: scripts/verify_mint_files_platform.sh. Trace: scripts/trace_quote_upload.sh"
    archived: false

  - id: incidents-log
    name: Incidents Log
    path: infrastructure/docs/INCIDENTS_LOG.md
    scope: incident-history
    priority: 2
    applies_to:
      - "Past incidents"
      - "Root cause analysis"
      - "Prevention measures"
      - "What failed before"
    owner: "@ronny"
    last_reviewed: "2026-01-22"
    notes: "Historical record of all incidents with traceability"
    archived: false

  - id: secrets-policy
    name: Secrets Policy
    path: docs/governance/SECRETS_POLICY.md
    scope: secrets-management
    priority: 2
    applies_to:
      - "Where secrets are stored"
      - "How to load secrets"
      - "What NOT to commit"
      - "Infisical usage"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Infisical is SSOT for all secrets. Pre-commit hook enforces."
    archived: false

  - id: infisical-governance
    name: Infisical Governance
    path: infrastructure/docs/runbooks/INFISICAL_GOVERNANCE.md
    scope: infisical-operations
    priority: 2
    applies_to:
      - "Infisical project structure"
      - "Secret-to-project mapping"
      - "Sync workflows"
      - "MCP placeholder patterns"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Operational runbook for Infisical. See SECRETS_POLICY for policy."
    archived: false

  - id: infisical-restructure
    name: Infisical Restructure Plan
    path: docs/secrets/INFISICAL_RESTRUCTURE_PLAN.md
    scope: infisical-migration
    priority: 3
    applies_to:
      - "Infisical project restructure (#587)"
      - "ai-services project creation"
      - "IMMICH_* deduplication"
      - "Project deletion/consolidation"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Migration plan. Execute once, then archive. Created for #587."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # TIER 3: Operational (Priority 3) - Rules and procedures
  # ─────────────────────────────────────────────────────────────

  - id: search-exclusions
    name: Search Exclusions
    path: docs/governance/SEARCH_EXCLUSIONS.md
    scope: search-indexing
    priority: 3
    applies_to:
      - "What directories are excluded from search"
      - "RAG exclusion patterns"
      - "Search pollution prevention"
    owner: "@ronny"
    last_reviewed: "2026-01-23"
    notes: "NEW - Created in #541 to document exclusion rules"
    archived: false

  - id: rag-indexing-rules
    name: RAG Indexing Rules
    path: docs/governance/RAG_INDEXING_RULES.md
    scope: rag-quality
    priority: 3
    applies_to:
      - "What gets indexed to RAG"
      - "Quality gates for knowledge base"
      - "Naming conventions for indexed docs"
    owner: "@ronny"
    last_reviewed: "2026-01-22"
    notes: "Quality gate for knowledge base. Prevents pollution."
    archived: false

  - id: workspace-manifest
    name: RAG Workspace Manifest
    path: infrastructure/docs/rag/WORKSPACE_MANIFEST.json
    scope: rag-config
    priority: 3
    applies_to:
      - "RAG workspace definitions"
      - "Critical indexing patterns"
      - "Workspace inheritance"
    owner: "@ronny"
    last_reviewed: "2026-01-23"
    notes: "Machine-readable RAG config. JSON format."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # TIER 4: Index/Registry (Priority 4) - Pointers to other docs
  # ─────────────────────────────────────────────────────────────

  - id: authority-index
    name: Authority Index
    path: infrastructure/docs/AUTHORITY_INDEX.md
    scope: document-registry
    priority: 4
    applies_to:
      - "Which docs are authoritative"
      - "Document verification dates"
      - "Legacy vs current docs"
    owner: "@ronny"
    last_reviewed: "2026-01-23"
    notes: "Registry of authoritative docs. Points to other SSOTs."
    archived: false

  - id: ssot-pointer
    name: SSOT Index
    path: infrastructure/docs/SSOT.md
    scope: ssot-index
    priority: 4
    applies_to:
      - "Quick reference for where truth lives"
      - "Pillar-specific SSOT pointers"
    owner: "@ronny"
    last_reviewed: "2026-01-22"
    notes: "High-level pointer doc. See SSOT_REGISTRY.yaml for complete list."
    archived: false

  - id: governance-index
    name: Governance Index
    path: docs/governance/GOVERNANCE_INDEX.md
    scope: governance-guide
    priority: 4
    applies_to:
      - "How governance works"
      - "Entry chain"
      - "Conflict resolution"
    owner: "@ronny"
    last_reviewed: "2026-01-23"
    notes: "Human-readable governance guide. Created in #541."
    archived: false

  - id: spine-standard-route
    name: Spine Standard Route
    path: docs/governance/SPINE_STANDARD_ROUTE.md
    scope: navigation-entry
    priority: 4
    applies_to:
      - "Start-here for agents"
      - "Read order for truth discovery"
      - "Deploy command pointer"
      - "Receipts citation guide"
    owner: "@ronny"
    last_reviewed: "2026-01-31"
    notes: "Human entry point for Spine navigation. Points to SSOT locks, does not redefine them."
    archived: false

  - id: scripts-registry
    name: Scripts Registry
    path: docs/governance/SCRIPTS_REGISTRY.md
    scope: script-authority
    priority: 4
    applies_to:
      - "Canonical scripts index"
      - "Script authority chain"
      - "Legacy script tombstones"
    owner: "@ronny"
    last_reviewed: "2026-01-31"
    notes: "If a script is not listed here, it's not canonical."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # TIER 1 ADDITIONS: New foundational SSOTs
  # ─────────────────────────────────────────────────────────────

  - id: device-identity
    name: Device Identity SSOT
    path: docs/governance/DEVICE_IDENTITY_SSOT.md
    scope: device-naming-identity
    priority: 1
    applies_to:
      - "Device naming rules"
      - "Tailscale hostnames and IPs"
      - "Device verification commands"
      - "Tier classification (1-4)"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Created in #615. Canonical for device identity. References SERVICE_REGISTRY for service-level detail."
    archived: false

  - id: session-protocol
    name: Session Protocol
    path: 00_CLAUDE.md
    scope: session-entry
    priority: 1
    applies_to:
      - "Session entry point"
      - "Agent startup protocol"
      - "Context injection rules"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Entry point for all agent sessions. Auto-loads .brain/rules.md."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # TIER 2 ADDITIONS: Domain-specific runbooks
  # ─────────────────────────────────────────────────────────────

  - id: backup-governance
    name: Backup Governance
    path: docs/runbooks/BACKUP_GOVERNANCE.md
    scope: backup-strategy
    priority: 2
    applies_to:
      - "Proxmox vzdump configuration"
      - "Storage targets (tank-backups)"
      - "Backup schedules and retention"
      - "Big data strategy (100GB+)"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Created in #622. Canonical for infrastructure-level backups. See pillar BACKUP.md for app-level."
    archived: false

  - id: reboot-health-gate
    name: Reboot Health Gate
    path: docs/runbooks/REBOOT_HEALTH_GATE.md
    scope: reboot-validation
    priority: 2
    applies_to:
      - "Pre-reboot validation"
      - "Post-reboot verification"
      - "Safe reboot procedures"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Created in #610. Runbook for safe infrastructure reboots."
    archived: false

  - id: scripts-authority
    name: Scripts Authority
    path: docs/governance/SCRIPTS_AUTHORITY.md
    scope: scripts-placement
    priority: 2
    applies_to:
      - "Where scripts belong"
      - "Script naming conventions"
      - "Script organization rules"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Rules for script placement and naming."
    archived: false

  - id: agent-boundaries
    name: Agent Boundaries
    path: docs/governance/AGENT_BOUNDARIES.md
    scope: agent-rules
    priority: 2
    applies_to:
      - "What agents can/cannot do"
      - "Agent execution constraints"
      - "Safety boundaries"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Defines agent constraints and safety rules."
    archived: false

  - id: mcp-authority
    name: MCP Authority
    path: infrastructure/MCP_AUTHORITY.md
    scope: mcp-servers
    priority: 2
    applies_to:
      - "MCP server registration"
      - "MCP naming conventions"
      - "MCP deployment rules"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Rules for MCP server management."
    archived: false

  - id: shipping-spec
    name: Shipping Module SPEC
    path: mint-os/docs/modules/shipping/SPEC.md
    scope: shipping-module
    priority: 2
    applies_to:
      - "Shipping integration rules"
      - "Carrier configuration"
      - "Rate calculation"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Technical specification for shipping module."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # TIER 3 ADDITIONS: SOPs
  # ─────────────────────────────────────────────────────────────

  - id: minio-rclone-setup
    name: MinIO Rclone/Finder Mount
    path: docs/runbooks/artwork-files/MINIO_RCLONE_SETUP.md
    scope: minio-finder-mount
    priority: 3
    applies_to:
      - "MinIO Finder mount via rclone"
      - "client-assets bucket access"
      - "rclone-mac FUSE setup"
      - "mintfiles-mount.sh usage"
    owner: "@ronny"
    last_reviewed: "2026-01-27"
    notes: "Canonical Finder mount for MinIO client-assets. Script: scripts/mounts/mintfiles-mount.sh. Issue #704."
    archived: false

  - id: issue-closure-sop
    name: Issue Closure SOP
    path: docs/governance/ISSUE_CLOSURE_SOP.md
    scope: issue-workflow
    priority: 3
    applies_to:
      - "When issues can be closed"
      - "Issue closure checklist"
      - "Verification requirements"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Standard operating procedure for closing issues."
    archived: false

  - id: spec-required-sop
    name: SPEC Required SOP
    path: docs/governance/SPEC_REQUIRED_SOP.md
    scope: spec-workflow
    priority: 3
    applies_to:
      - "When SPECs are required"
      - "SPEC format requirements"
      - "Module documentation rules"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Standard operating procedure for module specifications."
    archived: false

  - id: docs-module-spec
    name: Docs Module SPEC
    path: infrastructure/docs/modules/docs/SPEC.md
    scope: docs-module
    priority: 2
    applies_to:
      - "Documentation module rules"
      - "Doc generation patterns"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Technical specification for docs module."
    archived: false

  - id: homelab-module-spec
    name: Homelab Module SPEC
    path: infrastructure/docs/modules/homelab/SPEC.md
    scope: homelab-module
    priority: 2
    applies_to:
      - "Homelab module rules"
      - "Home automation patterns"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Technical specification for homelab module."
    archived: false

  - id: suppliers-spec
    name: Suppliers Module SPEC
    path: mint-os/docs/modules/suppliers/SPEC.md
    scope: suppliers-module
    priority: 2
    applies_to:
      - "Supplier integration rules"
      - "Vendor management"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Technical specification for suppliers module."
    archived: false

  # ─────────────────────────────────────────────────────────────
  # DATA INVENTORIES - Machine-readable operational SSOTs
  # ─────────────────────────────────────────────────────────────

  - id: backup-inventory
    name: Backup Inventory
    path: infrastructure/data/backup_inventory.json
    scope: backup-assets
    priority: 1
    applies_to:
      - "What gets backed up"
      - "Backup schedules"
      - "Retention policies"
      - "Restore test records"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Machine-readable SSOT for all backup assets. Verify: scripts/infra/backup_verify.sh"
    archived: false

  - id: secrets-inventory
    name: Secrets Inventory
    path: infrastructure/data/secrets_inventory.json
    scope: secrets-management
    priority: 1
    applies_to:
      - "Infisical project catalog"
      - "Secret key mappings"
      - "Environment targets"
      - "Rotation tracking"
    owner: "@ronny"
    last_reviewed: "2026-01-26"
    notes: "Machine-readable SSOT for secrets. Verify: scripts/infra/secrets_verify.sh"
    archived: false

  - id: monitoring-inventory
    name: Monitoring Inventory
    path: infrastructure/data/monitoring_inventory.json
    scope: monitoring-health
    priority: 1
    applies_to:
      - "Health endpoints"
      - "Service tiers"
      - "Alert rules"
      - "Notification channels"
    owner: "@ronny"
    last_reviewed: "2026-01-26"
    notes: "Machine-readable SSOT for monitoring. Verify: scripts/infra/monitoring_verify.sh"
    archived: false

  - id: agents-inventory
    name: Agents Inventory
    path: infrastructure/data/agents_inventory.json
    scope: agent-scripts
    priority: 1
    applies_to:
      - "Agent script registry"
      - "Agent lifecycle"
      - "Script paths and ownership"
      - "Schedule metadata"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Machine-readable SSOT for all agent scripts. Verify: scripts/infra/agents_verify.sh"
    archived: false

  - id: updates-inventory
    name: Updates Inventory
    path: infrastructure/data/updates_inventory.json
    scope: update-mechanisms
    priority: 1
    applies_to:
      - "What gets updated"
      - "Update tiers and cadence"
      - "Automation level"
      - "Rollback procedures"
    owner: "@ronny"
    last_reviewed: "2026-01-25"
    notes: "Machine-readable SSOT for all update mechanisms. Verify: scripts/infra/updates_verify.sh. Narrative governance: docs/runbooks/SERVICE_UPDATES_GOVERNANCE.md"
    archived: false

  # ─────────────────────────────────────────────────────────────
  # AUTOMATION SSOTs
  # ─────────────────────────────────────────────────────────────

  - id: n8n-automation
    name: n8n Automation SSOT
    path: infrastructure/n8n/CONTRACT.md
    scope: workflow-automation
    priority: 2
    applies_to:
      - "n8n deployment configuration"
      - "Workflow definitions and lifecycle"
      - "Webhook URLs and routing"
      - "Credential requirements"
      - "n8n vs code boundaries"
    owner: "@ronny"
    last_reviewed: "2026-01-28"
    notes: "Canonical for n8n deployment, workflows, and governance. LIVE must equal REPO rule. Verify: scripts/n8n/drift_check.sh"
    archived: false

  - id: microsoft-communications
    name: Microsoft Communications SSOT
    path: infrastructure/microsoft/CONTRACT.md
    scope: microsoft-outlook-automation
    priority: 2
    applies_to:
      - "Outlook mailbox automation"
      - "Microsoft Graph API permissions"
      - "Email triage safety ladder"
      - "Spam classification rules"
      - "Teams notification integration"
    owner: "@ronny"
    last_reviewed: "2026-01-28"
    notes: "Contract v0 for Outlook automation. v1 = quarantine + Teams report. Evidence: infrastructure/docs/evidence/OUTLOOK_*. Issue #736."
    archived: false

# ─────────────────────────────────────────────────────────────
# PROPOSALS - Docs-only, pending approval
# ─────────────────────────────────────────────────────────────

  - id: quote-intake-slimming-proposal
    name: Quote Intake Slimming Proposal
    path: docs/runbooks/QUOTE_INTAKE_SLIMMING_PROPOSAL.md
    scope: quote-intake
    priority: 3
    status: proposal
    applies_to:
      - "Quote intake front door"
      - "Intake Record contract"
      - "Coupling rules (no artwork-module)"
      - "Thin intake verification checklist"
    owner: "@ronny"
    last_reviewed: "2026-01-31"
    notes: "Front door only; produces Intake Record; no artwork-module coupling. Docs-only proposal awaiting approval."
    archived: false

# ─────────────────────────────────────────────────────────────
# Validation Rules
# ─────────────────────────────────────────────────────────────
# 
# 1. Every SSOT must have front-matter with:
#    status: authoritative
#    owner: "@ronny"
#    last_verified: YYYY-MM-DD
#
# 2. SSOTs must be in this registry to be recognized
#
# 3. If a doc claims SSOT but isn't here, either:
#    - Add it to this registry, OR
#    - Remove the SSOT claim from the doc
#
# 4. Review cycle: Monthly (or after major changes)
