status: authoritative
owner: "@ronny"
last_verified: 2026-02-27
scope: w45a-secrets-alias-map

modules:
  shipping:
    runtime_env:
      - API_KEY
      - JWT_SECRET
      - DATABASE_URL
      - EASYPOST_API_KEY
      - EASYPOST_WEBHOOK_SECRET
    canonical_path: /spine/services/shipping
    canonical_keys_present:
      - SHIPPING_API_KEY
      - SHIPPING_DATABASE_URL
      - SHIPPING_EASYPOST_API_KEY
      - SHIPPING_EASYPOST_WEBHOOK_SECRET
    canonical_keys_missing:
      - SHIPPING_JWT_SECRET
    alias_map:
      API_KEY: SHIPPING_API_KEY
      JWT_SECRET: SHIPPING_JWT_SECRET
      DATABASE_URL: SHIPPING_DATABASE_URL
      EASYPOST_API_KEY: SHIPPING_EASYPOST_API_KEY
      EASYPOST_WEBHOOK_SECRET: SHIPPING_EASYPOST_WEBHOOK_SECRET
  payment:
    runtime_env:
      - API_KEY
      - JWT_SECRET
      - DATABASE_URL
      - STRIPE_SECRET_KEY
      - STRIPE_WEBHOOK_SECRET
    canonical_path: /spine/services/payment
    canonical_keys_present:
      - PAYMENT_API_KEY
      - PAYMENT_DATABASE_URL
    canonical_keys_missing:
      - PAYMENT_JWT_SECRET
      - PAYMENT_STRIPE_SECRET_KEY
      - PAYMENT_STRIPE_WEBHOOK_SECRET
    alias_map:
      API_KEY: PAYMENT_API_KEY
      JWT_SECRET: PAYMENT_JWT_SECRET
      DATABASE_URL: PAYMENT_DATABASE_URL
      STRIPE_SECRET_KEY: PAYMENT_STRIPE_SECRET_KEY
      STRIPE_WEBHOOK_SECRET: PAYMENT_STRIPE_WEBHOOK_SECRET
  notifications:
    runtime_env:
      - API_KEY
      - JWT_SECRET
    canonical_path: /spine/services/notifications
    canonical_keys_present: []
    canonical_keys_missing:
      - NOTIFICATIONS_API_KEY
      - NOTIFICATIONS_JWT_SECRET
    alias_map:
      API_KEY: NOTIFICATIONS_API_KEY
      JWT_SECRET: NOTIFICATIONS_JWT_SECRET

shared_dependencies:
  communications_provider_keys:
    canonical_path: /spine/services/communications
    keys:
      - RESEND_API_KEY
      - FROM_EMAIL
      - ADMIN_EMAIL
      - TWILIO_ACCOUNT_SID
      - TWILIO_AUTH_TOKEN
      - TWILIO_PHONE_NUMBER

report_mode_blockers:
  - shipping missing SHIPPING_JWT_SECRET route mapping
  - payment missing PAYMENT_JWT_SECRET route mapping
  - payment missing PAYMENT_STRIPE_SECRET_KEY route mapping
  - payment missing PAYMENT_STRIPE_WEBHOOK_SECRET route mapping
  - notifications missing module-scoped NOTIFICATIONS_* route mapping
