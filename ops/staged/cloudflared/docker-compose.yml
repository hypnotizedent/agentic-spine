services:
  cloudflared:
    image: cloudflare/cloudflared:latest
    container_name: homelab-cloudflared
    restart: unless-stopped
    network_mode: host
    command: tunnel --no-autoupdate run
    environment:
      - TUNNEL_TOKEN=${CLOUDFLARE_TUNNEL_TOKEN:?CLOUDFLARE_TUNNEL_TOKEN required}
    dns:
      - 1.1.1.1
      - 8.8.8.8
    extra_hosts:
      - host.docker.internal:host-gateway
      # Mint OS services (docker-host 100.92.156.118)
      - mint-os-dashboard-api:100.92.156.118
      - mint-os-admin:100.92.156.118
      - mint-os-customer:100.92.156.118
      - mint-os-production:100.92.156.118
      - mint-os-kanban:100.92.156.118
      - mint-os-job-estimator:100.92.156.118
      - mint-os-minio:100.92.156.118
      - minio:100.92.156.118
      - files-api:100.92.156.118
      # Local services (infra-core)
      - infisical:127.0.0.1
      - firefly-iii:100.92.156.118
      - ghostfolio:100.92.156.118
      - paperless-ngx:100.92.156.118
      - mcpjungle:100.92.156.118
      - grafana:100.92.156.118
      - mail-archiver:100.92.156.118
