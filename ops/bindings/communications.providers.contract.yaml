# Status: authoritative
# Last verified: 2026-02-21

version: 1
updated_at: "2026-02-21"
owner: "@ronny"
scope: communications-provider-routing

transactional:
  mode: live
  cutover_phase: phase1-resend-live
  default_sender_email: "noreply@mintprints.co"
  default_sender_name: "Mint Prints"
  default_sms_from: "+15619335513"
  phase_matrix:
    phase0-simulation:
      description: "Safety default: transactional providers remain simulated."
      resend_execution_mode: simulation-only
      twilio_execution_mode: simulation-only
    phase1-resend-live:
      description: "Canary phase: Resend live, Twilio still simulated."
      resend_execution_mode: live
      twilio_execution_mode: simulation-only
    phase2-full-live:
      description: "Full transactional live phase: Resend + Twilio live."
      resend_execution_mode: live
      twilio_execution_mode: live

providers:
  microsoft:
    provider_type: mailbox-ops
    channels:
      - email
    status: active
    execution_mode: manual-only
    capability: microsoft.mail.send
    description: "Operational mailbox surfaces and live-pilot send-test route."
  resend:
    provider_type: transactional-email
    channels:
      - email
    status: active
    execution_mode: live
    api_base: "https://api.resend.com"
    required_env:
      - RESEND_API_KEY
      - FROM_EMAIL
    description: "Canonical transactional email provider for customer notifications."
  twilio:
    provider_type: transactional-sms
    channels:
      - sms
    status: active
    execution_mode: simulation-only
    api_base: "https://api.twilio.com/2010-04-01"
    required_env:
      - TWILIO_ACCOUNT_SID
      - TWILIO_AUTH_TOKEN
      - TWILIO_PHONE_NUMBER
    description: "Canonical transactional SMS provider for customer notifications."

routing:
  message_types:
    quote_ready:
      email_provider: resend
      sms_provider: twilio
    payment_needed:
      email_provider: resend
      sms_provider: twilio
    order_ready:
      email_provider: resend
      sms_provider: twilio
    shipped:
      email_provider: resend
      sms_provider: twilio
    custom:
      email_provider: resend
      sms_provider: twilio
