# Secrets Inventory - SSOT parity binding
# Seeded from: ~/code/workbench/infra/data/secrets_inventory.json
# Purpose: Machine-readable project catalog for spine verification
# NOTE: IDs and names are NOT secrets. No values stored here.

version: 1

source:
  repo: workbench
  path: infra/data/secrets_inventory.json
  commit: 86acf02886380da7c27755b7e3ac0cd0be1b978e
  last_synced: "2026-02-08"

infisical:
  api_url: "https://secrets.ronny.works"
  host: "infra-core"
  environment: "prod"

# Project catalog - lifecycle is informational (risk flag), not assertion
projects:
  - name: infrastructure
    id: "01ddd93a-e0f8-4c7c-ad9f-903d76ef94d9"
    lifecycle: active
    notes: "Spine-bound. Cloudflare, GitHub, Azure, NAS, system infrastructure"

  - name: mint-os-api
    id: "6c67b03e-ed17-4154-9a94-59837738e432"
    lifecycle: overloaded
    notes: "Dashboard API, vendors, payments. Proposed rename to 'mint-os'"

  - name: mint-os-vault
    id: "66d149d6-f610-4ec3-a400-3ff42ea1aa75"
    lifecycle: overlaps
    notes: "Overlaps with mint-os-api; consolidation candidate"

  - name: mint-os-portal
    id: "758e5db3-8d00-4ccf-8d91-aeaad0d6ed37"
    lifecycle: delete_candidate
    notes: "Empty project"

  - name: n8n
    id: "4b9dfc6d-13e8-43c8-bd84-9beb64eb8e16"
    lifecycle: clean
    notes: "Automation workflows"

  - name: finance-stack
    id: "4c34714d-6d85-4aa6-b8df-5a9505f3bcef"
    lifecycle: deprecated
    notes: "DEPRECATED: All finance keys live in infrastructure project under /spine/services/finance, /spine/services/mail-archiver, /spine/services/paperless. This project is unused. See LOOP-POST-FINANCE-GOVERNANCE-HYGIENE-20260211 P4."

  - name: media-stack
    id: "3807f1c4-e354-4aaf-a16f-8567d7f78a7e"
    lifecycle: clean
    notes: "Jellyfin, *arr apps, media management"

  - name: immich
    id: "4bf7f25e-596b-4293-9d2a-c2c7c2d0df42"
    lifecycle: clean_but_duped
    notes: "Keys duplicated in infrastructure; remove dupes from infra"

  - name: home-assistant
    id: "5df75515-7259-4c14-98b8-5adda379aade"
    lifecycle: clean
    notes: "Smart home control"

  - name: ai-services
    id: "2a2e4c56-6f75-460e-8db2-c426ceb4bddf"
    lifecycle: clean
    notes: "AI API keys (ANTHROPIC, OPENAI). Created 2026-01-28 per proposed restructure"

# Known issues from SSOT - informational flags, not runtime assertions
known_issues:
  - id: spof-infisical-single-instance
    severity: high
    description: "Infisical runs as a single instance on infra-core (VM 204); outage blocks secrets gating"

  - id: no-offline-bootstrap
    severity: critical
    description: "No offline backup of bootstrap credentials exists"

  - id: infisical-backup-untested
    severity: high
    description: "Weekly GPG backup exists but restore procedure never tested"

  - id: immich-keys-duplicated
    severity: medium
    description: "IMMICH_* keys exist in both 'immich' and 'infrastructure' projects"

  - id: mint-os-api-overloaded
    severity: medium
    description: "mint-os-api has 55 keys spanning multiple concerns"

  - id: infrastructure-overloaded
    severity: medium
    description: "infrastructure has 48 keys including AI keys and duplicates"
