# Tailscale Tailnet Snapshot (projection)
# authority_state: projection
# projection_of: Tailscale API v2 /tailnet/-/devices
# authority_contract: docs/canonical/TAILSCALE_AUTHORITY_CONTRACT_V1.yaml
# Last refreshed: 2026-03-02
#
# This is a point-in-time snapshot of the tailnet for drift detection.
# Refresh via: curl -u "$TS_API_KEY:" https://api.tailscale.com/api/v2/tailnet/-/devices

version: 1
tailnet: taile9480.ts.net
snapshot_time: "2026-03-02T01:53:35Z"
device_count: 23

# Summary
access_policy_summary:
  lan_first: 13
  tailscale_required: 9
  lan_only: 1

naming_drift:
  count: 3
  devices:
    - hostname: DESKTOP-JFBNGSR
      fqdn: windows-parents.taile9480.ts.net
      severity: cosmetic
      note: "Windows desktop, no spine governance. FQDN is acceptable."
    - hostname: DESKTOP-P9UVED7
      fqdn: windows-mint.taile9480.ts.net
      severity: cosmetic
      note: "Windows desktop, no spine governance. FQDN is acceptable."
    - hostname: "Ronny's MacBook Pro"
      fqdn: macbook.taile9480.ts.net
      severity: cosmetic
      note: "Client device. FQDN is acceptable."

# Per-device snapshot (spine-governed devices only)
devices:
  # ─── Shop VMs (lan_first) ───
  - id: docker-host
    tailscale_ip: 100.92.156.118
    lan_ip: 192.168.1.200
    fqdn: docker-host.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.90.9"
    os: linux

  - id: automation-stack
    tailscale_ip: 100.98.70.70
    lan_ip: 192.168.1.110
    fqdn: automation-stack.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.92.1"
    os: linux

  - id: immich
    tailscale_ip: 100.114.101.50
    lan_ip: 192.168.1.203
    fqdn: immich.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.2"
    os: linux
    legacy_aliases: ["immich-1"]
    rename_applied: "2026-03-02T02:00:00Z"

  - id: infra-core
    tailscale_ip: 100.92.91.128
    lan_ip: 192.168.1.204
    fqdn: infra-core.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: observability
    tailscale_ip: 100.120.163.70
    lan_ip: 192.168.1.205
    fqdn: observability.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: dev-tools
    tailscale_ip: 100.90.167.39
    lan_ip: 192.168.1.206
    fqdn: dev-tools.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: ai-consolidation
    tailscale_ip: 100.71.17.29
    lan_ip: 192.168.1.8
    fqdn: ai-consolidation.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: download-stack
    tailscale_ip: 100.107.36.76
    lan_ip: 192.168.1.209
    fqdn: download-stack.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: streaming-stack
    tailscale_ip: 100.123.207.64
    lan_ip: 192.168.1.210
    fqdn: streaming-stack.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: finance-stack
    tailscale_ip: 100.76.153.100
    lan_ip: 192.168.1.211
    fqdn: finance-stack.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: mint-data
    tailscale_ip: 100.106.72.25
    lan_ip: 192.168.1.212
    fqdn: mint-data.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: mint-apps
    tailscale_ip: 100.79.183.14
    lan_ip: 192.168.1.213
    fqdn: mint-apps.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: communications-stack
    tailscale_ip: 100.115.16.37
    lan_ip: 192.168.1.26
    fqdn: communications-stack.taile9480.ts.net
    access_policy: lan_first
    key_expiry_disabled: true
    client_version: "1.94.2"
    os: linux

  # ─── Cross-site (tailscale_required) ───
  - id: pve
    tailscale_ip: 100.96.211.33
    lan_ip: null
    fqdn: pve.taile9480.ts.net
    access_policy: tailscale_required
    tailscale_required_reason: "Shop hypervisor — no documented LAN IP reachable from macOS."
    key_expiry_disabled: true
    client_version: "1.92.5"
    os: linux
    advertised_routes: ["192.168.1.0/24"]
    enabled_routes: ["192.168.1.0/24", "192.168.12.0/24"]

  - id: proxmox-home
    tailscale_ip: 100.103.99.62
    lan_ip: null
    fqdn: proxmox-home.taile9480.ts.net
    access_policy: tailscale_required
    tailscale_required_reason: "Home site — only reachable via Tailscale from shop/mobile."
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux

  - id: nas
    tailscale_ip: 100.102.199.111
    lan_ip: null
    fqdn: nas.taile9480.ts.net
    access_policy: tailscale_required
    tailscale_required_reason: "Synology NAS — cross-site backup target."
    key_expiry_disabled: true
    client_version: "1.58.2"
    os: linux
    legacy_aliases: ["synology918"]

  - id: pihole-home
    tailscale_ip: 100.105.148.96
    lan_ip: 10.0.0.53
    fqdn: pihole-home.taile9480.ts.net
    access_policy: tailscale_required
    tailscale_required_reason: "Home LXC — only reachable via Tailscale from shop."
    key_expiry_disabled: true
    client_version: "1.92.3"
    os: linux

  # ─── Home LAN devices (via Tailscale subnet routes) ───
  - id: homeassistant
    tailscale_ip: 100.67.120.1
    lan_ip: 10.0.0.100
    fqdn: ha.taile9480.ts.net
    access_policy: lan_only
    key_expiry_disabled: true
    client_version: "1.94.1"
    os: linux
    advertised_routes: ["0.0.0.0/0", "10.0.0.0/24"]
    legacy_aliases: ["ha"]

  # ─── Client devices (not spine-governed) ───
  - id: macbook
    tailscale_ip: 100.85.186.7
    fqdn: macbook.taile9480.ts.net
    access_policy: client
    key_expiry_disabled: false
    client_version: "1.94.1"
    os: macOS

  - id: iphone
    tailscale_ip: 100.73.199.85
    fqdn: iphone.taile9480.ts.net
    access_policy: client
    key_expiry_disabled: false
    client_version: "1.94.1"
    os: iOS

  - id: nvidia-shield
    tailscale_ip: 100.80.155.23
    fqdn: nvidia-shield-android-tv.taile9480.ts.net
    access_policy: client
    key_expiry_disabled: true
    client_version: "1.92.3"
    os: android

  - id: windows-parents
    tailscale_ip: 100.102.167.111
    fqdn: windows-parents.taile9480.ts.net
    access_policy: client
    key_expiry_disabled: true
    client_version: "1.90.6"
    os: windows

  - id: windows-mint
    tailscale_ip: 100.65.199.32
    fqdn: windows-mint.taile9480.ts.net
    access_policy: client
    key_expiry_disabled: true
    client_version: "1.84.0"
    os: windows
    advertised_routes: ["0.0.0.0/0", "192.168.12.0/24", "192.168.254.0/24"]
