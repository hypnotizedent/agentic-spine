version: v1
status: active
owner: "@ronny"
last_verified: 2026-02-26
scope: mint-storage-guard-policy

mode:
  default_policy: report
  active_wave: wave-8-governance-report
  enforce_enabled: false
  no_runtime_mutation: true

thresholds:
  root_usage_warn_pct: 60
  root_usage_fail_pct: 80
  docker_images_warn_gb: 15
  docker_build_cache_warn_gb: 10
  docker_local_volumes_warn_gb: 30
  host_tmp_large_file_mb: 10
  container_rootfs_warn_mb: 500

mint_data_contract:
  redis:
    require_appendonly: true
    require_named_volume_prefix: "mint-data_"
  required_containers:
    - mint-modules-postgres
    - mint-modules-minio
    - mint-modules-redis

mint_apps_contract:
  required_containers:
    - order-intake
    - files-api
    - pricing
    - shipping
    - suppliers
    - payment
    - quote-page
    - finance-adapter
  write_surface_patterns:
    - "upload"
    - "uploads"
    - "scratch"

promotion_to_enforce:
  prerequisites:
    - "Three consecutive report runs with zero unexpected findings for vm212/vm213"
    - "All STOR findings map to open or fixed gaps (no NONE linkage)"
    - "Operator approval with explicit wave activation receipt"
  rollback_trigger:
    - "Any post-promotion verify.pack.run mint FAIL on D235-D239"
