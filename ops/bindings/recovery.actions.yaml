version: 1
updated_at: "2026-03-01"
owner: "@ronny"
scope: recovery-actions

defaults:
  max_attempts: 2
  cooldown_seconds: 1800
  escalate_after_failures: 2

actions:
  - id: recover-finance-stack
    trigger:
      gate_ids: [D23]
      failure_class: deterministic
    recovery:
      type: docker_compose_restart
      target: finance-stack
      stack: finance
      services: []
    safety:
      max_attempts: 2
      cooldown_seconds: 1800
      escalate_after_failures: 2

  - id: recover-communications-stack
    trigger:
      gate_ids: [D209]
      failure_class: deterministic
    recovery:
      type: docker_compose_restart
      target: communications-stack
      stack: communications-stack
      services: []
    safety:
      max_attempts: 2
      cooldown_seconds: 1800
      escalate_after_failures: 2

  - id: recover-freshness-reconcile
    trigger:
      gate_ids: []
      failure_class: freshness
    recovery:
      type: capability_retry
      capability: verify.freshness.reconcile
      max_attempts: 2
      backoff_seconds: [60, 300]
    safety:
      max_attempts: 2
      cooldown_seconds: 900
      escalate_after_failures: 2
