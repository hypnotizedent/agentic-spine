---
status: authoritative
owner: "@ronny"
last_verified: 2026-02-15
scope: mailroom-bridge-endpoints
version: 1
updated_at: "2026-02-15"
endpoints:
  localhost:
    url: "http://127.0.0.1:8799"
    health_path: "/health"
    mode: local
  tailnet_http:
    url: "http://macbook.taile9480.ts.net"
    health_path: "/health"
    mode: tailnet
  public_https:
    # Set this to your Cloudflare Tunnel public hostname when ready.
    # Example: "https://bridge.ronny.works"
    url: "https://spine.ronny.works"
    health_path: "/health"
    mode: public
policy:
  remote_preference:
    - public_https
    - tailnet_http
  public_https_required_for_hosted_runtime: true
  require_https_for_public: true
security:
  auth_required_non_health: true
  supported_headers:
    - "Authorization: Bearer <token>"
    - "X-Spine-Token: <token>"
    - "CF-Access-Client-Id: <service-token-id>"
    - "CF-Access-Client-Secret: <service-token-secret>"
    - "Cf-Access-Jwt-Assertion: <jwt> (injected by Cloudflare)"
  description:
    - "Bridge server remains localhost-bound; exposure is via proxy/tunnel only."
    - "Public endpoint must preserve token auth and not bypass bridge allowlists."
