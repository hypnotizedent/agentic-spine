# Agent Entrypoint Lock Binding
#
# Defines governance rules for agent IDE/CLI instruction files
# that live outside the spine repo (e.g. ~/.claude/, ~/.codex/).
#
# Status: authoritative
# Last verified: 2026-02-13

version: 1
updated_at: "2026-02-08"

# ─────────────────────────────────────────────────────────────────
# Claude entrypoint governance
# ─────────────────────────────────────────────────────────────────

claude:
  home_dir: "~/.claude"
  governed_files:
    - path: "~/.claude/CLAUDE.md"
      role: redirect-shim
      required_refs:
        - "AGENTS.md"
        - "SESSION_PROTOCOL.md"
      forbidden_headings:
        - "Authority Order"
        - "Immutable Invariants"
        - "Operating Loop"
        - "Safety Defaults"
        - "What You Must Not Do"

    - path: "~/.claude/commands/ctx.md"
      role: command-definition

    - path: "~/.claude/settings.json"
      role: permissions

    - path: "~/.claude/settings.local.json"
      role: permissions

  path_canon:
    forbidden_pattern: "/Users/ronnyworks/Code/"
    canonical_pattern: "/Users/ronnyworks/code/"

# ─────────────────────────────────────────────────────────────────
# Brain path governance
# ─────────────────────────────────────────────────────────────────

brain:
  canonical_path: "docs/brain"
  forbidden_path: ".brain"
  governed_scripts:
    - "ops/runtime/inbox/launch-agent.sh"
    - "ops/runtime/inbox/hot-folder-watcher.sh"
    - "ops/runtime/inbox/close-session.sh"
  governed_docs:
    - "docs/governance/SESSION_PROTOCOL.md"

# ─────────────────────────────────────────────────────────────────
# Codex entrypoint governance (existing D32)
# ─────────────────────────────────────────────────────────────────

codex:
  home_dir: "~/.codex"
  governed_files:
    - path: "~/.codex/AGENTS.md"
      role: redirect-shim
      gate: "d32-codex-instruction-source-lock.sh"
