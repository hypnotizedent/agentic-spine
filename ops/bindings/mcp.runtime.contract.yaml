# MCP Runtime Contract
# Status: authoritative
# Last verified: 2026-02-21

version: 2
updated_at: "2026-02-21"
owner: "@ronny"
scope: mcp-runtime-parity

# Gateway-first routing (AOF v1.1 Move 1)
# The unified spine-MCP gateway is the primary MCP server for all surfaces.
# It exposes cap_list, cap_run, and RAG compatibility wrappers via stdio.
# Per-surface standalone MCP servers (finance-agent, mint-pricing, etc.)
# remain as optional domain-specific tool providers until cap delegation
# absorbs them fully.
gateway:
  server_name: spine
  command: "/Users/ronnyworks/code/agentic-spine/bin/ops"
  args: ["mcp", "serve"]
  absorbs:
    - spine-rag  # RAG tools served via gateway rag_query/rag_retrieve/rag_health

required_servers_by_surface:
  codex:
    - spine
  claude_desktop:
    - spine
    - immich-photos
    - communications-agent
  opencode:
    - spine

aliases:
  spine-rag:
    - spine_rag
  spine_rag:
    - spine-rag
  mint-pricing:
    - mint_pricing
  mint_pricing:
    - mint-pricing
  mint-suppliers:
    - mint_suppliers
  mint_suppliers:
    - mint-suppliers
  filesystem:
    - filesystem-local
  filesystem-local:
    - filesystem

optional_servers:
  codex:
    - finance-agent
    - mint-pricing
    - mint-suppliers
    - playwright
  claude_desktop:
    - MCP_DOCKER
    - finance-agent
  opencode:
    - playwright

runtime_checks:
  - required_registered
  - required_enabled
  - alias_normalization
  - gateway_present

surface_paths:
  codex: "/Users/ronnyworks/code/agentic-spine/.mcp.json"
  claude_desktop: "/Users/ronnyworks/Library/Application Support/Claude/claude_desktop_config.json"
  claude_desktop_runtime_state: "/Users/ronnyworks/.claude.json"
  opencode: "/Users/ronnyworks/code/workbench/dotfiles/opencode/opencode.json"

claude_project_path: "/Users/ronnyworks"
