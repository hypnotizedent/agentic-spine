# Entry Surface Contract
# Status: authoritative
# Last verified: 2026-02-18

version: 2
updated_at: "2026-02-18"
owner: "@ronny"
scope: startup-entry-parity

startup_block:
  marker_start: "<!-- SPINE_STARTUP_BLOCK -->"
  marker_end: "<!-- /SPINE_STARTUP_BLOCK -->"
  required_lines:
    - "cd /Users/ronnyworks/code/agentic-spine"
    - "./bin/ops status"
    - "./bin/ops cap list"
    - "./bin/ops cap run stability.control.snapshot"
    - "./bin/ops cap run verify.core.run"
    - "./bin/ops cap run verify.route.recommend"
    - "./bin/ops cap run verify.pack.run <domain|core-operator>"
    - "./bin/ops cap run spine.verify"

surfaces:
  - id: codex
    path: AGENTS.md
  - id: claude_project
    path: CLAUDE.md
  - id: opencode
    path: /Users/ronnyworks/code/workbench/dotfiles/opencode/OPENCODE.md
  - id: claude_home
    path: /Users/ronnyworks/.claude/CLAUDE.md

# Gateway-first routing policy (AOF v1.1 Move 1 cutover)
# All surfaces should declare the spine gateway as primary MCP server.
# Domain-specific MCP servers (finance-agent, mint-*) are optional supplements.
# spine-rag is absorbed by the gateway and should not appear as a standalone server.
routing_policy:
  model: gateway-first
  primary_server: spine
  absorbed_servers:
    - spine-rag
  supplemental_servers:
    - finance-agent
    - mint-pricing
    - mint-suppliers
    - MCP_DOCKER
    - playwright
