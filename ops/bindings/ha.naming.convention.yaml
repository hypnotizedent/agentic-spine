# HA Naming Convention (SSOT)
# Status: authoritative
# Last verified: 2026-02-17
# Scope: HA identity naming contract

schema_version: "1.0"
pattern: "{area}_{function}_{qualifier}"
format:
  case: snake_case
  separator: "_"
  allowed_chars_regex: "^[a-z0-9_]+$"
required_tokens:
  - area
  - function
  - qualifier

token_rules:
  area:
    source_of_truth: "ops/bindings/ha.areas.yaml"
    normalization:
      - from: "entrace"
        to: "entryway"
  function:
    examples: ["bulb", "plug", "button", "vacuum", "purifier", "tv", "sensor", "litterbot", "feeder"]
  qualifier:
    examples: ["king", "empress", "desk", "guest", "living", "office", "primary", "secondary"]

reconciliation:
  required_surfaces:
    - "ops/bindings/ha.device.map.yaml"
    - "ops/bindings/home.device.registry.yaml"
    - "ops/bindings/ha.ssot.baseline.yaml"
  post_mutation_refresh_sequence:
    - "ha.device.map.build"
    - "ha.refresh"
    - "ha.ssot.baseline.build"

enforcement:
  verify_gates:
    - "D117"
    - "D120"
  verify_lane: "verify.domain.run home --force"
