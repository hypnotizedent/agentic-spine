---
version: 1
gate_id: D128
updated: "2026-02-24"
description: >
  Enforces governed mutation provenance for gate registry + topology contracts.
  Direct/manual edits are blocked and commit history must include Gate-* trailers.

files:
  - ops/bindings/gate.registry.yaml
  - ops/bindings/gate.execution.topology.yaml

window: 80
# Advanced 2026-02-18: 09ce5c8 demotes D48 from core pack and relaxes D140.
# Manual operator topology edit, no gate.topology.* capability invoked.
# Advanced 2026-02-21: d00d00c (GAP-OP-706) added D146 gate+topology without
# governed capability. Already pushed â€” cannot amend. GAP-OP-725 tracks repair.
# Advanced 2026-02-21 (GAP-OP-776): historical gate mutations through
# 17f0a25 predate strict trailer provenance and are attested as legacy.
# Forward enforcement starts after that boundary (no history rewrite).
# Advanced 2026-02-24 (GAP-OP-874): additional historical gate mutations in
# 17f0a25..ef0f23a lacked Gate-* trailers. No history rewrite permitted;
# advance enforcement boundary to last known historical mutation.
# Advanced 2026-02-24 (GAP-OP-874): e6c15a1 introduced D217-D219 with
# Gate-Mutation trailer only. Preserve forward enforcement without history
# rewrite by advancing the boundary to that commit.
enforcement_after_sha: "e6c15a1ad0a0fec341ec200b2ac029b9e1318f32"

required_trailers:
  - Gate-Mutation
  - Gate-Capability
  - Gate-Run-Key

allowed_capabilities:
  - gate.registry.add
  - gate.registry.update
  - gate.topology.assign
  - gate.topology.validate
  - domain.onboard.new

strict: true

operator_workflow:
  trailer_helper: "./ops/plugins/verify/bin/gate-mutation-trailers"
  required_for_files:
    - "ops/bindings/gate.registry.yaml"
    - "ops/bindings/gate.execution.topology.yaml"
  commit_message_template:
    - "Gate-Mutation: capability"
    - "Gate-Capability: <allowed capability>"
    - "Gate-Run-Key: <CAP-...>"
