status: authoritative
owner: "@ronny"
last_verified: 2026-02-23
scope: platform-extension-namespace-collision-prevention
source_bindings:
  - ops/bindings/topology.sites.yaml
  - ops/bindings/topology.workstations.yaml
  - ops/bindings/business.registry.yaml
  - ops/bindings/service.onboarding.contract.yaml
  - ops/bindings/agents.registry.yaml
  - ops/bindings/services.health.yaml
  - /Users/ronnyworks/code/workbench/scripts/root/deploy/stack-map.sh
canonical_uniqueness_sets:
  - site_ids
  - workstation_ids
  - business_ids
  - service_ids
  - agent_ids
  - deploy_stack_ids
  - observability_probe_ids
  - tailscale_aliases
vm_range_policy:
  active_statuses:
    - active
  required_for_active_sites: true
  non_overlapping: true
  range_pattern: '^[0-9]+-[0-9]+$'
cross_reference_policy:
  workstation_site_must_exist: true
  business_primary_site_must_exist: true
  service_owning_agent_must_exist: true
  service_deploy_stack_must_exist: true
  service_observability_probe_must_exist: true
  enforce_for_service_statuses:
    - active
  workbench_stack_map_path: /Users/ronnyworks/code/workbench/scripts/root/deploy/stack-map.sh
  observability_probe_resolution:
    allow_stack_id_passthrough: true
    allow_stack_host_coverage: true
naming_rules:
  id_regex: '^[a-z0-9][a-z0-9-]*$'
  stack_id_regex: '^[a-z0-9][a-z0-9-]*$'
  forbid_uppercase: true
  forbid_spaces: true
report_contract:
  required_arrays:
    - collisions
    - missing_refs
    - invalid_names
    - vmid_overlap
