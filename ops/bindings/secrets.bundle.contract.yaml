# Status: authoritative
# Last verified: 2026-02-17
# Purpose: Canonical bundle-based secret rotation and verification contract.

version: 1
updated: "2026-02-17"
owner: "@ronny"

defaults:
  deprecated_projects:
    - finance-stack
    - mint-os-vault

bundles:
  finance:
    description: "Finance API token rotation bundle (Firefly + Paperless)."
    project: infrastructure
    environment: prod
    legacy_projects:
      - finance-stack
    keys:
      - name: FIREFLY_PAT
        path: /spine/services/finance
      - name: PAPERLESS_API_TOKEN
        path: /spine/services/paperless
    verify:
      - id: firefly_about
        type: bearer
        key: FIREFLY_PAT
        url: http://100.76.153.100:8080/api/v1/about
        expect_http: 200
      - id: paperless_docs
        type: token
        key: PAPERLESS_API_TOKEN
        url: "http://100.76.153.100:8000/api/documents/?page_size=1"
        expect_http: 200
    local_env:
      file: /Users/ronnyworks/code/workbench/agents/finance/tools/.env
      static:
        FIREFLY_URL: http://100.76.153.100:8080
        PAPERLESS_URL: http://100.76.153.100:8000
      secret_keys:
        - FIREFLY_PAT
        - PAPERLESS_API_TOKEN
