version: 1
updated: "2026-02-10"

# Secrets Credential Parity Binding (SSOT)
#
# Purpose:
# - Define which machines MUST have `~/.config/infisical/credentials` configured
#   correctly (shape + perms) so agent/runtime operations are predictable.
# - This binding is non-secret. It MUST NOT contain secret values.
#
# Notes:
# - `local` refers to the machine running the spine CLI.
# - `id` entries (non-local) must exist in ops/bindings/ssh.targets.yaml.

credentials:
  relpath: ".config/infisical/credentials"
  require_perm: "600"
  required_exports:
    - "INFISICAL_API_URL"
    - "INFISICAL_UNIVERSAL_AUTH_CLIENT_ID"
    - "INFISICAL_UNIVERSAL_AUTH_CLIENT_SECRET"

targets:
  - id: "local"
    required: true
    notes: "Spine operator workstation"

  - id: "automation-stack"
    required: true
    notes: "n8n, Open WebUI, Ollama (VM 202)"

  - id: "ai-consolidation"
    required: false
    notes: "AnythingLLM + Qdrant (VM 207) (optional until bridge is finalized)"

