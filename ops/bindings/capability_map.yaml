# Capability Map — cap -> plugin -> script
# Auto-generated navigation index. Source of truth: ops/capabilities.yaml
# Last updated: 2026-02-21
# Status: authoritative
# Last verified: 2026-02-18

# ═══════════════════════════════════════════════════════════════════════════
# SPINE HEALTH
# ═══════════════════════════════════════════════════════════════════════════

capabilities:

  spine.verify:
    plugin: verify
    script: spine-verify.sh
    safety: read-only
    note: "command runs surfaces/verify/spine-verify.sh (switches between full and core_only modes)"

  spine.replay:
    plugin: verify
    script: replay-test.sh
    safety: read-only
    note: "command runs surfaces/verify/replay-test.sh (not in plugins/)"

  spine.status:
    plugin: inbox
    script: agent-status.sh
    safety: read-only
    note: "command runs ops/runtime/inbox/agent-status.sh (not in plugins/)"

  spine.briefing:
    plugin: briefing
    script: spine-briefing
    safety: mutating

  spine.control.tick:
    plugin: evidence
    script: spine-control
    safety: read-only
    note: "command runs ops/plugins/evidence/bin/spine-control tick"

  spine.control.plan:
    plugin: evidence
    script: spine-control
    safety: read-only
    note: "command runs ops/plugins/evidence/bin/spine-control plan"

  spine.control.execute:
    plugin: evidence
    script: spine-control
    safety: mutating
    note: "command runs ops/plugins/evidence/bin/spine-control execute"

  spine.control.cycle:
    plugin: evidence
    script: spine-control
    safety: mutating
    note: "command runs ops/plugins/evidence/bin/spine-control cycle"

  spine.terminal.launch:
    plugin: ops
    script: terminal-launch.sh
    safety: read-only
    note: "command runs ops/commands/terminal-launch.sh"

  codex.worktree.status:
    plugin: verify
    script: d48-codex-worktree-hygiene.sh
    safety: read-only
    note: "command runs surfaces/verify/d48-codex-worktree-hygiene.sh (not in plugins/)"

  spine.watcher.status:
    plugin: inbox
    script: agent-status.sh
    safety: read-only
    note: "command runs ops/runtime/inbox/agent-status.sh (not in plugins/)"

  spine.watcher.restart:
    plugin: inbox
    script: agent-restart.sh
    safety: mutating
    note: "command runs ops/runtime/inbox/agent-restart.sh (not in plugins/)"

  # ═══════════════════════════════════════════════════════════════════════════
  # MAILROOM BRIDGE
  # ═══════════════════════════════════════════════════════════════════════════

  mailroom.bridge.status:
    plugin: mailroom-bridge
    script: mailroom-bridge-status
    safety: read-only

  mailroom.bridge.start:
    plugin: mailroom-bridge
    script: mailroom-bridge-start
    safety: mutating

  mailroom.bridge.stop:
    plugin: mailroom-bridge
    script: mailroom-bridge-stop
    safety: mutating

  mailroom.bridge.expose.status:
    plugin: mailroom-bridge
    script: mailroom-bridge-expose-status
    safety: read-only

  mailroom.bridge.expose.enable:
    plugin: mailroom-bridge
    script: mailroom-bridge-expose-enable
    safety: mutating

  mailroom.bridge.expose.disable:
    plugin: mailroom-bridge
    script: mailroom-bridge-expose-disable
    safety: mutating

  mailroom.task.enqueue:
    plugin: mailroom-bridge
    script: mailroom-task-enqueue
    safety: mutating

  mailroom.task.claim:
    plugin: mailroom-bridge
    script: mailroom-task-claim
    safety: mutating

  mailroom.task.heartbeat:
    plugin: mailroom-bridge
    script: mailroom-task-heartbeat
    safety: mutating

  mailroom.task.complete:
    plugin: mailroom-bridge
    script: mailroom-task-complete
    safety: mutating

  mailroom.task.fail:
    plugin: mailroom-bridge
    script: mailroom-task-fail
    safety: mutating

  mailroom.task.worker.start:
    plugin: mailroom-bridge
    script: mailroom-task-worker
    safety: mutating
    note: "command runs ops/plugins/mailroom-bridge/bin/mailroom-task-worker --daemon"

  mailroom.task.worker.stop:
    plugin: mailroom-bridge
    script: mailroom-task-worker
    safety: mutating
    note: "command runs ops/plugins/mailroom-bridge/bin/mailroom-task-worker --stop"

  mailroom.task.worker.status:
    plugin: mailroom-bridge
    script: mailroom-task-worker
    safety: read-only
    note: "command runs ops/plugins/mailroom-bridge/bin/mailroom-task-worker --status"

  mailroom.task.worker.once:
    plugin: mailroom-bridge
    script: mailroom-task-worker
    safety: mutating
    note: "command runs ops/plugins/mailroom-bridge/bin/mailroom-task-worker --once"

  calendar.generate:
    plugin: calendar
    script: calendar-generate
    safety: read-only

  calendar.status:
    plugin: calendar
    script: calendar-status
    safety: read-only

  calendar.sync.plan:
    plugin: calendar
    script: calendar-sync-plan
    safety: read-only

  calendar.sync.execute:
    plugin: calendar
    script: calendar-sync-execute
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # LOOPS
  # ═══════════════════════════════════════════════════════════════════════════

  gaps.status:
    plugin: loops
    script: gaps-status
    safety: read-only

  gaps.claim:
    plugin: loops
    script: gaps-claim
    safety: mutating

  gaps.unclaim:
    plugin: loops
    script: gaps-unclaim
    safety: mutating

  gaps.file:
    plugin: loops
    script: gaps-file
    safety: mutating

  gaps.close:
    plugin: loops
    script: gaps-close
    safety: destructive

  loops.status:
    plugin: loops
    script: loops-status
    safety: read-only

  loops.reconcile:
    plugin: loops
    script: loops-reconcile
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # LIFECYCLE
  # ═══════════════════════════════════════════════════════════════════════════

  gaps.quick:
    plugin: lifecycle
    script: gaps-quick
    safety: mutating

  loops.progress:
    plugin: lifecycle
    script: loops-progress
    safety: read-only

  loops.auto.close:
    plugin: lifecycle
    script: loops-auto-close
    safety: mutating

  gaps.aging:
    plugin: lifecycle
    script: gaps-aging
    safety: read-only

  lifecycle.health:
    plugin: lifecycle
    script: lifecycle-health
    safety: read-only

  loops.create:
    plugin: lifecycle
    script: loops-create
    safety: mutating

  gaps.batch.close:
    plugin: lifecycle
    script: gaps-batch-close
    safety: destructive

  lane.standard.run:
    plugin: lifecycle
    script: lane-standard-run
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # ORCHESTRATION
  # ═══════════════════════════════════════════════════════════════════════════

  orchestration.loop.open:
    plugin: orchestration
    script: orchestration-loop-open
    safety: mutating

  orchestration.ticket.issue:
    plugin: orchestration
    script: orchestration-ticket-issue
    safety: mutating

  orchestration.handoff.validate:
    plugin: orchestration
    script: orchestration-handoff-validate
    safety: mutating

  orchestration.integrate:
    plugin: orchestration
    script: orchestration-integrate
    safety: mutating

  orchestration.loop.close:
    plugin: orchestration
    script: orchestration-loop-close
    safety: mutating

  orchestration.status:
    plugin: orchestration
    script: orchestration-status
    safety: read-only

  orchestration.terminal.entry:
    plugin: orchestration
    script: orchestration-terminal-entry
    safety: mutating

  # WAVE ORCHESTRATION (lane-aware multi-terminal coordination)

  orchestration.wave.start:
    plugin: orchestration
    script: orchestration-wave
    safety: mutating
    note: "Create a new wave for multi-terminal coordination"

  orchestration.wave.dispatch:
    plugin: orchestration
    script: orchestration-wave
    safety: mutating
    note: "Dispatch task to a lane within a wave"

  orchestration.wave.collect:
    plugin: orchestration
    script: orchestration-wave
    safety: read-only
    note: "Collect results from all lanes in a wave"

  orchestration.wave.ack:
    plugin: orchestration
    script: orchestration-wave
    safety: mutating
    note: "Acknowledge task completion with run key"

  orchestration.wave.status:
    plugin: orchestration
    script: orchestration-wave
    safety: read-only
    note: "Show wave status with lanes, dispatches, watcher checks"

  orchestration.wave.close:
    plugin: orchestration
    script: orchestration-wave
    safety: mutating
    note: "Close wave, generate merge receipt"

  orchestration.lane.list:
    plugin: orchestration
    script: orchestration-lane
    safety: read-only
    note: "List lane profiles with write scopes"

  orchestration.lane.open:
    plugin: orchestration
    script: orchestration-lane
    safety: mutating
    note: "Open a lane with write-scope enforcement"

  orchestration.lane.status:
    plugin: orchestration
    script: orchestration-lane
    safety: read-only
    note: "Show open lanes and terminal assignments"

  orchestration.preflight.fast:
    plugin: orchestration
    script: orchestration-preflight-fast
    safety: read-only
    note: "Fast non-blocking preflight (<=120s target)"

  orchestration.watcher.enqueue:
    plugin: orchestration
    script: orchestration-watcher
    safety: mutating
    note: "Enqueue long checks to watcher lane"

  orchestration.watcher.status:
    plugin: orchestration
    script: orchestration-watcher
    safety: read-only
    note: "Show background watcher check status"

  orchestration.wave.receipt.validate:
    plugin: orchestration
    script: orchestration-wave
    safety: read-only
    note: "Validate EXEC_RECEIPT JSON artifact against schema"

  session.handoff.create:
    plugin: handoff
    script: session-handoff-create
    safety: mutating

  session.handoff.get:
    plugin: handoff
    script: session-handoff-get
    safety: read-only

  session.handoff.list:
    plugin: handoff
    script: session-handoff-list
    safety: read-only

  session.handoff.close:
    plugin: handoff
    script: session-handoff-close
    safety: mutating

  session.handoff.expire:
    plugin: handoff
    script: session-handoff-expire
    safety: mutating

  session.handoff.status:
    plugin: handoff
    script: session-handoff-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # MONOLITH READ
  # ═══════════════════════════════════════════════════════════════════════════

  monolith.tree:
    plugin: monolith
    script: ~
    safety: read-only
    note: "command is bare 'ls -la' in $HOME/code"

  monolith.search:
    plugin: monolith
    script: monolith-search
    safety: read-only

  monolith.git_status:
    plugin: monolith
    script: monolith-git-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # N8N
  # ═══════════════════════════════════════════════════════════════════════════

  n8n.workflows.list:
    plugin: n8n
    script: n8n-workflows
    safety: read-only
    note: "secrets-exec wrapper -> n8n-workflows list"

  n8n.workflows.get:
    plugin: n8n
    script: n8n-workflows
    safety: read-only
    note: "secrets-exec wrapper -> n8n-workflows get"

  n8n.workflows.export:
    plugin: n8n
    script: n8n-workflows
    safety: mutating
    note: "secrets-exec wrapper -> n8n-workflows export"

  n8n.workflows.import:
    plugin: n8n
    script: n8n-workflows
    safety: mutating
    note: "secrets-exec wrapper -> n8n-workflows import"

  n8n.workflows.activate:
    plugin: n8n
    script: n8n-workflows
    safety: mutating
    note: "secrets-exec wrapper -> n8n-workflows activate"

  n8n.workflows.deactivate:
    plugin: n8n
    script: n8n-workflows
    safety: mutating
    note: "secrets-exec wrapper -> n8n-workflows deactivate"

  n8n.workflows.update:
    plugin: n8n
    script: n8n-workflows
    safety: mutating
    note: "secrets-exec wrapper -> n8n-workflows update"

  n8n.workflows.delete:
    plugin: n8n
    script: n8n-workflows
    safety: destructive
    note: "secrets-exec wrapper -> n8n-workflows delete"

  n8n.workflows.snapshot:
    plugin: n8n
    script: n8n-workflows
    safety: mutating
    note: "secrets-exec wrapper -> n8n-workflows export-all (API-based, all workflows)"

  n8n.workflows.snapshot.status:
    plugin: n8n
    script: n8n-snapshot-status
    safety: read-only
    note: "SSH to automation-stack, check snapshot artifacts and freshness"

  n8n.infra.health:
    plugin: n8n
    script: n8n-infra-health
    safety: read-only
    note: "secrets-exec wrapper -> n8n-infra-health (uptime/auth/snapshot/backup reliability)"

  n8n.infra.health.quick:
    plugin: n8n
    script: n8n-infra-health
    safety: read-only
    note: "n8n-infra-health with N8N_INFRA_SKIP_API_AUTH=true for low-latency control probes"

  # ═══════════════════════════════════════════════════════════════════════════
  # INFRASTRUCTURE (read-only checks)
  # ═══════════════════════════════════════════════════════════════════════════

  infra.docker_ps:
    plugin: ~
    script: ~
    safety: read-only
    note: "bare 'docker ps' command (no plugin script)"

  spine.ripple.check:
    plugin: infra
    script: ripple-check
    safety: read-only

  vm.governance.audit:
    plugin: vm
    script: vm-governance-audit
    safety: read-only

  vm.profile.audit:
    plugin: vm
    script: vm-profile-audit
    safety: read-only

  authority.project.status:
    plugin: authority
    script: project-governance-status
    safety: read-only

  authority.project.bootstrap:
    plugin: authority
    script: project-governance-bootstrap
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # VERIFY
  # ═══════════════════════════════════════════════════════════════════════════

  verify.drift_gates.certify:
    plugin: verify
    script: drift-gates-certify
    safety: read-only

  verify.drift_gates.failure_stats:
    plugin: verify
    script: drift-gates-failure-stats
    safety: read-only

  policy.autotune.weekly:
    plugin: verify
    script: policy-autotune-weekly
    safety: read-only

  policy.autotune.propose:
    plugin: verify
    script: policy-autotune-propose
    safety: mutating

  verify.core.run:
    plugin: verify
    script: verify-topology
    safety: read-only
    note: "subcommand: core"

  verify.fast:
    plugin: verify
    script: verify-topology
    safety: read-only
    note: "alias for verify.core.run — fast session-start verify (core-9 only, <60s, no network)"

  verify.domain.run:
    plugin: verify
    script: verify-topology
    safety: read-only
    note: "subcommand: domain <domain>"

  verify.release.run:
    plugin: verify
    script: verify-topology
    safety: read-only
    note: "subcommand: release"

  verify.route.recommend:
    plugin: verify
    script: verify-topology
    safety: read-only
    note: "subcommand: recommend [--path] [--capability]"

  verify.vertical_integration.parity_status:
    plugin: verify
    script: vertical-integration-parity-status
    safety: read-only

  verify.pack.list:
    plugin: verify
    script: verify-pack
    safety: read-only
    note: "subcommand: list"

  verify.pack.run:
    plugin: verify
    script: verify-pack
    safety: read-only
    note: "subcommand: run"

  verify.pack.explain:
    plugin: verify
    script: verify-pack
    safety: read-only
    note: "subcommand: explain"

  gate.topology.validate:
    plugin: verify
    script: gate-topology-validate
    safety: read-only

  gate.topology.assign:
    plugin: verify
    script: gate-topology-assign
    safety: mutating

  gate.registry.add:
    plugin: verify
    script: gate-registry-add
    safety: mutating

  gate.registry.update:
    plugin: verify
    script: gate-registry-update
    safety: mutating

  gate.mutation.trailers:
    plugin: verify
    script: gate-mutation-trailers
    safety: read-only

  domain.onboard.new:
    plugin: verify
    script: domain-onboard-new
    safety: mutating

  surface.boundary.audit:
    plugin: surface
    script: surface-boundary-audit
    safety: read-only
    note: "enforces ops/bindings/spine.boundary.baseline.yaml against live spine tree"

  surface.boundary.reconcile.plan:
    plugin: surface
    script: surface-boundary-reconcile-plan
    safety: read-only
    note: "writes reconcile plan to docs/governance/_audits/SURFACE_BOUNDARY_RECONCILE_YYYYMMDD.md"

  catalog.domain.sync:
    plugin: docs
    script: catalog-domain-sync
    safety: read-only
    note: "syncs domain capability catalogs + updates capability.domain.catalog.yaml"

  mailroom.runtime.migrate:
    plugin: mailroom-bridge
    script: mailroom-runtime-migrate
    safety: mutating
    note: "migrates runtime artifacts to external runtime root per mailroom.runtime.contract.yaml"

  stabilization.mode.status:
    plugin: tenant
    script: stabilization-mode-status
    safety: read-only
    note: "reports active stabilization window, verify bypass targets, and required preflight capability"

  surface.audit.full:
    plugin: verify
    script: surface-audit-full
    safety: read-only
    note: "emits docs/governance/_audits/SURFACE_AUDIT_YYYYMMDD.md"

  calendar.surface.audit:
    plugin: verify
    script: calendar-surface-audit
    safety: read-only
    note: "emits docs/governance/_audits/CALENDAR_SURFACE_AUDIT_YYYYMMDD.md"

  workbench.impl.audit:
    plugin: verify
    script: workbench-impl-audit
    safety: read-only
    note: "domain_external implementation_repo/implementation_path parity + discovery"

  schema.conventions.audit:
    plugin: verify
    script: schema-conventions-audit
    safety: read-only
    note: "full conventions audit for ops/bindings with report output"

  # ═══════════════════════════════════════════════════════════════════════════
  # RAG
  # ═══════════════════════════════════════════════════════════════════════════

  rag.health:
    plugin: rag
    script: rag
    safety: read-only
    note: "rag health subcommand"

  rag.anythingllm.status:
    plugin: rag
    script: rag
    safety: read-only
    note: "secrets-exec wrapper -> rag status"

  rag.anythingllm.ask:
    plugin: rag
    script: rag
    safety: read-only
    note: "secrets-exec wrapper -> rag ask"

  rag.anythingllm.sync:
    plugin: rag
    script: rag
    safety: mutating
    note: "secrets-exec wrapper -> rag sync"

  rag.anythingllm.tune:
    plugin: rag
    script: anythingllm-tune
    safety: mutating

  # MCP server adapter (not a runnable capability; registered for discoverability)
  # Invoked by Claude Code via .mcp.json, not via ops cap run.
  rag.mcp.server:
    plugin: rag
    script: rag-mcp-server
    safety: read-only
    note: "MCP stdio server wrapping rag ask/retrieve/health for Claude Code tool calls"

  rag.reindex.remote.start:
    plugin: rag
    script: rag-reindex-remote-start
    safety: mutating
    note: "Start detached remote reindex job on VM 207 (dry-run default)"

  rag.reindex.remote.status:
    plugin: rag
    script: rag-reindex-remote-status
    safety: read-only
    note: "Read remote reindex status/session/log/checkpoint progress"

  rag.reindex.remote.stop:
    plugin: rag
    script: rag-reindex-remote-stop
    safety: mutating
    note: "Stop detached remote reindex tmux session (dry-run default)"

  rag.reindex.remote.verify:
    plugin: rag
    script: rag-reindex-remote-verify
    safety: read-only
    note: "Verify reindex completion quality against rag.reindex.quality.yaml contract"

  rag.remote.dependency.probe:
    plugin: rag
    script: rag-remote-dependency-probe
    safety: read-only
    note: "Probe RAG dependencies from VM207 perspective with timing SLOs"

  rag.embedding.probe:
    plugin: rag
    script: rag-embedding-probe
    safety: read-only
    note: "Probe embedding backend health with dimension/latency/HTTP checks from binding"

  rag.reindex.smoke:
    plugin: rag
    script: rag-reindex-smoke
    safety: mutating
    note: "Short-batch smoke test — upload N docs to validate embedding pipeline before full reindex"

  # ═══════════════════════════════════════════════════════════════════════════
  # SECRETS
  # ═══════════════════════════════════════════════════════════════════════════

  secrets.status:
    plugin: secrets
    script: secrets-status
    safety: read-only

  secrets.binding:
    plugin: secrets
    script: secrets-binding
    safety: read-only

  secrets.auth.status:
    plugin: secrets
    script: secrets-auth-status
    safety: read-only

  secrets.auth.load:
    plugin: secrets
    script: secrets-auth-load
    safety: read-only

  secrets.credentials.parity:
    plugin: secrets
    script: secrets-credentials-parity
    safety: read-only

  secrets.projects.status:
    plugin: secrets
    script: secrets-projects-status
    safety: read-only

  secrets.inventory.status:
    plugin: secrets
    script: secrets-inventory-status
    safety: read-only

  secrets.namespace.status:
    plugin: secrets
    script: secrets-namespace-status
    safety: read-only

  secrets.runway.status:
    plugin: secrets
    script: secrets-runway-status
    safety: read-only

  secrets.bundle.verify:
    plugin: secrets
    script: secrets-bundle-apply
    safety: read-only
    note: "invoked with --verify-only"

  secrets.bundle.apply:
    plugin: secrets
    script: secrets-bundle-apply
    safety: mutating

  secrets.cli.status:
    plugin: secrets
    script: secrets-cli-status
    safety: read-only

  secrets.identity.rbac.status:
    plugin: secrets
    script: secrets-identity-rbac-status
    safety: read-only

  secrets.identity.rbac.lock:
    plugin: secrets
    script: secrets-identity-rbac-lock
    safety: mutating
    note: "invoked with --execute to mutate; dry-run by default"

  secrets.exec:
    plugin: secrets
    script: secrets-exec
    safety: mutating

  secrets.set.interactive:
    plugin: secrets
    script: secrets-set-interactive
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # SECRETS MIGRATION (P1-P6)
  # ═══════════════════════════════════════════════════════════════════════════

  secrets.p1.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only

  secrets.p1.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "invoked with --execute"

  secrets.p2.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/network/edge"

  secrets.p2.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/network/edge --execute"

  secrets.p2.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/network/edge"

  secrets.p2.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/network/edge --execute"

  secrets.p3.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/storage/nas"

  secrets.p3.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/storage/nas --execute"

  secrets.p3.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/storage/nas"

  secrets.p3.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/storage/nas --execute"

  secrets.p4.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/integrations/commerce-mail"

  secrets.p4.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/integrations/commerce-mail --execute"

  secrets.p4.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/integrations/commerce-mail"

  secrets.p4.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/integrations/commerce-mail --execute"

  secrets.p5.immich.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/services/immich"

  secrets.p5.immich.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/services/immich --execute"

  secrets.p5.immich.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/services/immich"

  secrets.p5.immich.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/services/immich --execute"

  secrets.p5.mail_archiver.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/services/mail-archiver"

  secrets.p5.mail_archiver.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/services/mail-archiver --execute"

  secrets.p5.mail_archiver.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/services/mail-archiver"

  secrets.p5.mail_archiver.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/services/mail-archiver --execute"

  secrets.p5.finance.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/services/finance"

  secrets.p5.finance.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/services/finance --execute"

  secrets.p5.finance.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/services/finance"

  secrets.p5.finance.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/services/finance --execute"

  secrets.p5.paperless.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/services/paperless"

  secrets.p5.paperless.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/services/paperless --execute"

  secrets.p5.paperless.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/services/paperless"

  secrets.p5.paperless.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/services/paperless --execute"

  secrets.p5.mcpjungle.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/services/mcpjungle"

  secrets.p5.mcpjungle.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/services/mcpjungle --execute"

  secrets.p5.mcpjungle.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/services/mcpjungle"

  secrets.p5.mcpjungle.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/services/mcpjungle --execute"

  secrets.p6.ai.copy_first.status:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: read-only
    note: "target-path /spine/ai/providers"

  secrets.p6.ai.copy_first.execute:
    plugin: secrets
    script: secrets-cohort-copy-first
    safety: mutating
    note: "target-path /spine/ai/providers --execute"

  secrets.p6.ai.root_cleanup.status:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: read-only
    note: "target-path /spine/ai/providers"

  secrets.p6.ai.root_cleanup.execute:
    plugin: secrets
    script: secrets-p1-root-cleanup
    safety: mutating
    note: "target-path /spine/ai/providers --execute"

  # ═══════════════════════════════════════════════════════════════════════════
  # HOME ASSISTANT
  # ═══════════════════════════════════════════════════════════════════════════

  ha.refresh:
    plugin: ha
    script: ha-refresh
    safety: read-only

  ha.status:
    plugin: ha
    script: ha-status
    safety: read-only

  ha.ssot.propose:
    plugin: ha
    script: ha-ssot-propose
    safety: read-only

  ha.ssot.apply:
    plugin: ha
    script: ha-ssot-apply
    safety: mutating

  ha.config.extract:
    plugin: ha
    script: ha-config-extract
    safety: read-only

  ha.z2m.health:
    plugin: ha
    script: ha-z2m-health
    safety: read-only

  ha.z2m.devices.snapshot:
    plugin: ha
    script: ha-z2m-devices-snapshot
    safety: read-only

  ha.zwave.devices.snapshot:
    plugin: ha
    script: ha-zwave-devices-snapshot
    safety: read-only

  ha.addon.restart:
    plugin: ha
    script: ha-addon-restart
    safety: mutating

  ha.addons.snapshot:
    plugin: ha
    script: ha-addons-snapshot
    safety: read-only

  ha.device.map.build:
    plugin: ha
    script: ha-device-map-build
    safety: read-only

  ha.dashboard.snapshot:
    plugin: ha
    script: ha-dashboard-snapshot
    safety: read-only

  ha.dashboard.backup:
    plugin: ha
    script: ha-dashboard-backup
    safety: read-only

  ha.integrations.snapshot:
    plugin: ha
    script: ha-integrations-snapshot
    safety: read-only

  ha.automations.snapshot:
    plugin: ha
    script: ha-automations-snapshot
    safety: read-only

  ha.helpers.snapshot:
    plugin: ha
    script: ha-helpers-snapshot
    safety: read-only

  ha.scenes.snapshot:
    plugin: ha
    script: ha-scenes-snapshot
    safety: read-only

  ha.scripts.snapshot:
    plugin: ha
    script: ha-scripts-snapshot
    safety: read-only

  ha.hacs.snapshot:
    plugin: ha
    script: ha-hacs-snapshot
    safety: read-only

  ha.hacs.updates.check:
    plugin: ha
    script: ha-hacs-updates-check
    safety: read-only

  ha.entity.state.baseline:
    plugin: ha
    script: ha-entity-state-baseline
    safety: read-only

  ha.ssot.baseline.build:
    plugin: ha
    script: ha-ssot-baseline-build
    safety: read-only

  ha.service.call:
    plugin: ha
    script: ha-service-call
    safety: mutating

  ha.scene.activate:
    plugin: ha
    script: ha-scene-activate
    safety: mutating

  ha.light.toggle:
    plugin: ha
    script: ha-light-toggle
    safety: mutating

  ha.lock.control:
    plugin: ha
    script: ha-lock-control
    safety: mutating

  ha.device.rename:
    plugin: ha
    script: ha-device-rename
    safety: mutating

  ha.automation.create:
    plugin: ha
    script: ha-automation-create
    safety: mutating

  ha.automation.trigger:
    plugin: ha
    script: ha-automation-trigger
    safety: mutating

  ha.script.run:
    plugin: ha
    script: ha-script-run
    safety: mutating

  ha.backup.create:
    plugin: ha
    script: ha-backup-create
    safety: mutating

  ha.health.status:
    plugin: ha
    script: ha-health-status
    safety: read-only

  ha.entity.status:
    plugin: ha
    script: ha-entity-status
    safety: read-only

  ha.mcp.status:
    plugin: ha
    script: ha-mcp-status
    safety: read-only

  ha.sync.start:
    plugin: ha
    script: ha-sync-start
    safety: mutating

  ha.sync.stop:
    plugin: ha
    script: ha-sync-stop
    safety: mutating

  ha.sync.status:
    plugin: ha
    script: ha-sync-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # HOME (proxmox-home infrastructure)
  # ═══════════════════════════════════════════════════════════════════════════

  home.backup.status:
    plugin: home
    script: home-backup-status
    safety: read-only

  home.vm.status:
    plugin: home
    script: home-vm-status
    safety: read-only

  home.health.check:
    plugin: home
    script: home-health-check
    safety: read-only

  home.health.alert:
    plugin: home
    script: home-health-alert
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # MEDIA
  # ═══════════════════════════════════════════════════════════════════════════

  recyclarr.sync:
    plugin: ~
    script: ~
    safety: mutating
    note: "bare SSH + docker exec command (no plugin script)"

  media.metrics.today:
    plugin: media
    script: media-metrics-today
    safety: read-only

  media.health.check:
    plugin: media
    script: media-health-check
    safety: read-only

  media.stack.restart:
    plugin: media
    script: media-stack-restart
    safety: mutating

  media.backup.create:
    plugin: media
    script: media-backup-create
    safety: mutating

  media.service.status:
    plugin: media
    script: media-service-status
    safety: read-only

  media.nfs.verify:
    plugin: media
    script: media-nfs-verify
    safety: read-only

  media.status:
    plugin: media
    script: media-status
    safety: read-only
    note: "Unified media stack status dashboard — VM status, service counts, NFS health, storage"

  # ═══════════════════════════════════════════════════════════════════════════
  # CLOUDFLARE
  # ═══════════════════════════════════════════════════════════════════════════

  cloudflare.status:
    plugin: cloudflare
    script: cloudflare-status
    safety: read-only

  cloudflare.dns.status:
    plugin: cloudflare
    script: cloudflare-dns-status
    safety: read-only

  cloudflare.tunnel.status:
    plugin: cloudflare
    script: cloudflare-tunnel-status
    safety: read-only

  cloudflare.inventory.sync:
    plugin: cloudflare
    script: cloudflare-inventory-sync
    safety: read-only

  cloudflare.tunnel.ingress.status:
    plugin: cloudflare
    script: cloudflare-tunnel-ingress-status
    safety: read-only

  cloudflare.domain_routing.diff:
    plugin: cloudflare
    script: cloudflare-domain-routing-diff
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # GITHUB
  # ═══════════════════════════════════════════════════════════════════════════

  github.status:
    plugin: github
    script: github-status
    safety: read-only

  github.queue.status:
    plugin: github
    script: github-queue-status
    safety: read-only

  github.actions.status:
    plugin: github
    script: github-actions-status
    safety: read-only

  github.labels.status:
    plugin: github
    script: github-labels-status
    safety: read-only

  infra.gh_issue:
    plugin: ~
    script: ~
    safety: read-only
    note: "bare 'gh issue view' command (no plugin script)"

  # ═══════════════════════════════════════════════════════════════════════════
  # SSH
  # ═══════════════════════════════════════════════════════════════════════════

  ssh.target.status:
    plugin: ssh
    script: ssh-target-status
    safety: read-only

  nodes.status:
    plugin: ssh
    script: ssh-target-status
    safety: read-only
    note: "alias for ssh.target.status"

  # ═══════════════════════════════════════════════════════════════════════════
  # NETWORK
  # ═══════════════════════════════════════════════════════════════════════════

  network.lan.device.status:
    plugin: network
    script: network-lan-device-status
    safety: read-only

  network.lan.host.identify:
    plugin: network
    script: network-lan-host-identify
    safety: read-only

  network.shop.audit.status:
    plugin: network
    script: network-shop-audit-status
    safety: read-only

  network.ap.facts.capture:
    plugin: network
    script: network-ap-facts-capture
    safety: read-only

  network.oob.guard.status:
    plugin: network
    script: network-oob-guard-status
    safety: read-only

  network.shop.audit.canonical:
    plugin: network
    script: network-shop-audit-canonical
    safety: read-only

  network.unifi.clients.snapshot:
    plugin: network
    script: network-unifi-clients-snapshot
    safety: read-only

  network.home.unifi.clients.snapshot:
    plugin: network
    script: network-home-unifi-clients-snapshot
    safety: read-only

  network.home.dhcp.audit:
    plugin: network
    script: network-home-dhcp-audit
    safety: read-only

  network.home.wifi.create:
    plugin: network
    script: network-home-wifi-create
    safety: mutating

  network.home.dhcp.reservation.create:
    plugin: network
    script: network-home-dhcp-reservation-create
    safety: mutating

  network.home.dhcp.dns.set:
    plugin: network
    script: network-home-dhcp-dns-set
    safety: mutating

  network.shop.pihole.normalize:
    plugin: network
    script: network-shop-pihole-normalize
    safety: mutating

  network.nvr.reip.canonical:
    plugin: network
    script: network-nvr-reip-canonical
    safety: mutating

  network.cutover.preflight:
    plugin: network
    script: network-cutover-preflight
    safety: read-only

  network.pve.post_cutover.harden:
    plugin: network
    script: network-pve-post-cutover-harden
    safety: mutating

  network.md1400.pm8072.stage:
    plugin: network
    script: network-md1400-pm8072-stage
    safety: mutating

  network.md1400.bind_test:
    plugin: network
    script: network-md1400-bind-test
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # PROXMOX MAINTENANCE
  # ═══════════════════════════════════════════════════════════════════════════

  infra.proxmox.maintenance.precheck:
    plugin: infra
    script: infra-proxmox-maintenance
    safety: read-only

  infra.proxmox.maintenance.shutdown:
    plugin: infra
    script: infra-proxmox-maintenance
    safety: mutating

  infra.proxmox.maintenance.startup:
    plugin: infra
    script: infra-proxmox-maintenance
    safety: mutating

  infra.post_power.recovery.status:
    plugin: infra
    script: infra-post-power-recovery
    safety: read-only
    note: "invoked with --mode status"

  infra.post_power.recovery:
    plugin: infra
    script: infra-post-power-recovery
    safety: mutating
    note: "invoked with --mode recover"

  infra.maintenance.window:
    plugin: infra
    script: infra-maintenance-window
    safety: mutating
    note: "composite orchestrator — requires --site (shop|home|both) and --mode (precheck|shutdown|startup|verify|full)"

  # ═══════════════════════════════════════════════════════════════════════════
  # DOCKER
  # ═══════════════════════════════════════════════════════════════════════════

  docker.compose.status:
    plugin: docker
    script: docker-compose-status
    safety: read-only

  docker.compose.logs:
    plugin: docker
    script: docker-compose-logs
    safety: read-only

  docker.compose.up:
    plugin: docker
    script: docker-compose-up
    safety: mutating

  docker.compose.down:
    plugin: docker
    script: docker-compose-down
    safety: mutating

  docker.compose.pull:
    plugin: docker
    script: docker-compose-pull
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # SERVICES
  # ═══════════════════════════════════════════════════════════════════════════

  services.health.status:
    plugin: services
    script: services-health-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # BACKUP
  # ═══════════════════════════════════════════════════════════════════════════

  backup.status:
    plugin: backup
    script: backup-status
    safety: read-only

  backup.vzdump.status:
    plugin: backup
    script: backup-vzdump-status
    safety: read-only

  backup.vzdump.vmid.set:
    plugin: backup
    script: backup-vzdump-vmid-set
    safety: mutating

  backup.vzdump.run:
    plugin: backup
    script: backup-vzdump-run
    safety: mutating

  backup.vzdump.prune:
    plugin: backup
    script: backup-vzdump-prune
    safety: mutating

  backup.calendar.generate:
    plugin: backup
    script: backup-calendar-generate
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # HOST
  # ═══════════════════════════════════════════════════════════════════════════

  host.drift.audit:
    plugin: host
    script: host-drift-audit
    safety: read-only

  host.claude.entrypoint.status:
    plugin: host
    script: host-claude-entrypoint-lock
    safety: read-only

  host.claude.entrypoint.canonicalize:
    plugin: host
    script: host-claude-entrypoint-lock
    safety: mutating
    note: "invoked with --execute"

  host.hidden.inventory.status:
    plugin: host
    script: host-hidden-root-inventory
    safety: read-only

  host.macbook.drift.check:
    plugin: host
    script: host-macbook-drift-check
    safety: read-only

  host.macbook.managed_configs.apply:
    plugin: host
    script: host-macbook-managed-configs-apply
    safety: mutating

  host.macbook.bootstrap:
    plugin: host
    script: host-macbook-bootstrap
    safety: mutating

  host.launchagents.sync:
    plugin: host
    script: host-launchagents-sync
    safety: mutating

  host.streamdeck.status:
    plugin: host
    script: host-streamdeck-status
    safety: read-only

  host.streamdeck.reload:
    plugin: host
    script: host-streamdeck-reload
    safety: mutating

  host.streamdeck.snapshot:
    plugin: host
    script: host-streamdeck-snapshot
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # DOCS
  # ═══════════════════════════════════════════════════════════════════════════

  docs.status:
    plugin: docs
    script: docs-status
    safety: read-only

  docs.impact.status:
    plugin: docs
    script: docs-impact-status
    safety: read-only

  docs.impact.note:
    plugin: docs
    script: docs-impact-note
    safety: mutating

  infra.extraction.status:
    plugin: docs
    script: infra-extraction-status
    safety: read-only

  docs.lint:
    plugin: docs
    script: docs-lint
    safety: read-only

  docs.index.verify:
    plugin: docs
    script: docs-index-verify
    safety: read-only

  docs.freshness.audit:
    plugin: docs
    script: docs-freshness-audit
    safety: read-only

  docs.legacy.audit:
    plugin: docs
    script: docs-legacy-audit
    safety: read-only

  docs.brain.freshness:
    plugin: docs
    script: docs-brain-freshness
    safety: read-only

  docs.orphan.detect:
    plugin: docs
    script: docs-orphan-detect
    safety: read-only

  docs.frontmatter.lint:
    plugin: docs
    script: docs-frontmatter-lint
    safety: read-only

  docs.sprawl.detect:
    plugin: docs
    script: docs-sprawl-detect
    safety: read-only

  docs.jd.status:
    plugin: docs
    script: docs-jd-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # OBSERVABILITY
  # ═══════════════════════════════════════════════════════════════════════════

  observability.stack.status:
    plugin: observability
    script: observability-stack-status
    safety: read-only

  prometheus.targets.status:
    plugin: observability
    script: prometheus-targets-status
    safety: read-only

  uptime.kuma.monitors.sync:
    plugin: observability
    script: uptime-kuma-monitors-sync
    safety: mutating

  nas.health.status:
    plugin: observability
    script: nas-health-status
    safety: read-only

  gitea.status:
    plugin: observability
    script: gitea-status
    safety: read-only

  immich.status:
    plugin: observability
    script: immich-status
    safety: read-only

  finance.stack.status:
    plugin: observability
    script: finance-stack-status
    safety: read-only

  finance.ronny.action.queue:
    plugin: observability
    script: finance-ronny-action-queue
    safety: read-only
    note: "deterministic operator queue for monthly/quarterly/annual finance handoff cadence"

  idrac.health.status:
    plugin: observability
    script: idrac-health-status
    safety: read-only

  switch.health.status:
    plugin: observability
    script: switch-health-status
    safety: read-only

  stability.control.snapshot:
    plugin: observability
    script: stability-control-snapshot
    safety: read-only

  automation.stack.latency.status:
    plugin: observability
    script: automation-stack-latency-status
    safety: read-only
    note: "Repeated-sample latency budget report for automation-stack services + n8n quick probe timing"

  infra.core.slo.status:
    plugin: observability
    script: infra-core-slo-status
    safety: read-only

  stability.control.reconcile:
    plugin: observability
    script: stability-control-reconcile
    safety: read-only

  alerting.probe:
    plugin: alerting
    script: alerting-probe
    safety: read-only

  alerting.dispatch:
    plugin: alerting
    script: alerting-dispatch
    safety: mutating

  alerting.status:
    plugin: alerting
    script: alerting-status
    safety: read-only

  immich.ingest.watch:
    plugin: observability
    script: immich-ingest-watch
    safety: read-only
    note: "wrapper resolves remote ingest runtime via contract and calls workbench watchdog implementation"

  immich.reconcile.scan:
    plugin: immich
    script: immich-reconcile-scan
    safety: read-only

  immich.reconcile.plan:
    plugin: immich
    script: immich-reconcile-plan
    safety: read-only

  immich.reconcile.review:
    plugin: immich
    script: immich-reconcile-review
    safety: read-only

  immich.reconcile.apply:
    plugin: immich
    script: immich-reconcile-apply
    safety: mutating

  immich.reconcile.rollback:
    plugin: immich
    script: immich-reconcile-rollback
    safety: mutating

  mcp.inventory.status:
    plugin: mcp
    script: mcp-inventory-status
    safety: read-only

  mcp.runtime.status:
    plugin: mcp
    script: mcp-runtime-status
    safety: read-only

  spine.mcp.serve:
    plugin: mcp-gateway
    script: spine-mcp-serve
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # INFRA RELOCATION
  # ═══════════════════════════════════════════════════════════════════════════

  infra.placement.policy:
    plugin: infra
    script: infra-placement-policy-check
    safety: read-only

  infra.docker_host.status:
    plugin: infra
    script: infra-docker-host-status
    safety: read-only

  infra.hypervisor.identity:
    plugin: infra
    script: infra-hypervisor-identity-status
    safety: read-only

  infra.hypervisor.hostname.set:
    plugin: infra
    script: infra-hypervisor-hostname-set
    safety: mutating

  infra.timezone.set:
    plugin: infra
    script: infra-timezone-set
    safety: mutating

  infra.relocation.preflight:
    plugin: infra
    script: infra-relocation-preflight
    safety: read-only

  infra.relocation.parity:
    plugin: infra
    script: infra-relocation-parity
    safety: read-only

  infra.relocation.impact:
    plugin: infra
    script: infra-relocation-impact
    safety: read-only

  infra.relocation.rollback.plan:
    plugin: infra
    script: infra-relocation-rollback
    safety: read-only

  infra.vm.provision:
    plugin: infra
    script: infra-vm-provision
    safety: mutating

  infra.vm.bootstrap:
    plugin: infra
    script: infra-vm-bootstrap
    safety: mutating

  infra.relocation.state.transition:
    plugin: infra
    script: infra-relocation-state-transition
    safety: mutating

  infra.relocation.service.transition:
    plugin: infra
    script: infra-relocation-service-transition
    safety: mutating

  infra.relocation.promote:
    plugin: infra
    script: infra-relocation-promote
    safety: mutating

  infra.proxmox.node_path.migrate:
    plugin: infra
    script: infra-proxmox-node-path-migrate
    safety: mutating

  infra.vm.ready.status:
    plugin: infra
    script: infra-vm-ready-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # BUDGET
  # ═══════════════════════════════════════════════════════════════════════════

  budget.check:
    plugin: budget
    script: budget
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # MAKER
  # ═══════════════════════════════════════════════════════════════════════════

  maker.tools.status:
    plugin: maker
    script: maker-tools-status
    safety: read-only

  maker.qr.generate:
    plugin: maker
    script: maker-qr-generate
    safety: mutating

  maker.label.print:
    plugin: maker
    script: maker-label-print
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # AUDIT
  # ═══════════════════════════════════════════════════════════════════════════

  audit.export.governance_iac:
    plugin: audit
    script: audit-export
    safety: read-only

  spine.audit.triage:
    plugin: audit
    script: audit-triage
    safety: read-only

  agent.session.closeout:
    plugin: audit
    script: agent-session-closeout
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # SESSION
  # ═══════════════════════════════════════════════════════════════════════════

  session.start:
    plugin: session
    script: session-start
    safety: mutating

  terminal.heartbeat.post:
    plugin: session
    script: terminal-heartbeat-post
    safety: read-only
    note: "writes heartbeat evidence under mailroom/state/terminal-heartbeats"

  terminal.scope.status:
    plugin: session
    script: terminal-scope-status
    safety: read-only
    note: "detects active terminal scope collisions from heartbeat evidence"

  terminal.contract.status:
    plugin: session
    script: terminal-contract-status
    safety: read-only
    note: "validates terminal role contract completeness and cross-reference parity"

  # ═══════════════════════════════════════════════════════════════════════════
  # RELEASE
  # ═══════════════════════════════════════════════════════════════════════════

  spine.release.zip:
    plugin: release
    script: spine-release-zip
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # PROPOSALS
  # ═══════════════════════════════════════════════════════════════════════════

  proposals.submit:
    plugin: proposals
    script: proposals-submit
    safety: mutating

  proposals.list:
    plugin: proposals
    script: proposals-list
    safety: read-only

  proposals.apply:
    plugin: proposals
    script: proposals-apply
    safety: destructive

  proposals.status:
    plugin: proposals
    script: proposals-status
    safety: read-only

  proposals.supersede:
    plugin: proposals
    script: proposals-supersede
    safety: mutating

  proposals.archive:
    plugin: proposals
    script: proposals-archive
    safety: mutating

  proposals.reconcile:
    plugin: proposals
    script: proposals-reconcile
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # SHARE PUBLISH
  # ═══════════════════════════════════════════════════════════════════════════

  share.publish.preflight:
    plugin: share
    script: share-publish-preflight
    safety: read-only

  share.publish.preview:
    plugin: share
    script: share-publish-preview
    safety: read-only

  share.publish.apply:
    plugin: share
    script: share-publish-apply
    safety: destructive

  share.publish.status:
    plugin: share
    script: share-publish-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # MINT MODULES
  # ═══════════════════════════════════════════════════════════════════════════

  mint.modules.health:
    plugin: mint
    script: modules-health
    safety: read-only

  mint.seeds.query:
    plugin: mint
    script: seeds-query
    safety: read-only

  mint.intake.validate:
    plugin: mint
    script: intake-validate
    safety: read-only

  mint.deploy.status:
    plugin: mint
    script: deploy-status
    safety: read-only

  mint.deploy.sync:
    plugin: mint
    script: deploy-sync-from-main
    safety: mutating

  mint.runtime.proof:
    plugin: mint
    script: runtime-proof
    safety: read-only

  mint.migrate.dryrun:
    plugin: mint
    script: migrate-dryrun
    safety: read-only

  mint.loop.daily:
    plugin: mint
    script: loop-daily
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # COMMUNICATIONS STACK (WS1 PILOT SURFACES)
  # ═══════════════════════════════════════════════════════════════════════════

  communications.stack.status:
    plugin: communications
    script: communications-stack-status
    safety: read-only

  communications.mailboxes.list:
    plugin: communications
    script: communications-mailboxes-list
    safety: read-only

  communications.mail.search:
    plugin: communications
    script: communications-mail-search
    safety: read-only

  communications.mail.send.test:
    plugin: communications
    script: communications-mail-send-test
    safety: mutating

  communications.provider.status:
    plugin: communications
    script: communications-provider-status
    safety: read-only

  communications.policy.status:
    plugin: communications
    script: communications-policy-status
    safety: read-only

  communications.templates.list:
    plugin: communications
    script: communications-templates-list
    safety: read-only

  communications.send.preview:
    plugin: communications
    script: communications-send-preview
    safety: read-only

  communications.send.execute:
    plugin: communications
    script: communications-send-execute
    safety: mutating

  communications.delivery.log:
    plugin: communications
    script: communications-delivery-log
    safety: read-only

  communications.delivery.anomaly.status:
    plugin: communications
    script: communications-delivery-anomaly-status
    safety: read-only

  communications.delivery.anomaly.dispatch:
    plugin: communications
    script: communications-delivery-anomaly-dispatch
    safety: mutating

  communications.alerts.flush:
    plugin: communications
    script: communications-alerts-flush
    safety: mutating

  # ═══════════════════════════════════════════════════════════════════════════
  # MICROSOFT GRAPH
  # ═══════════════════════════════════════════════════════════════════════════

  graph.mail.search:
    plugin: ms-graph
    script: graph-cap-exec
    safety: read-only
    note: "graph-cap-exec mail_search (secrets-exec + token wrapper)"

  graph.mail.get:
    plugin: ms-graph
    script: graph-cap-exec
    safety: read-only
    note: "graph-cap-exec mail_get (secrets-exec + token wrapper)"

  graph.mail.send:
    plugin: ms-graph
    script: graph-cap-exec
    safety: mutating
    note: "graph-cap-exec mail_send (secrets-exec + token wrapper)"

  graph.mail.draft.create:
    plugin: ms-graph
    script: graph-cap-exec
    safety: mutating
    note: "graph-cap-exec draft_create (secrets-exec + token wrapper)"

  graph.mail.draft.update:
    plugin: ms-graph
    script: graph-cap-exec
    safety: mutating
    note: "graph-cap-exec draft_update (secrets-exec + token wrapper)"

  graph.calendar.list:
    plugin: ms-graph
    script: graph-cap-exec
    safety: read-only
    note: "graph-cap-exec calendar_list (secrets-exec + token wrapper)"

  graph.calendar.get:
    plugin: ms-graph
    script: graph-cap-exec
    safety: read-only
    note: "graph-cap-exec calendar_get (secrets-exec + token wrapper)"

  graph.calendar.create:
    plugin: ms-graph
    script: graph-cap-exec
    safety: mutating
    note: "graph-cap-exec calendar_create (secrets-exec + token wrapper)"

  graph.calendar.update:
    plugin: ms-graph
    script: graph-cap-exec
    safety: mutating
    note: "graph-cap-exec calendar_update (secrets-exec + token wrapper)"

  graph.calendar.rsvp:
    plugin: ms-graph
    script: graph-cap-exec
    safety: mutating
    note: "graph-cap-exec calendar_rsvp (secrets-exec + token wrapper)"

  # ═══════════════════════════════════════════════════════════════════════════
  # AGENT ROUTING
  # ═══════════════════════════════════════════════════════════════════════════

  agent.health.check-all:
    plugin: agent
    script: agent-health-check-all
    safety: read-only

  agent.info:
    plugin: agent
    script: agent-info
    safety: read-only

  agent.tools:
    plugin: agent
    script: agent-tools
    safety: read-only

  agent.route:
    plugin: agent
    script: agent-route
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # DYNAMIC CONTEXT DELIVERY
  # ═══════════════════════════════════════════════════════════════════════════

  spine.context:
    plugin: context
    script: spine-context
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # WORKTREE SESSION ISOLATION
  # ═══════════════════════════════════════════════════════════════════════════

  worktree.session.status:
    plugin: ops
    script: worktree-session-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # AOF KERNEL ABSTRACTION
  # ═══════════════════════════════════════════════════════════════════════════

  aof.bootstrap:
    plugin: aof
    script: bootstrap-spine.sh
    safety: mutating

  aof.validate:
    plugin: aof
    script: validate-environment.sh
    safety: read-only

  aof.contract.status:
    plugin: aof
    script: contract-read-check.sh --status
    safety: read-only

  aof.contract.acknowledge:
    plugin: aof
    script: contract-read-check.sh --ack
    safety: mutating
  aof.status:
    plugin: aof
    script: aof-status.sh
    safety: read-only
  aof.version:
    plugin: aof
    script: aof-version.sh
    safety: read-only
  aof.policy.show:
    plugin: aof
    script: aof-policy-show.sh
    safety: read-only
  aof.policy.autotune:
    plugin: aof
    script: aof-policy-autotune.sh
    safety: read-only
  aof.tenant.show:
    plugin: aof
    script: aof-tenant-show.sh
    safety: read-only
  aof.verify:
    plugin: aof
    script: aof-verify.sh
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # TENANT MANAGEMENT
  # ═══════════════════════════════════════════════════════════════════════════

  tenant.profile.validate:
    plugin: tenant
    script: tenant-profile-validate
    safety: read-only

  tenant.provision.dry-run:
    plugin: tenant
    script: tenant-provision-dry-run
    safety: read-only

  # AOF Runtime Enforcement Depth capabilities
  tenant.storage.audit:
    plugin: tenant
    script: tenant-storage-audit
    safety: read-only

  policy.runtime.audit:
    plugin: policy
    script: policy-runtime-audit
    safety: read-only

  version.compat.verify:
    plugin: version
    script: version-compat-verify
    safety: read-only

  evidence.export.plan:
    plugin: evidence
    script: evidence-export-plan
    safety: read-only

  receipts.index.build:
    plugin: evidence
    script: receipts-index-build
    safety: mutating

  receipts.summary:
    plugin: evidence
    script: receipts-summary
    safety: read-only

  receipts.trends:
    plugin: evidence
    script: receipts-trends
    safety: read-only

  receipts.search:
    plugin: evidence
    script: receipts-search
    safety: read-only

  receipts.rotate:
    plugin: evidence
    script: receipts-rotate
    safety: mutating

  spine.graph.show:
    plugin: evidence
    script: spine-graph-show
    safety: read-only

  spine.timeline.query:
    plugin: evidence
    script: spine-timeline-query
    safety: read-only

  spine.timeline.report:
    plugin: evidence
    script: spine-timeline-report
    safety: mutating
    note: "writer-lane only in multi-terminal mode via proposal/apply flow"

  surface.mobile.dashboard.status:
    plugin: evidence
    script: spine-control
    safety: read-only
    note: "invoked as: spine-control tick --json"

  surface.readonly.audit:
    plugin: surface
    script: surface-readonly-audit
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # HA IDENTITY + MUTATION CONTRACT
  # ═══════════════════════════════════════════════════════════════════════════

  ha.identity.mutation.contract.status:
    plugin: home
    script: ha-identity-mutation-contract-status
    safety: read-only

  # ═══════════════════════════════════════════════════════════════════════════
  # SLO MONITORING
  # ═══════════════════════════════════════════════════════════════════════════

  slo.evidence.daily:
    plugin: slo
    script: slo-evidence-daily
    safety: read-only
