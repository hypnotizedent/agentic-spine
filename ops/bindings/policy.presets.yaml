# Policy Presets
# Status: authoritative
# Last verified: 2026-02-15
# Scope: aof-policy-presets
#
# Named policy configurations for AOF deployments.
# Referenced by: tenant.profile.schema.yaml (policy.preset field)
# Referenced by: AOF_PRODUCT_CONTRACT.md

version: 1
updated_at: "2026-02-15"
owner: "@ronny"

presets:
  strict:
    description: "Maximum governance enforcement. All gates required, all approvals manual."
    knobs:
      drift_gate_mode: fail
      approval_default: manual
      session_closeout_sla_hours: 24
      stale_ssot_max_days: 7
      gap_auto_claim: false
      proposal_required: true
      receipt_retention_days: 90
      warn_policy: strict
      commit_sign_required: true
      multi_agent_writes: proposal-only

  balanced:
    description: "Standard governance. Gates enforced, auto-approval for safe operations."
    knobs:
      drift_gate_mode: fail
      approval_default: auto
      session_closeout_sla_hours: 48
      stale_ssot_max_days: 14
      gap_auto_claim: true
      proposal_required: false
      receipt_retention_days: 30
      warn_policy: advisory
      commit_sign_required: false
      multi_agent_writes: direct

  permissive:
    description: "Minimal governance. Gates warn-only, auto-approval everywhere."
    knobs:
      drift_gate_mode: warn
      approval_default: auto
      session_closeout_sla_hours: 168
      stale_ssot_max_days: 30
      gap_auto_claim: true
      proposal_required: false
      receipt_retention_days: 7
      warn_policy: advisory
      commit_sign_required: false
      multi_agent_writes: direct

# Knob definitions
knob_schema:
  drift_gate_mode:
    type: string
    enum: [fail, warn]
    description: "Whether drift gate failures block spine.verify"
  approval_default:
    type: string
    enum: [auto, manual]
    description: "Default approval mode for capabilities without explicit setting"
  session_closeout_sla_hours:
    type: integer
    description: "Maximum hours between session closeouts (D61 enforcement)"
  stale_ssot_max_days:
    type: integer
    description: "Maximum age in days before an SSOT is considered stale (D58)"
  gap_auto_claim:
    type: boolean
    description: "Whether gaps are auto-claimed on file"
  proposal_required:
    type: boolean
    description: "Whether changes require proposal flow (multi-agent write policy)"
  receipt_retention_days:
    type: integer
    description: "How long capability receipts are retained"
  warn_policy:
    type: string
    enum: [advisory, strict]
    description: "Whether warnings escalate to failures"
  commit_sign_required:
    type: boolean
    description: "Whether git commits require signing"
  multi_agent_writes:
    type: string
    enum: [proposal-only, direct]
    description: "Write policy when multiple agents may be active"
