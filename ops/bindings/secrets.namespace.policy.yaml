version: 1
updated: "2026-02-07T23:06:19Z"

infisical:
  project_id: "01ddd93a-e0f8-4c7c-ad9f-903d76ef94d9"
  environment: "prod"

namespace:
  canonical_base_path: "/spine"
  vm_infra_path: "/spine/vm-infra"

rules:
  # Required key placements for active VM-infra services.
  required_key_paths:
    AUTHENTIK_SECRET_KEY: "/spine/vm-infra/caddy-auth"
    AUTHENTIK_DB_PASSWORD: "/spine/vm-infra/caddy-auth"

  # Consumer path overrides used by spine tooling to resolve key reads/writes.
  key_path_overrides:
    AZURE_CLIENT_ID: "/spine/platform/security"
    AZURE_CLIENT_SECRET: "/spine/platform/security"
    AZURE_TENANT_ID: "/spine/platform/security"
    GITHUB_PERSONAL_ACCESS_TOKEN: "/spine/platform/security"
    INFISICAL_AUTH_SECRET: "/spine/platform/security"
    INFISICAL_ENCRYPTION_KEY: "/spine/platform/security"
    INFISICAL_MCP_CLIENT_ID: "/spine/platform/security"
    INFISICAL_MCP_CLIENT_SECRET: "/spine/platform/security"
    INFISICAL_POSTGRES_PASSWORD: "/spine/platform/security"
    CLOUDFLARE_ACCOUNT_ID: "/spine/network/edge"
    CLOUDFLARE_API_TOKEN: "/spine/network/edge"
    CLOUDFLARE_AUTH_EMAIL: "/spine/network/edge"
    CLOUDFLARE_GLOBAL_API_KEY: "/spine/network/edge"
    CLOUDFLARE_TUNNEL_ID: "/spine/network/edge"
    CLOUDFLARE_TUNNEL_TOKEN: "/spine/network/edge"
    PIHOLE_HOME_PASSWORD: "/spine/network/edge"
    XB8_GATEWAY_PASSWORD: "/spine/network/edge"
    XB8_GATEWAY_URL: "/spine/network/edge"
    XB8_GATEWAY_USER: "/spine/network/edge"
    DOCKER_HOST_SMB_PASS: "/spine/storage/nas"
    DOCKER_HOST_SMB_USER: "/spine/storage/nas"
    SMB_PASSWORD: "/spine/storage/nas"
    SYNOLOGY_HOST: "/spine/storage/nas"
    SYNOLOGY_SSH_PASSWORD: "/spine/storage/nas"
    SYNOLOGY_SSH_USER: "/spine/storage/nas"
    APPLE_APP_PASSWORD: "/spine/integrations/commerce-mail"
    APPLE_ID_EMAIL: "/spine/integrations/commerce-mail"
    FROM_EMAIL: "/spine/integrations/commerce-mail"
    SHOPIFY_CLIENT_ID: "/spine/integrations/commerce-mail"
    SHOPIFY_CLIENT_SECRET: "/spine/integrations/commerce-mail"
    SHOPIFY_CLI_TOKEN: "/spine/integrations/commerce-mail"
    SHOPIFY_PARTNER_API_KEY: "/spine/integrations/commerce-mail"
    SHOPIFY_PARTNER_ID: "/spine/integrations/commerce-mail"
    SHOPIFY_STORE_DOMAIN: "/spine/integrations/commerce-mail"
    IMMICH_API_KEY: "/spine/services/immich"
    IMMICH_HYPNO_API_KEY: "/spine/services/immich"
    IMMICH_HYPNO_PASSWORD: "/spine/services/immich"
    IMMICH_HYPNO_USER_ID: "/spine/services/immich"
    IMMICH_MINT_API_KEY: "/spine/services/immich"
    IMMICH_SUDO_PASSWORD: "/spine/services/immich"
    MAIL_ARCHIVER_ADMIN_PASS: "/spine/services/mail-archiver"
    MAIL_ARCHIVER_DB_PASS: "/spine/services/mail-archiver"
    FIREFLY_PAT: "/spine/services/finance"
    PAPERLESS_API_TOKEN: "/spine/services/paperless"
    MCPJUNGLE_ADMIN_TOKEN: "/spine/services/mcpjungle"
    ANTHROPIC_API_KEY: "/spine/ai/providers"
    OPENAI_API_KEY: "/spine/ai/providers"
    Z_AI_API_KEY: "/spine/ai/providers"
    ANYTHINGLLM_API_KEY: "/spine/ai/providers"

  # Prefixes that are never allowed at root path '/'.
  forbidden_root_prefixes:
    - "AUTHENTIK_"
    - "CADDY_"
    - "GRAFANA_"
    - "LOKI_"
    - "PROMETHEUS_"
    - "UPTIME_KUMA_"
    - "VM_INFRA_"

  # Exact root keys that must be absent after cutover cleanup.
  forbidden_root_keys:
    - "AZURE_CLIENT_ID"
    - "AZURE_CLIENT_SECRET"
    - "AZURE_TENANT_ID"
    - "CLOUDFLARE_ACCOUNT_ID"
    - "CLOUDFLARE_API_TOKEN"
    - "CLOUDFLARE_AUTH_EMAIL"
    - "CLOUDFLARE_GLOBAL_API_KEY"
    - "CLOUDFLARE_TUNNEL_ID"
    - "CLOUDFLARE_TUNNEL_TOKEN"
    - "GITHUB_PERSONAL_ACCESS_TOKEN"
    - "INFISICAL_AUTH_SECRET"
    - "INFISICAL_ENCRYPTION_KEY"
    - "INFISICAL_MCP_CLIENT_ID"
    - "INFISICAL_MCP_CLIENT_SECRET"
    - "INFISICAL_POSTGRES_PASSWORD"
    - "PIHOLE_HOME_PASSWORD"
    - "DOCKER_HOST_SMB_PASS"
    - "DOCKER_HOST_SMB_USER"
    - "XB8_GATEWAY_PASSWORD"
    - "XB8_GATEWAY_URL"
    - "XB8_GATEWAY_USER"
    - "SMB_PASSWORD"
    - "SYNOLOGY_HOST"
    - "SYNOLOGY_SSH_PASSWORD"
    - "SYNOLOGY_SSH_USER"
    - "APPLE_APP_PASSWORD"
    - "APPLE_ID_EMAIL"
    - "FROM_EMAIL"
    - "SHOPIFY_CLIENT_ID"
    - "SHOPIFY_CLIENT_SECRET"
    - "SHOPIFY_CLI_TOKEN"
    - "SHOPIFY_PARTNER_API_KEY"
    - "SHOPIFY_PARTNER_ID"
    - "SHOPIFY_STORE_DOMAIN"
    - "IMMICH_API_KEY"
    - "IMMICH_HYPNO_API_KEY"
    - "IMMICH_HYPNO_PASSWORD"
    - "IMMICH_HYPNO_USER_ID"
    - "IMMICH_MINT_API_KEY"
    - "IMMICH_SUDO_PASSWORD"
    - "MAIL_ARCHIVER_ADMIN_PASS"
    - "MAIL_ARCHIVER_DB_PASS"
    - "FIREFLY_PAT"
    - "PAPERLESS_API_TOKEN"
    - "MCPJUNGLE_ADMIN_TOKEN"
    - "ANTHROPIC_API_KEY"
    - "OPENAI_API_KEY"
    - "Z_AI_API_KEY"
    - "ANYTHINGLLM_API_KEY"

freeze:
  root_path: "/"
  captured_at: "2026-02-07T20:37:21Z"

  # Root-path debt snapshot. This list is intentionally frozen to prevent
  # silent regressions while migration proceeds.
  allowed_root_keys:
    - "ANTHROPIC_API_KEY"
    - "ANYTHINGLLM_API_KEY"
    - "APPLE_APP_PASSWORD"
    - "APPLE_ID_EMAIL"
    - "AZURE_CLIENT_ID"
    - "AZURE_CLIENT_SECRET"
    - "AZURE_TENANT_ID"
    - "CLOUDFLARE_ACCOUNT_ID"
    - "CLOUDFLARE_API_TOKEN"
    - "CLOUDFLARE_AUTH_EMAIL"
    - "CLOUDFLARE_GLOBAL_API_KEY"
    - "CLOUDFLARE_TUNNEL_ID"
    - "CLOUDFLARE_TUNNEL_TOKEN"
    - "DOCKER_HOST_SMB_PASS"
    - "DOCKER_HOST_SMB_USER"
    - "FIREFLY_PAT"
    - "FROM_EMAIL"
    - "GITHUB_PERSONAL_ACCESS_TOKEN"
    - "IMMICH_API_KEY"
    - "IMMICH_HYPNO_API_KEY"
    - "IMMICH_HYPNO_PASSWORD"
    - "IMMICH_HYPNO_USER_ID"
    - "IMMICH_MINT_API_KEY"
    - "IMMICH_SUDO_PASSWORD"
    - "INFISICAL_AUTH_SECRET"
    - "INFISICAL_ENCRYPTION_KEY"
    - "INFISICAL_MCP_CLIENT_ID"
    - "INFISICAL_MCP_CLIENT_SECRET"
    - "INFISICAL_POSTGRES_PASSWORD"
    - "MAIL_ARCHIVER_ADMIN_PASS"
    - "MAIL_ARCHIVER_DB_PASS"
    - "MCPJUNGLE_ADMIN_TOKEN"
    - "OPENAI_API_KEY"
    - "PAPERLESS_API_TOKEN"
    - "PIHOLE_HOME_PASSWORD"
    - "SHOPIFY_CLIENT_ID"
    - "SHOPIFY_CLIENT_SECRET"
    - "SHOPIFY_CLI_TOKEN"
    - "SHOPIFY_PARTNER_API_KEY"
    - "SHOPIFY_PARTNER_ID"
    - "SHOPIFY_STORE_DOMAIN"
    - "SMB_PASSWORD"
    - "SYNOLOGY_HOST"
    - "SYNOLOGY_SSH_PASSWORD"
    - "SYNOLOGY_SSH_USER"
    - "XB8_GATEWAY_PASSWORD"
    - "XB8_GATEWAY_URL"
    - "XB8_GATEWAY_USER"
    - "Z_AI_API_KEY"
