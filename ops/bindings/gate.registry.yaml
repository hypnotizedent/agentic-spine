schema_version: '1.0'
updated: '2026-03-01'
# gate_metadata_authority: authoritative
# authority_concern: entry_surface_gate_metadata
description: Canonical gate registry for D1-D298 drift surface including D131-D149 quality gates, D150 code-root hygiene, D151 communications boundary lock, D152 terminal role capability parity, D153 project attach parity, D154 gate ring contract parity, D155 audits migration dry-run plan parity, D156 governance freshness plus receipts archival policy parity, D157 proposals lifecycle linkage lock parity, D158 weekly hygiene calendar cadence lock parity, D159 weekly execution telemetry lock parity, D160 plugin pointer parity lock, D161 receipt memory domain-time lock, D162 operator smoothness lock, D163-D167 workbench operator smoothness enforcement locks, D169 workbench operator smoke lock enforcement, D170 workbench proposal preflight lock enforcement, D171 timezone SSOT lock, D173-D175 platform extension kit parity locks, D176 extension transaction lifecycle lock, D177 extension home binding parity lock, D178 extension lifecycle/index lock, D179 extension artifact completeness lock, D180 extension namespace collision lock, D181 multisite maintenance transaction lock, D182 maintenance verify resilience/strictness lock, D183-D187 inventory intake/stock ledger locks, D188-D194 observed-to-ledger and inventory snapshot parity/freshness locks, D195-D197 domain authority and provider boundary locks, D198-D199 local calendar home runtime/provider boundary locks, D200 domain canonical roots lock, D201 domain registrar parity lock, D202 domain transfer readiness lock, D203-D205 external provider readonly/secrets/union-ingest locks, D206-D208 HA calendar ingest boundary/materialization/freshness locks, D209 communications TLS health lock, D210 domain change request schema lock, D211 domain change plan completeness lock, D212 secrets runtime namespace lock, D213 secrets registered route lock, D214 deprecated secret alias lock, D215-D216 mintprints.com tunnel ingress and mail DNS parity locks, D217 mintprints.co tunnel ingress lock, D218 mintprints.co mail DNS parity lock, D219 hantash.com iCloud mail DNS parity lock, D220 media-recyclarr-language-enforcement-lock, D221 stalwart mail DNS parity lock, D222 quote alert provider boundary lock, D223 media VPN routing lock, D224 media secrets canonical lock, D225 mint live-before-auth lock, D226 mint live-claim stamp lock, D227 mint no-legacy-authority lock, D228 jellyfin IntroSkipper config lock, D229 media NFS I/O health lock, D230 lidarr root folder health lock, D231 media docker network parity lock, D232 media SQLite storage lock, D233 communications mail-archiver non-boot storage lock, D234 infra boot drive usage lock, D235 infra storage placement lock, D236 mint-data persistence lock, D237 docker-root budget lock, D238 mint-apps write-surface lock, D239 storage audit snapshot lock, D241-D244 legacy-data-ice authority/path/ingress/preservation locks, D245-D251 mint secrets/nightly-closeout lifecycle governance locks, D252-D256 foundational containment governance locks, D257 media capacity guard lock, D258-D262 tailscale+ssh lifecycle governance locks, D263 governance audits write-target lock, D264-D267 worktree lifecycle governance enforcement locks, D268-D273 Resend expansion governance locks, D274 receipt closeout completeness lock, D275-D288 W60 authority/fix-lock/freshness/subtraction regression locks, D289-D290 W63 outcome closure automation locks, D291 gate budget add-one-retire-one lock, D292 communications queue pipeline lock, D293 invariant HA precondition fail-open lock, D294 rogue Proxmox VM detection lock, D295 undeclared docker stack detection lock, D296 runtime job-wrapper enforcement lock, D297 runtime script scheduler parity lock, and D298 orphan runtime script detection lock. Source of truth for gate metadata.
gate_count:
  total: 296
  active: 295
  retired: 1
# check_script_reconciliation (2026-02-28):
#   - registry paths with check_script: 295
#   - missing check_script paths on disk: 0
#   - gate_count is not expected to equal raw `surfaces/verify/*.sh` count:
#     multiple gates share scripts, and some gates are inline/composite metadata entries.
# skipped_gate_ids:
#   - D168
#   - D172
# skip_rationale:
#   D168/D172 remain intentionally unassigned historical slots to preserve audit-stable gate lineage
#   between D167 and D169..D171 without re-numbering downstream verify receipts.
categories:
  - id: path-hygiene
    description: Path and filesystem constraints
  - id: git-hygiene
    description: Git worktree, branch, and remote constraints
  - id: ssot-hygiene
    description: SSOT and binding consistency
  - id: secrets-hygiene
    description: Secrets and API constraints
  - id: doc-hygiene
    description: Documentation and indexing constraints
  - id: loop-gap-hygiene
    description: Work registration and traceability
  - id: workbench-hygiene
    description: Workbench-specific constraints
  - id: infra-hygiene
    description: Infrastructure and service binding checks
  - id: agent-surface-hygiene
    description: Agent entry and discovery surfaces
  - id: process-hygiene
    description: Operational processes and metadata
  - id: media-hygiene
    description: Media stack service and infrastructure checks
  - id: retired
    description: Retired/reserved gate slots
gates:
  - id: D1
    name: top-level-dirs
    category: path-hygiene
    gate_class: invariant
    description: Top-level directory policy (7 allowed dirs)
    severity: high
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Only bin/ docs/ fixtures/ mailroom/ ops/ receipts/ surfaces/ allowed at top level. Remove or move extra directories.
    inline: true
  - id: D2
    name: no-runs-trace
    category: path-hygiene
    gate_class: invariant
    description: No runs/ directory (traces in receipts/sessions/)
    severity: medium
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Remove runs/ directory. Execution traces belong in receipts/sessions/.
    inline: true
  - id: D3
    name: entrypoint-smoke
    category: process-hygiene
    gate_class: invariant
    description: bin/ops preflight must succeed (dedicated script)
    severity: critical
    ring: instant
    check_script: surfaces/verify/d3-entrypoint-smoke.sh
    fix_hint: Ensure bin/ops is executable and preflight passes from spine root.
    inline: false
  - id: D4
    name: watcher
    category: process-hygiene
    gate_class: advisory
    description: LaunchAgent com.ronny.agent-inbox loaded and running
    severity: low
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    inline: true
    warn_only: true
  - id: D5
    name: no-legacy-coupling
    category: path-hygiene
    gate_class: freshness
    description: No ~/agent or $HOME/agent references in runtime scripts
    severity: high
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Replace ~/agent or $HOME/agent references with mailroom/ paths. Legacy coupling is forbidden.
    inline: true
  - id: D6
    name: receipts-exist
    category: process-hygiene
    gate_class: invariant
    description: Latest 5 receipt dirs have receipt.md
    severity: medium
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Ensure receipt.md exists in latest receipt dirs. Capabilities auto-generate receipts.
    inline: true
  - id: D7
    name: executables-bounded
    category: path-hygiene
    gate_class: invariant
    description: Shell scripts only in bin/, ops/, surfaces/verify/
    severity: high
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Shell scripts only allowed in bin/, ops/, surfaces/verify/. Move or remove out-of-bounds .sh files.
    inline: true
  - id: D8
    name: no-backup-clutter
    category: path-hygiene
    gate_class: advisory
    description: No .bak or fix_bak files in bin/ or ops/
    severity: low
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Remove .bak and fix_bak files from bin/ and ops/. These are accidental leftovers.
    inline: true
  - id: D9
    name: receipt-stamps
    category: process-hygiene
    gate_class: invariant
    description: Latest receipt has required fields (Run ID, Generated, Status, Model, Inputs, Outputs)
    severity: medium
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    inline: true
  - id: D10
    name: logs-under-mailroom
    category: path-hygiene
    gate_class: invariant
    description: No spurious $SPINE/logs directory (must be mailroom/logs)
    severity: medium
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Move or remove $SPINE/logs. Logs belong under mailroom/logs/.
    inline: true
  - id: D11
    name: home-surface
    category: path-hygiene
    gate_class: freshness
    description: ~/agent must be symlink to agentic-spine/mailroom (if exists)
    severity: medium
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: 'If ~/agent exists it must be a symlink to agentic-spine/mailroom. Fix: ln -sf ~/code/agentic-spine/mailroom ~/agent'
    inline: true
  - id: D12
    name: core-lock-exists
    category: doc-hygiene
    gate_class: invariant
    description: docs/core/CORE_LOCK.md repo validity marker exists
    severity: critical
    ring: deep
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: docs/core/CORE_LOCK.md is the repo validity marker. Restore it if deleted.
    inline: true
  - id: D13
    name: api-capability-preconditions
    category: secrets-hygiene
    gate_class: invariant
    description: API capability secrets preconditions enforced
    severity: high
    ring: standard
    check_script: surfaces/verify/api-preconditions.sh
    fix_hint: Run secrets.binding and secrets.auth.status before API-touching capabilities.
  - id: D14
    name: cloudflare-drift-gate
    category: infra-hygiene
    gate_class: invariant
    description: Cloudflare surface drift (no legacy smells)
    severity: medium
    ring: standard
    check_script: surfaces/verify/cloudflare-drift-gate.sh
    fix_hint: Check Cloudflare SSOT docs for legacy references. Update or remove stale entries.
  - id: D15
    name: github-actions-drift-gate
    category: infra-hygiene
    gate_class: invariant
    description: GitHub Actions surface drift (no legacy smells, no leaked secrets)
    severity: medium
    ring: standard
    check_script: surfaces/verify/github-actions-gate.sh
    fix_hint: Check .github/workflows/ for legacy patterns. No leaked secrets in workflow files.
  - id: D16
    name: docs-quarantine
    category: doc-hygiene
    gate_class: invariant
    description: No competing truth documents in docs/governance/
    severity: high
    ring: standard
    check_script: surfaces/verify/d16-docs-quarantine.sh
    fix_hint: Remove competing truth documents. Only one canonical doc per topic in docs/governance/.
  - id: D17
    name: root-allowlist
    category: path-hygiene
    gate_class: freshness
    description: No agents/, _imports/, or drift magnets at repo root
    severity: high
    ring: standard
    check_script: surfaces/verify/d17-root-allowlist.sh
    fix_hint: Remove unexpected files/dirs from repo root. Only allowlisted entries permitted.
  - id: D18
    name: docker-compose-drift
    category: infra-hygiene
    gate_class: invariant
    description: Docker compose references match SSOT
    severity: medium
    ring: standard
    check_script: surfaces/verify/d18-docker-compose-drift.sh
    fix_hint: Update docker compose references to match SSOT. Remove legacy service names.
  - id: D19
    name: backup-drift
    category: infra-hygiene
    gate_class: invariant
    description: Backup surface inventory, no legacy smells, no secret printing
    severity: medium
    ring: standard
    check_script: surfaces/verify/d19-backup-drift.sh
    fix_hint: Check backup SSOT for stale entries. No secret printing in backup scripts.
  - id: D20
    name: secrets-drift
    category: secrets-hygiene
    gate_class: invariant
    description: Secrets configuration drift (verbose subcheck)
    severity: high
    ring: standard
    check_script: surfaces/verify/d20-secrets-drift.sh
    fix_hint: Review secrets configuration. Ensure Infisical CLI is installed and configured.
    verbose_only: true
    composite_parent: D55
  - id: D21
    name: reserved
    category: retired
    gate_class: freshness
    description: Retired — was agent-entry-surface-lock, merged into D56
    severity: none
    ring: standard
    retired: true
  - id: D22
    name: nodes-drift
    category: infra-hygiene
    gate_class: invariant
    description: SSH node references match DEVICE_IDENTITY_SSOT
    severity: medium
    ring: standard
    check_script: surfaces/verify/d22-nodes-drift.sh
    fix_hint: Update SSH node references to match DEVICE_IDENTITY_SSOT.yaml current IPs.
  - id: D23
    name: health-drift
    category: infra-hygiene
    gate_class: invariant
    description: Service health endpoints match SERVICE_REGISTRY
    severity: medium
    ring: standard
    check_script: surfaces/verify/d23-health-drift.sh
    fix_hint: Check service health endpoints match SERVICE_REGISTRY.yaml. No auth credentials in health checks.
  - id: D24
    name: github-labels-drift
    category: infra-hygiene
    gate_class: advisory
    description: GitHub labels match governance
    severity: low
    ring: standard
    check_script: surfaces/verify/d24-github-labels-drift.sh
    fix_hint: Sync GitHub labels with label governance. Run via gh CLI.
  - id: D25
    name: secrets-cli-canonical-lock
    category: secrets-hygiene
    gate_class: invariant
    description: Infisical CLI only, no legacy vault patterns (verbose subcheck)
    severity: high
    ring: standard
    check_script: surfaces/verify/d25-secrets-cli-canonical-lock.sh
    fix_hint: Use infisical CLI only (no legacy vault patterns). Check capabilities.yaml for correct paths.
    verbose_only: true
    composite_parent: D55
  - id: D26
    name: agent-read-surface
    category: agent-surface-hygiene
    gate_class: freshness
    description: Agent read surfaces (AGENTS.md, CLAUDE.md) not stale (verbose subcheck)
    severity: medium
    ring: deep
    check_script: surfaces/verify/d26-agent-read-surface.sh
    fix_hint: Check agent read surfaces (AGENTS.md, CLAUDE.md) for stale references.
    verbose_only: true
    composite_parent: D56
  - id: D27
    name: fact-duplication-lock
    category: doc-hygiene
    gate_class: invariant
    description: No raw IPs/ports in no-fact docs
    severity: high
    ring: deep
    check_script: surfaces/verify/d27-fact-duplication-lock.sh
    fix_hint: Remove raw IPs/ports from no-fact docs. Reference SSOT docs instead of duplicating facts.
  - id: D28
    name: legacy-path-lock
    category: path-hygiene
    gate_class: invariant
    description: Active legacy absolute paths + extraction queue contract
    severity: medium
    ring: deep
    check_script: surfaces/verify/d28-legacy-path-lock.sh
    fix_hint: Replace legacy absolute paths with ~/code/ relative paths. Check archive queue.
  - id: D29
    name: active-entrypoint-lock
    category: process-hygiene
    gate_class: invariant
    description: LaunchD/cron entries use ~/code/ paths, not legacy locations
    severity: high
    ring: deep
    check_script: surfaces/verify/d29-active-entrypoint-lock.sh
    fix_hint: Ensure launchd/cron entries use ~/code/agentic-spine paths, not legacy locations.
  - id: D30
    name: active-config-lock
    category: path-hygiene
    gate_class: invariant
    description: No legacy config references or plaintext tokens in active configs
    severity: high
    ring: deep
    check_script: surfaces/verify/d30-active-config-lock.sh
    fix_hint: Remove legacy config references and plaintext tokens from active configs.
  - id: D31
    name: home-output-sink-lock
    category: path-hygiene
    gate_class: invariant
    description: No log/out/err files at home root
    severity: medium
    ring: standard
    check_script: surfaces/verify/d31-home-output-sink-lock.sh
    fix_hint: Move log/out/err files from ~/ to project paths. No home-root output sinks.
  - id: D32
    name: codex-instruction-source-lock
    category: agent-surface-hygiene
    gate_class: freshness
    description: AGENTS.md points to spine governance (verbose subcheck)
    severity: medium
    ring: deep
    check_script: surfaces/verify/d32-codex-instruction-source-lock.sh
    fix_hint: Ensure AGENTS.md points to spine governance, not external sources.
    verbose_only: true
    composite_parent: D56
  - id: D33
    name: extraction-pause-lock
    category: process-hygiene
    gate_class: invariant
    description: Extraction must stay paused during stabilization
    severity: medium
    ring: deep
    check_script: surfaces/verify/d33-extraction-pause-lock.sh
    fix_hint: Extraction must stay paused during stabilization. Do not resume without operator approval.
  - id: D34
    name: loop-ledger-integrity-lock
    category: loop-gap-hygiene
    gate_class: invariant
    description: Loop summary matches deduped counts
    severity: high
    ring: standard
    check_script: surfaces/verify/d34-loop-ledger-integrity-lock.sh
    fix_hint: Check loop scope files match deduped counts. Run loops.reconcile if stale.
  - id: D35
    name: infra-relocation-parity-lock
    category: infra-hygiene
    gate_class: invariant
    description: Cross-SSOT consistency for service relocations
    severity: high
    ring: standard
    check_script: surfaces/verify/d35-infra-relocation-parity-lock.sh
    fix_hint: 'Update all SSOTs when relocating services: DEVICE_IDENTITY, SERVICE_REGISTRY, SSH config.'
  - id: D36
    name: legacy-exception-hygiene-lock
    category: process-hygiene
    gate_class: advisory
    description: Stale/near-expiry legacy exceptions flagged
    severity: low
    ring: deep
    check_script: surfaces/verify/d36-legacy-exception-hygiene-lock.sh
    fix_hint: Review stale or near-expiry legacy exceptions. Remove expired ones.
  - id: D37
    name: infra-placement-policy-lock
    category: infra-hygiene
    gate_class: invariant
    description: Infra placement matches governance policy (verbose subcheck)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d37-infra-placement-policy-lock.sh
    fix_hint: Check infra placement against governance policy. Verify VM/host assignments.
    composite_parent: D57
  - id: D38
    name: extraction-hygiene-lock
    category: process-hygiene
    gate_class: invariant
    description: EXTRACTION_PROTOCOL.md compliance
    severity: medium
    ring: deep
    check_script: surfaces/verify/d38-extraction-hygiene-lock.sh
    fix_hint: Check EXTRACTION_PROTOCOL.md compliance. Extraction queue must be clean.
  - id: D39
    name: infra-hypervisor-identity-lock
    category: infra-hygiene
    gate_class: invariant
    description: Hypervisor identity entries match live infrastructure (verbose subcheck)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d39-infra-hypervisor-identity-lock.sh
    fix_hint: Verify hypervisor identity entries match live infrastructure.
    composite_parent: D57
  - id: D40
    name: maker-tools-drift
    category: process-hygiene
    gate_class: advisory
    description: Maker tools binding validity and script hygiene
    severity: low
    ring: deep
    check_script: surfaces/verify/d40-maker-tools-drift.sh
    fix_hint: Check maker tools binding validity. Ensure scripts match inventory.
  - id: D41
    name: hidden-root-governance-lock
    category: path-hygiene
    gate_class: invariant
    description: Home-root hidden dir inventory + forbidden pattern enforcement
    severity: medium
    ring: deep
    check_script: surfaces/verify/d41-hidden-root-governance-lock.sh
    fix_hint: Review ~/. entries against home-root inventory. Remove ungoverned hidden dirs.
  - id: D42
    name: code-path-case-lock
    category: path-hygiene
    gate_class: invariant
    description: Runtime scripts use lowercase ~/code/ (no ~/Code/)
    severity: high
    ring: standard
    check_script: surfaces/verify/d42-code-path-case-lock.sh
    fix_hint: Use lowercase ~/code/ in all paths. Check bin/, ops/, surfaces/verify/*.sh and capabilities.yaml.
  - id: D43
    name: secrets-namespace-lock
    category: secrets-hygiene
    gate_class: invariant
    description: Secrets namespace policy + capability wiring
    severity: high
    ring: standard
    check_script: surfaces/verify/d43-secrets-namespace-lock.sh
    fix_hint: Use governed namespace for secrets. Check ops/bindings/secrets.namespace.yaml.
  - id: D44
    name: cli-tools-discovery-lock
    category: process-hygiene
    gate_class: advisory
    description: CLI tools inventory + cross-refs + probes
    severity: low
    ring: standard
    check_script: surfaces/verify/d44-cli-tools-discovery-lock.sh
    fix_hint: Update cli.tools.inventory.yaml to match installed tools. Run tool probes.
  - id: D45
    name: naming-consistency-lock
    category: process-hygiene
    gate_class: invariant
    description: Cross-file identity surface verification
    severity: medium
    ring: deep
    check_script: surfaces/verify/d45-naming-consistency-lock.sh
    fix_hint: Fix cross-file naming inconsistencies. Check identity surfaces for drift.
  - id: D46
    name: claude-instruction-source-lock
    category: agent-surface-hygiene
    gate_class: invariant
    description: ~/.claude/CLAUDE.md is redirect shim only (verbose subcheck)
    severity: high
    ring: deep
    check_script: surfaces/verify/d46-claude-instruction-source-lock.sh
    fix_hint: Ensure ~/.claude/CLAUDE.md is a redirect shim only. Governance lives in spine.
    verbose_only: true
    composite_parent: D56
  - id: D47
    name: brain-surface-path-lock
    category: path-hygiene
    gate_class: invariant
    description: No legacy brain surface path in runtime scripts (must be docs/brain/)
    severity: medium
    ring: deep
    check_script: surfaces/verify/d47-brain-surface-path-lock.sh
    fix_hint: Use docs/brain/ path in runtime scripts. D47 enforces path governance.
  - id: D48
    name: codex-worktree-hygiene
    category: git-hygiene
    gate_class: freshness
    description: Enforce lifecycle-aware worktree hygiene (closed-owner zombies, detached heads, stale merged branches, non-local orphan branches, orphaned stashes)
    severity: high
    ring: standard
    check_script: surfaces/verify/d48-codex-worktree-hygiene.sh
    fix_hint: 'Classify via worktree.lifecycle.reconcile, then close lifecycle owners explicitly. D48 is non-destructive by default.'
  - id: D49
    name: agent-discovery-lock
    category: agent-surface-hygiene
    gate_class: freshness
    description: agents.registry.yaml + agent contracts valid
    severity: medium
    ring: deep
    check_script: surfaces/verify/d49-agent-discovery-lock.sh
    fix_hint: Update ops/bindings/agents.registry.yaml. All domain agents must be registered.
  - id: D50
    name: gitea-ci-workflow-lock
    category: infra-hygiene
    gate_class: invariant
    description: CI workflow file references drift-gate.sh correctly
    severity: medium
    ring: standard
    check_script: surfaces/verify/d50-gitea-ci-workflow-lock.sh
    fix_hint: Ensure .gitea/workflows/ CI config references drift-gate.sh correctly.
  - id: D51
    name: caddy-proto-lock
    category: infra-hygiene
    gate_class: invariant
    description: X-Forwarded-Proto on all Authentik upstreams in Caddy
    severity: medium
    ring: standard
    check_script: surfaces/verify/d51-caddy-proto-lock.sh
    fix_hint: Add X-Forwarded-Proto header to all Authentik upstreams in Caddy config.
  - id: D52
    name: udr6-gateway-assertion
    category: infra-hygiene
    gate_class: advisory
    description: Shop SSOT docs reference correct gateway network
    severity: low
    ring: standard
    check_script: surfaces/verify/d52-udr6-gateway-assertion.sh
    fix_hint: Ensure shop SSOT docs reference correct gateway for UDR6 network.
  - id: D53
    name: change-pack-integrity-lock
    category: process-hygiene
    gate_class: invariant
    description: Change pack template + sequencing + companion files
    severity: medium
    ring: deep
    check_script: surfaces/verify/d53-change-pack-integrity-lock.sh
    fix_hint: Check change pack template, sequencing, and companion files. Fix missing items.
  - id: D54
    name: ssot-ip-parity-lock
    category: ssot-hygiene
    gate_class: invariant
    description: Device identity ↔ shop server ↔ bindings IP consistency
    severity: high
    ring: standard
    check_script: surfaces/verify/d54-ssot-ip-parity-lock.sh
    fix_hint: Ensure IPs match across DEVICE_IDENTITY, shop server SSOT, and bindings.
  - id: D55
    name: secrets-runtime-readiness-lock
    category: secrets-hygiene
    gate_class: invariant
    description: 'Composite: secrets binding + CLI + auth readiness'
    severity: high
    ring: standard
    check_script: surfaces/verify/d55-secrets-runtime-readiness-lock.sh
    fix_hint: Run secrets.binding then secrets.auth.status before API work.
    composite_of:
      - D20
      - D25
  - id: D56
    name: agent-entry-surface-lock
    category: agent-surface-hygiene
    gate_class: freshness
    description: 'Composite: agent read surface + codex/claude instruction source'
    severity: high
    ring: deep
    check_script: surfaces/verify/d56-agent-entry-surface-lock.sh
    fix_hint: Check D26/D32/D46 subchecks. Legacy sync hooks must be absent (retired).
    composite_of:
      - D26
      - D32
      - D46
  - id: D57
    name: infra-identity-cohesion-lock
    category: infra-hygiene
    gate_class: invariant
    description: 'Composite: infra placement + hypervisor identity'
    severity: medium
    ring: standard
    check_script: surfaces/verify/d57-infra-identity-cohesion-lock.sh
    fix_hint: Ensure infra identity is consistent across all SSOTs and bindings.
    composite_of:
      - D37
      - D39
  - id: D58
    name: ssot-freshness-lock
    category: ssot-hygiene
    gate_class: freshness
    description: last_reviewed/last_verified dates enforced (max 21 days)
    severity: high
    ring: standard
    check_script: surfaces/verify/d58-ssot-freshness-lock.sh
    fix_hint: Update last_reviewed/last_verified dates on stale SSOTs (max 21 days).
  - id: D59
    name: cross-registry-completeness-lock
    category: ssot-hygiene
    gate_class: freshness
    description: Bidirectional host coverage between registries
    severity: medium
    ring: standard
    check_script: surfaces/verify/d59-cross-registry-completeness-lock.sh
    fix_hint: Ensure bidirectional host coverage between registries.
  - id: D60
    name: deprecation-sweeper
    category: process-hygiene
    gate_class: invariant
    description: Known deprecated terms in governance docs
    severity: medium
    ring: standard
    check_script: surfaces/verify/d60-deprecation-sweeper.sh
    fix_hint: Replace deprecated terms in governance docs. Check ops/bindings/deprecated.terms.yaml.
  - id: D61
    name: session-loop-traceability-lock
    category: loop-gap-hygiene
    gate_class: freshness
    description: Session closeout freshness (every 48h)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d61-session-loop-traceability-lock.sh
    fix_hint: Run agent.session.closeout. Sessions require closeout every 48h.
  - id: D62
    name: git-remote-parity-lock
    category: git-hygiene
    gate_class: invariant
    description: origin/main == github/main
    severity: high
    ring: standard
    check_script: surfaces/verify/d62-git-remote-parity-lock.sh
    fix_hint: 'Push to both origin (Gitea) and github: git push origin main && git push github main.'
  - id: D63
    name: capabilities-metadata-lock
    category: process-hygiene
    gate_class: invariant
    description: Registry integrity (API caps need touches_api + requires)
    severity: high
    ring: instant
    check_script: surfaces/verify/d63-capabilities-metadata-lock.sh
    fix_hint: Fix capabilities.yaml metadata. API caps need touches_api + requires fields.
  - id: D64
    name: git-remote-authority-warn
    category: git-hygiene
    gate_class: advisory
    description: Gitea is canonical, GitHub is mirror only
    severity: low
    ring: deep
    check_script: surfaces/verify/d64-git-remote-authority-warn.sh
    fix_hint: Gitea is canonical remote. Do not merge PRs on GitHub directly.
  - id: D65
    name: agent-briefing-sync-lock
    category: agent-surface-hygiene
    gate_class: freshness
    description: AGENTS.md + CLAUDE.md governance brief matches canonical source
    severity: critical
    ring: deep
    check_script: surfaces/verify/d65-agent-briefing-sync-lock.sh
    fix_hint: Edit AGENT_GOVERNANCE_BRIEF.md directly. Legacy sync hooks are retired and removed.
  - id: D66
    name: mcp-server-parity-gate
    category: agent-surface-hygiene
    gate_class: freshness
    description: Local MCP agents vs MCPJungle copies in sync
    severity: medium
    ring: deep
    check_script: surfaces/verify/d66-mcp-parity-gate.sh
    fix_hint: Sync MCP server copies between local agents and MCPJungle.
  - id: D67
    name: capability-map-lock
    category: process-hygiene
    gate_class: invariant
    description: capability_map.yaml covers all entries in capabilities.yaml
    severity: high
    ring: instant
    check_script: surfaces/verify/d67-capability-map-lock.sh
    fix_hint: Update ops/bindings/capability_map.yaml to cover all entries in capabilities.yaml.
  - id: D68
    name: rag-canonical-only-gate
    category: doc-hygiene
    gate_class: invariant
    description: RAG manifest excludes non-canonical paths
    severity: medium
    ring: standard
    check_script: surfaces/verify/d68-rag-canonical-only-gate.sh
    fix_hint: Remove non-canonical paths from RAG manifest. Exclude _audits/, _archived/, legacy/.
  - id: D69
    name: vm-creation-governance-lock
    category: infra-hygiene
    gate_class: invariant
    description: New VMs need SSH + SERVICE_REGISTRY + backup + health entries
    severity: high
    ring: standard
    check_script: surfaces/verify/d69-vm-creation-governance-lock.sh
    fix_hint: New VMs need entries in SSH config, SERVICE_REGISTRY, backup, and health checks.
  - id: D70
    name: secrets-deprecated-alias-lock
    category: secrets-hygiene
    gate_class: invariant
    description: Deprecated secret project write protection
    severity: medium
    ring: standard
    check_script: surfaces/verify/d70-secrets-deprecated-alias-lock.sh
    fix_hint: Do not write to deprecated secret projects. Use current namespace.
  - id: D71
    name: deprecated-ref-allowlist-lock
    category: process-hygiene
    gate_class: advisory
    description: Workbench scripts vs deprecated reference allowlist
    severity: low
    ring: deep
    check_script: surfaces/verify/d71-deprecated-ref-allowlist-lock.sh
    fix_hint: Add legitimate legacy refs to allowlist, or replace with current names.
  - id: D72
    name: macbook-hotkey-ssot-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Workbench launcher surfaces match spine MACBOOK_SSOT AUTO blocks
    severity: medium
    ring: standard
    check_script: surfaces/verify/d72-macbook-hotkey-ssot-lock.sh
    fix_hint: Sync workbench launcher surfaces with spine MACBOOK_SSOT AUTO blocks.
  - id: D73
    name: opencode-governed-entry-lock
    category: workbench-hygiene
    gate_class: invariant
    description: OpenCode config model/provider/launcher path correct
    severity: medium
    ring: standard
    check_script: surfaces/verify/d73-opencode-governed-entry-lock.sh
    fix_hint: Ensure opencode.json uses model openai/glm-5 and launcher path is correct.
  - id: D74
    name: billing-provider-lane-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Background defaults + launchd template invariants
    severity: medium
    ring: standard
    check_script: surfaces/verify/d74-billing-provider-lane-lock.sh
    fix_hint: Check ZAI_MODEL=glm-5 in launchd template and background defaults.
  - id: D75
    name: gap-registry-mutation-lock
    category: loop-gap-hygiene
    gate_class: invariant
    description: operational.gaps.yaml mutated only via capabilities
    severity: critical
    ring: standard
    check_script: surfaces/verify/d75-gap-registry-mutation-lock.sh
    fix_hint: Use gaps.file/gaps.close capabilities only. No direct edits to operational.gaps.yaml.
  - id: D76
    name: home-surface-hygiene-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Home directory drift prevention
    severity: medium
    ring: standard
    check_script: surfaces/verify/d76-home-surface-hygiene-lock.sh
    fix_hint: Check home directory for drift. Remove ungoverned files per home-surface policy.
  - id: D77
    name: workbench-contract-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Plist/runtime/bare-exec enforcement
    severity: medium
    ring: standard
    check_script: surfaces/verify/d77-workbench-contract-lock.sh
    fix_hint: Fix workbench plist/runtime/bare-exec contract violations.
  - id: D78
    name: workbench-path-lock
    category: workbench-hygiene
    gate_class: invariant
    description: No uppercase /Code/ + no legacy repo name in workbench
    severity: high
    ring: standard
    check_script: surfaces/verify/d78-workbench-path-lock.sh
    fix_hint: Use lowercase ~/code/ in workbench scripts. Remove legacy repo name references.
  - id: D79
    name: workbench-script-allowlist-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Governed workbench script surface
    severity: medium
    ring: standard
    check_script: surfaces/verify/d79-workbench-script-allowlist-lock.sh
    fix_hint: Add new workbench scripts to allowlist or remove ungoverned ones.
  - id: D80
    name: workbench-authority-trace-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Legacy naming violations in workbench
    severity: medium
    ring: standard
    check_script: surfaces/verify/d80-workbench-authority-trace-lock.sh
    fix_hint: Fix legacy naming violations in workbench. Use current repo/project names.
  - id: D81
    name: plugin-test-regression-lock
    category: process-hygiene
    gate_class: invariant
    description: New plugins must have tests or explicit exemption
    severity: medium
    ring: standard
    check_script: surfaces/verify/d81-plugin-test-regression-lock.sh
    fix_hint: New plugins must have tests/ dir with test scripts, or an explicit exemption.
  - id: D82
    name: share-publish-governance-lock
    category: process-hygiene
    gate_class: invariant
    description: Share publish allowlist/denylist + capability wiring
    severity: medium
    ring: deep
    check_script: surfaces/verify/d82-share-publish-governance-lock.sh
    fix_hint: Check share publish allowlist/denylist. Ensure capability wiring is correct.
  - id: D83
    name: proposal-queue-health-lock
    category: loop-gap-hygiene
    gate_class: invariant
    description: Proposal manifest + fields + SLA + parity
    severity: high
    ring: standard
    check_script: surfaces/verify/d83-proposal-queue-health-lock.sh
    fix_hint: Fix malformed proposal manifests. Check status, required fields, SLA compliance.
  - id: D84
    name: docs-index-registration-lock
    category: doc-hygiene
    gate_class: invariant
    description: Every governance .md registered in _index.yaml
    severity: medium
    ring: standard
    check_script: surfaces/verify/d84-docs-index-registration-lock.sh
    fix_hint: Register new governance .md files in docs/governance/_index.yaml.
  - id: D85
    name: gate-registry-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: gate.registry.yaml covers every gate in drift-gate.sh, all scripts exist
    severity: high
    ring: standard
    check_script: surfaces/verify/d85-gate-registry-parity-lock.sh
    fix_hint: Update ops/bindings/gate.registry.yaml to match gate scripts in surfaces/verify/.
  - id: D86
    name: vm-operating-profile-parity-lock
    category: infra-hygiene
    gate_class: invariant
    description: Every active VM in vm.lifecycle.yaml has a valid operating profile entry
    severity: medium
    ring: standard
    check_script: surfaces/verify/d86-vm-operating-profile-parity-lock.sh
    fix_hint: Update ops/bindings/vm.operating.profile.yaml to cover all active VMs with valid enum fields.
  - id: D87
    name: rag-workspace-contract-lock
    category: infra-hygiene
    gate_class: invariant
    description: RAG workspace contract binding exists and is consistent with CLI defaults
    severity: medium
    ring: standard
    check_script: surfaces/verify/d87-rag-workspace-contract-lock.sh
    fix_hint: Update ops/bindings/rag.workspace.contract.yaml to match RAG CLI defaults for slug, eligible roots, exclusions, and timeouts.
  - id: D88
    name: rag-remote-reindex-governance-lock
    category: infra-hygiene
    gate_class: invariant
    description: RAG remote reindex runner binding, scripts, capability wiring, and auth-token hygiene are enforced
    severity: high
    ring: standard
    check_script: surfaces/verify/d88-rag-remote-reindex-governance-lock.sh
    fix_hint: Ensure rag.remote.runner binding exists, rag.reindex.remote.* capabilities are wired, scripts are executable, and rag CLI does not pass bearer token in process args.
  - id: D89
    name: rag-reindex-quality-contract-lock
    category: infra-hygiene
    gate_class: invariant
    description: RAG reindex quality contract binding exists with required thresholds and verify/probe capabilities are registered
    severity: high
    ring: standard
    check_script: surfaces/verify/d89-rag-reindex-quality-contract-lock.sh
    fix_hint: Ensure rag.reindex.quality.yaml binding exists with completion/index_health/dependency_slos fields and rag.reindex.remote.verify + rag.remote.dependency.probe capabilities are registered.
  - id: D90
    name: rag-reindex-runtime-quality-gate
    category: infra-hygiene
    gate_class: invariant
    description: RAG reindex runtime quality gate enforces clean completion when session is stopped (failed uploads, checkpoint, inflation ratio)
    severity: high
    ring: standard
    check_script: surfaces/verify/d90-rag-reindex-runtime-quality-gate.sh
    fix_hint: Run rag.reindex.remote.verify to diagnose. If session is stopped with failures, clean checkpoint and retry or investigate timeout root cause.
  - id: D91
    name: aof-product-foundation-lock
    category: process-hygiene
    gate_class: invariant
    description: AOF product docs, tenant bindings, policy presets, and tenant capabilities exist and are correctly wired
    severity: high
    ring: standard
    check_script: surfaces/verify/d91-aof-product-foundation-lock.sh
    fix_hint: Create missing product docs in docs/product/, bindings in ops/bindings/, tenant capabilities in ops/plugins/tenant/. Ensure docs/README.md references product/.
  - id: D92
    name: ha-config-version-control
    category: infrastructure-parity
    gate_class: invariant
    description: HA config files extracted to workbench for version control and diff visibility
    severity: high
    ring: standard
    check_script: surfaces/verify/d92-ha-config-version-control.sh
    fix_hint: Run ./bin/ops cap run ha.config.extract to pull config files from HA to workbench/infra/homeassistant/config/.
  - id: D93
    name: tenant-storage-boundary-lock
    category: process-hygiene
    gate_class: freshness
    description: Tenant storage contract binding exists with all boundary declarations and isolation mode
    severity: high
    ring: standard
    check_script: surfaces/verify/d93-tenant-storage-boundary-lock.sh
    fix_hint: Create ops/bindings/tenant.storage.contract.yaml with boundaries for receipts, ledger, mailroom, loop scopes. Run tenant.storage.audit.
  - id: D94
    name: policy-runtime-enforcement-lock
    category: process-hygiene
    gate_class: invariant
    description: Policy runtime contract binding exists with all 11 knobs declared and enforcement wiring status
    severity: high
    ring: standard
    check_script: surfaces/verify/d94-policy-runtime-enforcement-lock.sh
    fix_hint: Create ops/bindings/policy.runtime.contract.yaml with all policy preset knobs and enforcement_point declarations. Run policy.runtime.audit.
  - id: D95
    name: version-compat-matrix-lock
    category: process-hygiene
    gate_class: invariant
    description: Version compatibility matrix exists with valid source references and dependency graph
    severity: medium
    ring: standard
    check_script: surfaces/verify/d95-version-compat-matrix-lock.sh
    fix_hint: Create ops/bindings/version.compat.matrix.yaml with component versions and dependency declarations. Run version.compat.verify.
  - id: D96
    name: evidence-retention-policy-lock
    category: process-hygiene
    gate_class: invariant
    description: Evidence retention policy exists with retention classes, purge rules, and export configuration
    severity: medium
    ring: standard
    check_script: surfaces/verify/d96-evidence-retention-policy-lock.sh
    fix_hint: Create ops/bindings/evidence.retention.policy.yaml with retention classes for receipts, ledger, loops, gaps, proposals. Run evidence.export.plan.
  - id: D97
    name: surface-readonly-contract-lock
    category: process-hygiene
    gate_class: invariant
    description: Surface readonly contract exists with all status surfaces declared and no mutating access
    severity: medium
    ring: standard
    check_script: surfaces/verify/d97-surface-readonly-contract-lock.sh
    fix_hint: Create ops/bindings/surface.readonly.contract.yaml with surface inventory and access declarations. Run surface.readonly.audit.
  - id: D98
    name: z2m-device-parity
    category: home-automation
    gate_class: invariant
    description: Z2M device registry exists, is non-empty, and fresh (<14 days)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d98-z2m-device-parity.sh
    fix_hint: Run ha.z2m.devices.snapshot to regenerate ops/bindings/z2m.devices.yaml from HA.
  - id: D99
    name: ha-token-freshness
    category: home-automation
    gate_class: freshness
    description: HA API token from Infisical returns HTTP 200 (not stale)
    severity: high
    ring: standard
    check_script: surfaces/verify/d99-ha-token-freshness.sh
    fix_hint: Rotate HA_API_TOKEN in Infisical home-assistant/prod and restart dependents (Stream Deck, MCP).
  - id: D100
    name: vm-ip-parity-lock
    category: ssot-integrity
    gate_class: invariant
    description: vm.lifecycle.yaml LAN IPs match DEVICE_IDENTITY_SSOT.md and MINILAB_SSOT.md
    severity: high
    ring: standard
    check_script: surfaces/verify/d100-vm-ip-parity-lock.sh
    fix_hint: Cross-reference live UniFi clients against both SSOTs. Update both files simultaneously.
  - id: D101
    name: ha-addon-inventory-parity
    category: home-automation
    gate_class: invariant
    description: HA add-on inventory exists, is non-empty, and fresh (<14 days)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d101-ha-addon-inventory-parity.sh
    fix_hint: Run ha.addons.snapshot to regenerate ops/bindings/ha.addons.yaml from HA Supervisor API.
  - id: D102
    name: ha-device-map-freshness
    category: home-automation
    gate_class: freshness
    description: HA device map exists, is non-empty, and fresh (<14 days)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d102-ha-device-map-freshness.sh
    fix_hint: Run ha.device.map.build to regenerate ops/bindings/ha.device.map.yaml from HA API.
  - id: D103
    name: streamdeck-config-lock
    category: workbench-hygiene
    gate_class: advisory
    description: Stream Deck HA controller config is tracked in workbench and valid JSON
    severity: low
    ring: standard
    check_script: surfaces/verify/d103-streamdeck-config-lock.sh
    fix_hint: Run host.streamdeck.snapshot to sync runtime config to tracked location.
  - id: D104
    name: home-dhcp-audit-freshness
    category: home-automation
    gate_class: freshness
    description: DHCP audit summary exists, has devices checked, and is fresh (<14 days)
    severity: medium
    ring: standard
    check_script: surfaces/verify/d104-home-dhcp-audit-freshness.sh
    fix_hint: Run network.home.dhcp.audit to regenerate ops/bindings/home.dhcp.audit.yaml.
  - id: D105
    name: ha-mcp-governance-lock
    category: home-automation
    gate_class: advisory
    description: HA MCP server has GOVERNED_TOOLS block, ha_call_service blocked, and policy doc present
    severity: low
    ring: standard
    check_script: surfaces/verify/d105-ha-mcp-governance-lock.sh
    fix_hint: Run ha.mcp.status to diagnose. Check GOVERNED_TOOLS in MCP source and HASS_MCP_INTEGRATION.md.
  - id: D106
    name: media-port-collision-lock
    category: media-hygiene
    gate_class: invariant
    description: No duplicate ports across media VMs (download-stack, streaming-stack)
    severity: high
    ring: standard
    check_script: surfaces/verify/d106-media-port-collision-lock.sh
    fix_hint: Review ops/bindings/media.services.yaml ports section. Ensure no duplicate ports within each VM.
  - id: D107
    name: media-nfs-mount-lock
    category: media-hygiene
    gate_class: invariant
    description: Both media VMs can reach pve:/media with correct mount modes (RW/RO)
    severity: high
    ring: standard
    check_script: surfaces/verify/d107-media-nfs-mount-lock.sh
    fix_hint: Check NFS mount on VMs. download-stack needs RW, streaming-stack needs RO. Verify /etc/fstab entries.
  - id: D108
    name: media-health-endpoint-parity-lock
    category: media-hygiene
    gate_class: invariant
    description: Every active media service with health endpoint responds HTTP 200
    severity: medium
    ring: standard
    check_script: surfaces/verify/d108-media-health-endpoint-parity-lock.sh
    fix_hint: Check service health endpoints. Run media.health.check for detailed diagnostics.
  - id: D109
    name: media-compose-config-match-lock
    category: media-hygiene
    gate_class: invariant
    description: Live containers match services declared in media.services.yaml
    severity: medium
    ring: standard
    check_script: surfaces/verify/d109-media-compose-config-match-lock.sh
    fix_hint: Review ops/bindings/media.services.yaml status fields. Update parked/stopped services or start missing containers.
  - id: D110
    name: media-ha-duplicate-audit-lock
    category: media-hygiene
    gate_class: advisory
    description: HA add-ons duplicating shop services are flagged for review
    severity: low
    ring: standard
    check_script: surfaces/verify/d110-media-ha-duplicate-audit-lock.sh
    fix_hint: Review ha_overlaps section in media.services.yaml. Decommission or justify HA add-ons duplicating shop services.
  - id: D111
    name: rag-embedding-smoke-preflight
    category: doc-hygiene
    gate_class: invariant
    description: Recent successful smoke test required before full RAG reindex authorization
    severity: high
    ring: standard
    check_script: surfaces/verify/d111-rag-embedding-smoke-preflight.sh
    fix_hint: Run rag.reindex.smoke --execute to generate fresh smoke evidence. Gate validates uploaded>0, failed=0, and <24h freshness.
  - id: D112
    name: secrets-access-pattern-lock
    category: secrets-hygiene
    gate_class: freshness
    description: All secret access uses canonical infisical-agent.sh (no CLI pattern, no inline auth)
    severity: high
    ring: standard
    check_script: surfaces/verify/d112-secrets-access-pattern-lock.sh
    fix_hint: Replace infisical CLI calls with infisical-agent.sh get/auth-token. Replace inline curl to universal-auth/login with infisical-agent.sh auth-token.
  - id: D113
    name: coordinator-health-probe
    category: home-automation
    gate_class: invariant
    description: Radio coordinator health (Z2M started, SLZB-06MU ethernet up, firmware versions logged)
    severity: medium
    ring: deep
    check_script: surfaces/verify/d113-coordinator-health-probe.sh
    fix_hint: Check Z2M add-on is started in HA. Verify SLZB-06MU is powered and ethernet connected. Restart add-ons if needed.
  - id: D114
    name: ha-automation-stability
    category: home-automation
    gate_class: invariant
    description: HA automation count matches expected (27 automations)
    severity: medium
    ring: deep
    check_script: surfaces/verify/d114-ha-automation-stability.sh
    fix_hint: Check HA automations in Settings > Automations. Update expected count in gate script if automations were intentionally added or removed.
  - id: D115
    name: ha-ssot-baseline-freshness
    category: ssot-hygiene
    gate_class: freshness
    description: HA SSOT baseline exists, fresh (14d), sub-bindings on disk, unexpected unavailable below threshold
    severity: medium
    ring: standard
    check_script: surfaces/verify/d115-ha-ssot-baseline-freshness.sh
    fix_hint: Run ha.ssot.baseline.build to refresh. If sub-bindings missing, run individual snapshot capabilities first.
  - id: D116
    name: mailroom-bridge-consumers-registry-lock
    category: ssot-hygiene
    gate_class: invariant
    description: Bridge Cap-RPC consumer registry parity (allowlist + RBAC roles + docs + JSON contract caps)
    severity: high
    ring: standard
    check_script: surfaces/verify/d116-mailroom-bridge-consumers-registry-lock.sh
    fix_hint: "Run: bash ops/plugins/mailroom-bridge/bin/mailroom-bridge-consumers-sync (then rerun spine.verify)."
  - id: D117
    name: iot-device-naming-parity
    category: home-automation
    gate_class: invariant
    description: IoT device naming convention parity across registry, HA entities, and Tuya names
    severity: medium
    ring: deep
    check_script: surfaces/verify/d117-iot-device-naming-parity.sh
    fix_hint: Check ha_entities and tuya_name fields in home.device.registry.yaml against IoT naming convention in naming.policy.yaml.
  - id: D118
    name: z2m-device-health
    category: home-automation
    gate_class: freshness
    description: Z2M device battery levels above 20%, staleness within 48h, bridge connected
    severity: medium
    ring: deep
    check_script: surfaces/verify/d118-z2m-device-health.sh
    fix_hint: "Check battery levels in HA. Replace batteries for devices below 20%. Check Z2M bridge if disconnected. Run ha.z2m.health for details."
  - id: D119
    name: z2m-naming-parity
    category: home-automation
    gate_class: invariant
    description: Z2M naming parity across z2m.naming.yaml, z2m.devices.yaml, and ha.device.map.yaml
    severity: medium
    ring: deep
    check_script: surfaces/verify/d119-z2m-naming-parity.sh
    fix_hint: "Check z2m.naming.yaml canonical names match z2m.devices.yaml friendly_name. Run ha.z2m.devices.snapshot + ha.device.map.build to refresh."
  - id: D120
    name: ha-area-parity
    category: home-automation
    gate_class: invariant
    description: HA areas match SSOT binding ha.areas.yaml — names, icons, area count
    severity: medium
    ring: deep
    check_script: surfaces/verify/d120-ha-area-parity.sh
    fix_hint: "Check ha.areas.yaml matches live HA areas. Run ha.areas.snapshot to refresh."
  - id: D121
    name: fabric-boundary-lock
    category: process-hygiene
    gate_class: freshness
    description: Lean-spine boundary lock (plane metadata + active workbench agent implementation path policy)
    severity: high
    ring: instant
    check_script: surfaces/verify/d121-fabric-boundary-lock.sh
    fix_hint: "Update ops/bindings/fabric.boundary.contract.yaml or adjust violating capability/agent implementation paths."
  - id: D122
    name: domain-doc-route-lock
    category: doc-hygiene
    gate_class: invariant
    description: Domain docs routing lock (spine pointer stubs + workbench target parity via domain.docs.routes.yaml)
    severity: high
    ring: standard
    check_script: surfaces/verify/d122-domain-doc-route-lock.sh
    fix_hint: "Update ops/bindings/domain.docs.routes.yaml and ensure each route has source stub, workbench target, and domain stub."
  - id: D123
    name: balanced-policy-safety-lock
    category: process-hygiene
    gate_class: invariant
    description: Balanced policy lock with multi-session proposal safety enforcement
    severity: high
    ring: standard
    check_script: surfaces/verify/d123-strict-migration-policy-lock.sh
    fix_hint: "Set tenant policy preset to balanced and enforce proposal-only writes when multi-session is active."
  - id: D124
    name: entry-surface-parity-lock
    category: agent-surface-hygiene
    gate_class: freshness
    description: Startup contract block parity across AGENTS, CLAUDE, OPENCODE, and ~/.claude surfaces
    severity: high
    ring: instant
    check_script: surfaces/verify/d124-entry-surface-parity-lock.sh
    fix_hint: "Sync SPINE_STARTUP_BLOCK sections to match ops/bindings/entry.surface.contract.yaml."
  - id: D125
    name: mcp-runtime-parity-lock
    category: workbench-hygiene
    gate_class: invariant
    description: MCP runtime server registration parity across Codex, Claude Desktop, and OpenCode
    severity: high
    ring: standard
    check_script: surfaces/verify/d125-mcp-runtime-parity-lock.sh
    fix_hint: "Align runtime configs with ops/bindings/mcp.runtime.contract.yaml and rerun mcp.runtime.status."
  - id: D126
    name: workbench-implementation-path-lock
    category: workbench-hygiene
    gate_class: invariant
    description: Domain-external capability implementation paths resolve to canonical workbench files/dirs
    severity: high
    ring: instant
    check_script: surfaces/verify/d126-workbench-implementation-path-lock.sh
    fix_hint: "Run ./bin/ops cap run workbench.impl.audit --list and correct implementation_repo/implementation_path drift."
  - id: D127
    name: domain-assignment-drift-lock
    category: process-hygiene
    gate_class: invariant
    description: 'Topology lock: all active gates must have primary_domain assignment; all domain refs defined; release sequence complete'
    severity: high
    ring: instant
    check_script: surfaces/verify/d127-domain-assignment-drift-lock.sh
    fix_hint: Update gate.execution.topology.yaml domain_metadata/gate_assignments/release_sequence to satisfy full domain coverage.
  - id: D128
    name: gate-registration-contract-lock
    category: process-hygiene
    gate_class: invariant
    description: 'Gate registry/topology mutation lock: require governed capability provenance and clean contract files'
    severity: high
    ring: deep
    check_script: surfaces/verify/d128-gate-registration-contract-lock.sh
    fix_hint: Use gate.registry.* / gate.topology.* / domain.onboard.new capabilities and include Gate-* trailers on commits touching gate contracts.
  - id: D129
    name: spine-schema-conventions-lock
    category: process-hygiene
    gate_class: invariant
    description: Schema conventions lock for ops/bindings normalization (disallowed aliases, status vocabulary, date format).
    severity: high
    ring: standard
    check_script: surfaces/verify/d129-spine-schema-conventions-lock.sh
    fix_hint: Run schema.conventions.audit and normalize changed binding files to spine.schema.conventions.yaml rules.
    inline: false
  - id: D130
    name: boundary-authority-lock
    category: process-hygiene
    gate_class: invariant
    description: Boundary authority consistency (baseline authoritative_surfaces + README spine-ownership + mailroom contract paths).
    severity: high
    ring: standard
    check_script: surfaces/verify/d130-boundary-authority-lock.sh
    fix_hint: Ensure README.md spine-ownership matches spine.boundary.baseline.yaml authoritative_surfaces and mailroom.runtime.contract.yaml paths are consistent.
    inline: false
  - id: D131
    name: catalog-freshness-lock
    category: process-hygiene
    gate_class: freshness
    description: Catalog freshness enforcement (domain last_synced within 7 days, CAPABILITIES.md present per domain).
    severity: high
    ring: standard
    check_script: surfaces/verify/d131-catalog-freshness-lock.sh
    fix_hint: Run catalog-domain-sync to refresh last_synced dates and ensure docs/governance/domains/<domain>/CAPABILITIES.md exists.
    inline: false
  - id: D132
    name: mutation-atomicity-lock
    category: process-hygiene
    gate_class: invariant
    description: Mutation atomicity enforcement (all governed mutating scripts must source git-lock.sh and call acquire_git_lock).
    severity: high
    ring: standard
    check_script: surfaces/verify/d132-mutation-atomicity-lock.sh
    fix_hint: Add `source "$ROOT/ops/lib/git-lock.sh"` and `acquire_git_lock` to mutating scripts.
    inline: false
  - id: D133
    name: output-vocabulary-lock
    category: process-hygiene
    gate_class: invariant
    description: Output vocabulary normalization (gate scripts must reference their gate ID in output statements for traceability).
    severity: high
    ring: standard
    check_script: surfaces/verify/d133-output-vocabulary-lock.sh
    fix_hint: "Add gate ID (D<N>) to echo/printf output in gate scripts. Use canonical D<N> PASS/FAIL patterns."
    inline: false
  - id: D134
    name: topology-metadata-quality-lock
    category: process-hygiene
    gate_class: invariant
    description: Topology metadata quality (domain_metadata required fields, criticality enum, gate_assignments completeness).
    severity: high
    ring: standard
    check_script: surfaces/verify/d134-topology-metadata-quality-lock.sh
    fix_hint: Add missing required fields (domain_id, description, criticality, capability_prefixes, path_triggers, added_date) to gate.execution.topology.yaml.
    inline: false
  - id: D135
    name: terminal-scope-lock
    category: process-hygiene
    gate_class: invariant
    description: Post-stabilization terminal scope lock (canonical terminal IDs + no active scope collisions in shared repos).
    severity: high
    ring: standard
    check_script: surfaces/verify/d135-terminal-scope-lock.sh
    fix_hint: Post terminal heartbeats (`terminal.heartbeat.post`) with canonical ROLE-DOMAIN-## terminal IDs and resolve overlapping write scopes before parallel work.
    inline: false
  - id: D136
    name: lifecycle-hygiene
    category: process-hygiene
    gate_class: invariant
    description: Lifecycle hygiene (lifecycle.rules.yaml required fields, schema file, no orphaned gaps, aging advisory).
    severity: medium
    ring: deep
    check_script: surfaces/verify/d136-lifecycle-hygiene.sh
    fix_hint: Run `ops cap run lifecycle.health` for details. Ensure lifecycle.rules.yaml exists with all required fields and no open gaps are linked to closed loops.
    inline: false
  - id: D137
    name: infra-capability-metadata-parity
    category: infra-hygiene
    gate_class: invariant
    description: Validates infra capabilities declare plane, domain, and requires metadata
    severity: medium
    ring: standard
    check_script: surfaces/verify/d137-infra-capability-metadata-parity.sh
    fix_hint: ""
    inline: false
  - id: D138
    name: site-parity-maintenance-order
    category: infra-hygiene
    gate_class: invariant
    description: Validates startup.sequencing.yaml has site tags and both shop/home sites represented
    severity: medium
    ring: standard
    check_script: surfaces/verify/d138-site-parity-maintenance-order.sh
    fix_hint: ""
    inline: false
  - id: D139
    name: nas-baseline-coverage
    category: infra-hygiene
    gate_class: freshness
    description: Validates NAS identity in device registry and backup coverage in backup inventory
    severity: medium
    ring: standard
    check_script: surfaces/verify/d139-nas-baseline-coverage.sh
    fix_hint: ""
    inline: false
  - id: D140
    name: worktree-session-isolation
    category: git-hygiene
    gate_class: invariant
    description: Worktree session isolation enforcement (non-main branches require explicit worktree identity per contract)
    severity: high
    ring: deep
    check_script: surfaces/verify/d140-worktree-session-isolation.sh
    fix_hint: "Create isolated worktree: ./bin/ops start loop <LOOP_ID> or set OPS_WORKTREE_ISOLATION_BYPASS=1"
    inline: false
  - id: D141
    name: alerting-rule-parity
    category: loop-gap-hygiene
    gate_class: invariant
    description: Every critical domain in stability.control.contract must have exactly one alerting rule entry.
    severity: medium
    ring: standard
    check_script: surfaces/verify/d141-alerting-rule-parity.sh
    fix_hint: Add or deduplicate domain entries in ops/bindings/alerting.rules.yaml to match stability.control.contract critical_domains.
    inline: false
  - id: D142
    name: receipt-index-freshness
    category: process-hygiene
    gate_class: freshness
    description: Receipt intelligence index must exist, be fresh (<48h), and session receipts cannot exceed 2x retention horizon.
    severity: medium
    ring: standard
    check_script: surfaces/verify/d142-receipt-index-freshness.sh
    fix_hint: Run receipts.index.build and archive stale sessions with receipts.rotate --execute to restore freshness/retention compliance.
    inline: false
  - id: D143
    name: session-handoff-hygiene
    category: loop-gap-hygiene
    gate_class: invariant
    description: Session handoff config and lifecycle hygiene (required fields present, no active handoffs older than 2x TTL).
    severity: medium
    ring: standard
    check_script: surfaces/verify/d143-session-handoff-hygiene.sh
    fix_hint: Run session.handoff.expire to clear stale active handoffs and fix malformed handoff artifacts/config.
    inline: false
  - id: D144
    name: briefing-config-parity
    category: process-hygiene
    gate_class: invariant
    description: Briefing config parity (enabled section IDs must be unique and map to executable runner scripts).
    severity: medium
    ring: deep
    check_script: surfaces/verify/d144-briefing-config-parity.sh
    fix_hint: Update ops/bindings/briefing.config.yaml runner mappings and ensure each runner script exists + executable.
    inline: false
  - id: D145
    name: aof-decomposition-vocabulary-lock
    category: process-hygiene
    gate_class: invariant
    description: Active loop scopes and product docs use canonical decomposition vocabulary (Step) only.
    severity: medium
    ring: standard
    check_script: surfaces/verify/d145-aof-decomposition-vocabulary-lock.sh
    fix_hint: Replace WS/Move/Wave/Phase/P-tier labels with Step labels in active loop scopes and docs/product.
    inline: false
  - id: D146
    name: calendar-surface-matrix-lock
    category: process-hygiene
    gate_class: invariant
    description: Canonical calendar surface matrix lock (calendar+microsoft+backup+AOF control-plane contracts, artifacts, and planner surfaces).
    severity: medium
    ring: standard
    check_script: surfaces/verify/d146-calendar-surface-lock.sh
    fix_hint: Run calendar.surface.audit and repair missing capabilities/contracts/artifacts before rerunning verify pack.
    inline: false
  - id: D147
    name: communications-canonical-routing-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce canonical Twilio/Resend provider usage through spine communications surface only (no direct provider calls in other active runtime/agent code paths).
    severity: high
    ring: standard
    check_script: surfaces/verify/d147-communications-canonical-routing-lock.sh
    fix_hint: Route outbound transactional sends through communications.send.preview + communications.send.execute; remove direct provider API usage from non-communications surfaces.
    inline: false
  - id: D148
    name: mcp-agent-runtime-binding-lock
    category: workbench-hygiene
    gate_class: freshness
    description: Enforce canonical Claude Desktop runtime path linkage and explicit active-agent MCP runtime binding contracts.
    severity: high
    ring: instant
    check_script: surfaces/verify/d148-mcp-agent-runtime-binding-lock.sh
    fix_hint: Normalize mcp.runtime.contract surface paths + required servers and add runtime_bindings/runtime_binding_exempt_reason in agents.registry for active MCP agents.
    inline: false
  - id: D149
    name: infra-core-service-parity-lock
    category: infra-hygiene
    gate_class: invariant
    description: Infra-core service parity lock across SERVICE_REGISTRY, services.health, infra.core.slo, stability.control probe wiring, and capability registration.
    severity: high
    ring: standard
    check_script: surfaces/verify/d149-infra-core-service-parity-lock.sh
    fix_hint: Align infra-core required services (caddy/authentik/vaultwarden/infisical/cloudflared) across contracts and keep infra.core.slo.status as the canonical stability probe.
    inline: false
  - id: D150
    name: code-root-hygiene-lock
    category: path-hygiene
    gate_class: freshness
    description: Block loose files at ~/code/ root. Agent-generated documentation must flow through the mailroom (mailroom/outbox/reports/, mailroom/outbox/proposals/, or receipts/audits/governance/).
    severity: high
    ring: instant
    check_script: surfaces/verify/d150-code-root-hygiene-lock.sh
    fix_hint: "Move loose files out of ~/code/. Reports → mailroom/outbox/reports/. Proposals → ./bin/ops cap run proposals.submit. Audits → receipts/audits/governance/."
    inline: false
  - id: D151
    name: communications-boundary-lock
    category: process-hygiene
    gate_class: freshness
    description: Communications boundary enforcement (no Outlook as automated sender, no stale domains, stack-provider mode parity)
    severity: high
    ring: deep
    check_script: surfaces/verify/d151-communications-boundary-lock.sh
    fix_hint: "Update communications.stack.contract.yaml send_test and mailboxes off @mintprints.com. Align transactional.mode across stack and provider contracts."
    inline: false
  - id: D152
    name: terminal-role-capability-parity
    category: contract-parity
    gate_class: invariant
    description: Every capability in terminal.role.contract.yaml roles must exist in capabilities.yaml
    severity: high
    ring: deep
    check_script: surfaces/verify/d152-terminal-role-capability-parity.sh
    fix_hint: "Update terminal.role.contract.yaml role capabilities to match actual capability names in ops/capabilities.yaml."
    inline: false
  - id: D153
    name: project-attach-parity
    category: process-hygiene
    gate_class: invariant
    description: Active project_binding entries must match materialized /Users/ronnyworks/code/*/.spine-link.yaml fields and valid gate pack targets.
    severity: high
    ring: instant
    check_script: surfaces/verify/d153-project-attach-parity.sh
    fix_hint: "Run ./bin/generators/gen-project-attach.sh and align project_binding fields in agents.registry.yaml with .spine-link.yaml."
    inline: false
  - id: D154
    name: gate-ring-contract
    category: process-hygiene
    gate_class: invariant
    description: Gate ring contract parity across verify.ring.policy, gate registry ring assignments, and core-ring mapping constraints.
    severity: high
    ring: standard
    check_script: surfaces/verify/d154-gate-ring-contract.sh
    fix_hint: "Update ops/bindings/verify.ring.policy.yaml and gate registry ring fields to match core/domain/release ring policy."
    inline: false
  - id: D155
    name: audits-migration-plan-lock
    category: process-hygiene
    gate_class: invariant
    description: Audits migration planning lock (inventory + dry-run manifest parity and source-root safety constraints).
    severity: high
    ring: standard
    check_script: surfaces/verify/d155-audits-migration-plan-lock.sh
    fix_hint: "Regenerate MIGRATION_INVENTORY_YYYYMMDD.yaml and ops/bindings/audits.migration.plan.yaml with dry_run=true and audits-root bounded sources."
    inline: false
  - id: D156
    name: governance-freshness-and-receipts-policy-lock
    category: process-hygiene
    gate_class: freshness
    description: Governance freshness metadata and receipts archival policy lock, including receipts index coverage threshold evaluation.
    severity: high
    ring: standard
    check_script: surfaces/verify/d156-governance-freshness-and-receipts-policy-lock.sh
    fix_hint: "Register RECEIPTS_ARCHIVAL_POLICY_V1.md in docs/governance/_index.yaml, ensure non-generated/non-audit governance docs carry last_verified, and resolve receipts index coverage threshold failures."
    inline: false
  - id: D157
    name: proposals-lifecycle-linkage-lock
    category: process-hygiene
    gate_class: freshness
    description: Proposal lifecycle metadata and pending loop-linkage contract lock.
    severity: high
    ring: standard
    check_script: surfaces/verify/d157-proposals-lifecycle-linkage-lock.sh
    fix_hint: "Normalize proposal manifest status/linkage metadata: .applied => status=applied, pending => active loop_id, and draft_hold => owner/review_date/hold_reason."
    inline: false
  - id: D158
    name: weekly-hygiene-calendar-lock
    category: process-hygiene
    gate_class: invariant
    description: Weekly hygiene cadence event parity in calendar.global with baseline freeze/runbook registration.
    severity: high
    ring: standard
    check_script: surfaces/verify/d158-weekly-hygiene-calendar-lock.sh
    fix_hint: "Restore spine-weekly-hygiene-cadence in calendar.global with WEEKLY schedule and required source contracts, and register freeze/runbook docs in docs/governance/_index.yaml."
    inline: false
  - id: D159
    name: weekly-execution-telemetry-lock
    category: process-hygiene
    gate_class: freshness
    description: Weekly execution telemetry contract, freshness, trends, and generated dashboard registration lock.
    severity: high
    ring: standard
    check_script: surfaces/verify/d159-weekly-execution-telemetry-lock.sh
    fix_hint: "Regenerate weekly telemetry artifacts, keep trend entries within contract cap, and register the telemetry dashboard path in docs/governance/_index.yaml."
    inline: false
  - id: D160
    name: plugin-pointer-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: Plugin ownership map and delegation pointer parity lock for project-owned plugin migration safety.
    severity: high
    ring: standard
    check_script: surfaces/verify/d160-plugin-pointer-parity-lock.sh
    fix_hint: "Ensure plugin.ownership.map.yaml parses, all project_owned plugins define target_repo/target_path, migrated targets exist, and pilot entries include proof receipts."
    inline: false
  - id: D161
    name: receipt-memory-domain-time-lock
    category: process-hygiene
    gate_class: invariant
    description: Receipt memory contract lock for domain metadata in receipt index and domain+time query surface parity.
    severity: high
    ring: standard
    check_script: surfaces/verify/d161-receipt-memory-domain-time-lock.sh
    fix_hint: "Rebuild receipt index via receipts.index.build, ensure index entries include domain/plane metadata, and restore receipts search/summary/trends domain filter plus session.start fast receipt memory hint output."
    inline: false
  - id: D162
    name: operator-smoothness-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce SSH identity normalization, strict secrets onboarding, deploy method governance coverage, and calendar operator surface freshness.
    severity: high
    ring: standard
    check_script: surfaces/verify/d162-operator-smoothness-lock.sh
    fix_hint: "Resolve runtime SSH user@host from bindings, keep secrets runway strict_unregistered_secret_keys=true, maintain deploy.method target/stack coverage, and regenerate calendar operator outputs."
    inline: false
  - id: D163
    name: workbench-ssh-attach-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce workbench SSH attach parity against spine ssh.targets and attach metadata.
    severity: high
    ring: instant
    check_script: surfaces/verify/d163-workbench-ssh-attach-parity-lock.sh
    fix_hint: "Normalize workbench ssh primary host aliases to spine ssh.targets ids and align .spine-link source_registry."
    inline: false
  - id: D164
    name: workbench-ssh-runtime-normalization-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce no forbidden runtime user@host hardcoding in governed workbench runtime surfaces.
    severity: high
    ring: instant
    check_script: surfaces/verify/d164-workbench-ssh-runtime-normalization-lock.sh
    fix_hint: "Replace direct root@/ubuntu@/automation@ runtime references with binding/alias-resolved SSH targets in governed surfaces."
    inline: false
  - id: D165
    name: workbench-secrets-onboarding-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce canonical secrets onboarding patterns and inventory integrity for governed workbench onboarding surfaces.
    severity: high
    ring: instant
    check_script: surfaces/verify/d165-workbench-secrets-onboarding-lock.sh
    fix_hint: "Remove direct infisical login/export and inline universal-auth login usage from governed onboarding scripts; burn down open high/critical inventory exceptions."
    inline: false
  - id: D166
    name: workbench-deploy-method-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce canonical deploy method governance for governed workbench deploy surfaces.
    severity: high
    ring: instant
    check_script: surfaces/verify/d166-workbench-deploy-method-lock.sh
    fix_hint: "Align governed docker-host deploy surfaces to deploy.method.contract canonical methods and remove direct docker lifecycle usage."
    inline: false
  - id: D167
    name: workbench-operator-surface-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce deterministic workbench operator calendar/status outputs and freshness constraints.
    severity: high
    ring: instant
    check_script: surfaces/verify/d167-workbench-operator-surface-lock.sh
    fix_hint: "Generate required operator calendar outputs and refresh stale operator surfaces to satisfy contract checks."
    inline: false
  - id: D169
    name: workbench-operator-smoke-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce workbench operator smoke suite execution as a required pack check.
    severity: high
    ring: standard
    check_script: surfaces/verify/d169-workbench-operator-smoke-lock.sh
    fix_hint: "Run workbench operator smoke suite directly, remediate failing checks, and re-run workbench verify pack."
    inline: false
  - id: D170
    name: workbench-proposals-preflight-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce deterministic workbench proposal preflight operator surfaces and dry-run forwarding readiness.
    severity: high
    ring: standard
    check_script: surfaces/verify/d170-workbench-proposals-preflight-lock.sh
    fix_hint: "Restore governed proposals-preflight operator script and Raycast wrapper, including required checks and --proposal dry-run forwarding."
    inline: false
  - id: D171
    name: timezone-ssot-lock
    category: ssot-hygiene
    gate_class: invariant
    description: Enforce that all governed timezone fields match the canonical SSOT in tenant.profile.yaml runtime.timezone.
    severity: high
    ring: standard
    check_script: surfaces/verify/d171-timezone-ssot-lock.sh
    fix_hint: "Update mismatched timezone fields to match ops/bindings/tenant.profile.yaml runtime.timezone value."
    inline: false
  - id: D173
    name: site-topology-parity-lock
    category: infra-hygiene
    gate_class: invariant
    description: Enforce canonical site topology parity against ssh targets, compose target bindings, and active vmid ranges.
    severity: high
    ring: standard
    check_script: surfaces/verify/d173-site-topology-parity-lock.sh
    fix_hint: "Register proxmox_alias values in ssh.targets.yaml, keep compose_targets aligned with docker.compose.targets.yaml, and ensure all active sites define vmid_range."
    inline: false
  - id: D174
    name: service-onboarding-parity-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce required onboarding homes, naming rules, owning agent parity, and deploy stack parity for active services.
    severity: high
    ring: standard
    check_script: surfaces/verify/d174-service-onboarding-parity-lock.sh
    fix_hint: "Fill all required onboarding fields, use canonical naming patterns, map owning_agent_id to agents.registry, and keep deploy_stack_id aligned with workbench stack-map."
    inline: false
  - id: D175
    name: operator-commitments-union-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce that operator commitments reference valid calendar, communications template, and escalation policy identifiers.
    severity: high
    ring: standard
    check_script: surfaces/verify/d175-operator-commitments-union-lock.sh
    fix_hint: "Update operator.commitments.contract.yaml to reference valid IDs from calendar.global, communications.templates.catalog, and communications.alerts escalation bindings."
    inline: false
  - id: D176
    name: platform-extension-transaction-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce required extension transaction contract fields, loop linkage, completion homes, and site/service target parity.
    severity: high
    ring: standard
    check_script: surfaces/verify/d176-platform-extension-transaction-lock.sh
    fix_hint: "Ensure each TXN file satisfies platform.extension.transaction.contract required keys, non-closed loop linkage, and no pending required_homes for approved/executed/closed statuses."
    inline: false
  - id: D177
    name: platform-extension-home-binding-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce required home reference parity for extension transactions and strict service home binding source-of-truth alignment.
    severity: high
    ring: standard
    check_script: surfaces/verify/d177-platform-extension-home-binding-lock.sh
    fix_hint: "Run platform.extension.bind to resolve required_homes refs and apply bindings so approved/executed/closed transactions have non-pending refs with service parity."
    inline: false
  - id: D178
    name: platform-extension-lifecycle-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce legal extension lifecycle transitions, status evidence requirements, and extension transaction index freshness parity.
    severity: high
    ring: standard
    check_script: surfaces/verify/d178-platform-extension-lifecycle-lock.sh
    fix_hint: "Use platform.extension.transition for legal status moves with required evidence and rebuild extension transaction index via platform.extension.index.build."
    inline: false
  - id: D179
    name: platform-extension-artifact-completeness-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce per-transaction extension plan and preflight artifact presence, schema completeness, and freshness by lifecycle status.
    severity: high
    ring: standard
    check_script: surfaces/verify/d179-platform-extension-artifact-completeness-lock.sh
    fix_hint: "Regenerate plan/preflight artifacts with platform.extension.plan and platform.extension.preflight and ensure preflight freshness windows are satisfied."
    inline: false
  - id: D180
    name: platform-extension-namespace-collision-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce extension namespace uniqueness, vmid range non-overlap, naming policy, and cross-reference parity across topology and onboarding bindings.
    severity: high
    ring: standard
    check_script: surfaces/verify/d180-platform-extension-namespace-collision-lock.sh
    fix_hint: "Run platform.extension.lint and resolve collisions, missing refs, invalid names, and active vmid overlaps before rerunning hygiene-weekly."
    inline: false
  - id: D181
    name: multisite-maintenance-transaction-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce contract-backed multisite maintenance transaction safety, site-aware VM order sourcing, checkpoint/resume flags, and explicit OOB risk acknowledgement path.
    severity: high
    ring: standard
    check_script: surfaces/verify/d181-multisite-maintenance-transaction-lock.sh
    fix_hint: "Restore infra.maintenance.transaction.contract.yaml fields, resolve VM lifecycle ordering from startup.sequencing.yaml, and keep infra-maintenance-window checkpoint/resume + ack-token enforcement in place."
    inline: false
  - id: D182
    name: maintenance-verify-resilience-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce policy-driven maintenance verify retries/timeouts, strict-exit wiring, and site-scoped preflight behavior for multisite maintenance windows.
    severity: high
    ring: standard
    check_script: surfaces/verify/d182-maintenance-verify-resilience-lock.sh
    fix_hint: "Define verify_policy dry_run/execute blocks in infra.maintenance.transaction.contract.yaml, wire strict-exit in docker/services status tools, and keep infra-maintenance-window verify logic site-scoped and contract-driven."
    inline: false
  - id: D183
    name: inventory-intake-schema-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce inventory intake envelope naming, schema completeness, and lifecycle enum parity for part/material onboarding.
    severity: high
    ring: standard
    check_script: surfaces/verify/d183-inventory-intake-schema-lock.sh
    fix_hint: "Regenerate or fix intake envelopes under mailroom/outbox/intake so ITK naming, required keys, and lifecycle values satisfy the intake schema."
    inline: false
  - id: D184
    name: inventory-location-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce inventory location parity so location_id references resolve in inventory.locations with matching site across intake and SSOT rows.
    severity: high
    ring: standard
    check_script: surfaces/verify/d184-inventory-location-parity-lock.sh
    fix_hint: "Align location_id and site values across intake/hardware/business inventory rows and register missing locations in inventory.locations.yaml."
    inline: false
  - id: D185
    name: inventory-home-union-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce required inventory homes, owner-agent parity, runbook existence, and conditional runtime-home requirements for runtime-touching items.
    severity: high
    ring: standard
    check_script: surfaces/verify/d185-inventory-home-union-lock.sh
    fix_hint: "Populate owner/site/location/evidence/runbook homes and fill runtime homes when touches_runtime=true for intake and inventory rows."
    inline: false
  - id: D186
    name: inventory-ledger-balance-lock
    category: process-hygiene
    gate_class: invariant
    description: Recompute inventory quantities from append-only ledger transactions and enforce parity with SSOT on_hand_qty values.
    severity: high
    ring: standard
    check_script: surfaces/verify/d186-inventory-ledger-balance-lock.sh
    fix_hint: "Append correcting receive/issue/adjust transactions in inventory.transaction.ledger.yaml and reconcile on_hand_qty values in inventory SSOT bindings."
    inline: false
  - id: D187
    name: inventory-item-contract-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce required inventory item metadata fields, lifecycle enum compliance, and counted timestamp validity for parts/materials.
    severity: high
    ring: standard
    check_script: surfaces/verify/d187-inventory-item-contract-lock.sh
    fix_hint: "Fill required inventory item contract metadata fields and correct lifecycle/timestamp values in hardware.parts.inventory.yaml and business.inventory.catalog.yaml."
    inline: false
  - id: D188
    name: network-device-ledger-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce strict parity between observed UniFi home/shop client feeds and curated network device ledger entries.
    severity: high
    ring: standard
    check_script: surfaces/verify/d188-network-device-ledger-parity-lock.sh
    fix_hint: "Reconcile ops/bindings/network.unifi.home.clients.observed.yaml and ops/bindings/network.unifi.shop.clients.observed.yaml to ops/bindings/network.devices.ledger.yaml with status approved|ignored and valid ignored expiry."
    inline: false
  - id: D189
    name: ha-device-ledger-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce strict parity between observed HA device map entries and curated HA device ledger entries.
    severity: high
    ring: standard
    check_script: surfaces/verify/d189-ha-device-ledger-parity-lock.sh
    fix_hint: "Add or reconcile observed HA devices in ops/bindings/ha.devices.ledger.yaml with status approved|ignored and valid ignored expiry."
    inline: false
  - id: D190
    name: ha-automation-ledger-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce strict parity between observed HA automations and curated HA automation ledger entries.
    severity: high
    ring: standard
    check_script: surfaces/verify/d190-ha-automation-ledger-parity-lock.sh
    fix_hint: "Add or reconcile observed HA automations in ops/bindings/ha.automations.ledger.yaml with status approved|ignored and valid ignored expiry."
    inline: false
  - id: D191
    name: media-content-ledger-parity-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce media movie/tv/music observed-to-ledger parity with a grace policy for newly observed unmanaged items.
    severity: high
    ring: standard
    check_script: surfaces/verify/d191-media-content-ledger-parity-lock.sh
    fix_hint: "Reconcile movie/tv/music item IDs from ops/bindings/media.content.snapshot.yaml into ops/bindings/media.content.ledger.yaml and clear unmanaged items older than the grace threshold."
    inline: false
  - id: D192
    name: media-content-snapshot-freshness-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce media content snapshot schema completeness and generated_at freshness before ledger parity runs.
    severity: high
    ring: standard
    check_script: surfaces/verify/d192-media-content-snapshot-freshness-lock.sh
    fix_hint: "Regenerate ops/bindings/media.content.snapshot.yaml via media-content-snapshot-refresh so required top-level keys, movies/tv/music item schema, and freshness policy pass."
    inline: false
  - id: D193
    name: ha-inventory-snapshot-completeness-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce unified HA inventory snapshot section completeness and generated_at freshness <= 24h.
    severity: high
    ring: standard
    check_script: surfaces/verify/d193-ha-inventory-snapshot-completeness-lock.sh
    fix_hint: "Run ha-inventory-snapshot-build and ensure devices/entities/scenes/dashboards/automations/addons/integrations/hacs_addons sections exist with fresh generated_at."
    inline: false
  - id: D194
    name: network-inventory-snapshot-parity-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce unified network inventory snapshot parity to observed home/shop devices, IP presence parity, and generated_at freshness <= 24h.
    severity: high
    ring: standard
    check_script: surfaces/verify/d194-network-inventory-snapshot-parity-lock.sh
    fix_hint: "Run network-inventory-snapshot-build and reconcile home/shop observed device rows so every observed ID exists in snapshot with IP populated when source has IP."
    inline: false
  - id: D195
    name: domain-authority-boundary-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce canonical mintprints/ronny/hypno/spine-comms/microsoft-provider authority zones and non-overlapping owning domains.
    severity: high
    ring: standard
    check_script: surfaces/verify/d195-domain-authority-boundary-lock.sh
    fix_hint: "Restore ops/bindings/domain.authority.boundary.yaml required zones and enforce non-overlapping owning_domains assignments."
    inline: false
  - id: D196
    name: microsoft-provider-write-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce microsoft provider manual-only routing and block non-control terminal exposure of microsoft mutating capabilities.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d196-microsoft-provider-write-lock.sh
    fix_hint: "Keep providers.microsoft execution_mode manual-only, remove microsoft routing targets, and remove microsoft mutating caps from non-control terminal catalogs."
    inline: false
  - id: D197
    name: calendar-provider-readonly-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce provider-readonly calendar sync contract with local writable store and zero push-write capabilities.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d197-calendar-provider-readonly-lock.sh
    fix_hint: "Set local_calendar_store.path to mailroom/state/calendar-sync/writable and keep sync_contracts.push_write_capabilities empty."
    inline: false
  - id: D200
    name: domain-canonical-roots-lock
    category: ssot-hygiene
    gate_class: invariant
    description: Domain portfolio and migration plans must only reference canonical roots defined in domain.canonical.roots.yaml.
    severity: high
    ring: standard
    check_script: surfaces/verify/d200-domain-canonical-roots-lock.sh
    fix_hint: "Remove non-canonical domain roots from domain.portfolio.registry.yaml and docs/governance W49 migration artifacts. Only mintprints.com, mintprints.co, ronny.works are canonical."
    inline: false
  - id: D201
    name: domain-registrar-parity-lock
    category: ssot-hygiene
    gate_class: freshness
    description: Canonical domains must have registrar snapshot with lock status, nameservers, and expiry fields present.
    severity: medium
    ring: standard
    check_script: surfaces/verify/d201-domain-registrar-parity-lock.sh
    fix_hint: "Run domains.namecheap.status to generate registrar snapshot, then verify all canonical domains have registrar_lock, nameservers, and expiry_date fields."
    inline: false
  - id: D202
    name: domain-transfer-readiness-lock
    category: ssot-hygiene
    gate_class: freshness
    description: Domains marked transfer_ready must have Cloudflare nameservers active in registrar snapshot. Prevents premature registrar transfer.
    severity: high
    ring: standard
    check_script: surfaces/verify/d202-domain-transfer-readiness-lock.sh
    fix_hint: "Do not mark a domain transfer_ready=true until its nameservers point to Cloudflare. For mintprints.com, migrate DNS from Namecheap to Cloudflare first."
    inline: false
  - id: D198
    name: calendar-home-runtime-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce local calendar home contract parity with workbench communications-calendar stack mapping and ingest safety controls.
    severity: high
    ring: standard
    check_script: surfaces/verify/d198-calendar-home-runtime-lock.sh
    fix_hint: "Restore calendar.home.contract required fields and keep workbench communications-calendar stack mapping aligned to VM 214 runtime home."
    inline: false
  - id: D199
    name: calendar-home-provider-boundary-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce local-only calendar write boundary and block Microsoft provider writes for calendar home flows.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d199-calendar-home-provider-boundary-lock.sh
    fix_hint: "Keep calendar writes local-only via calendar.home.event.create, preserve empty Microsoft calendar push caps, and prevent non-control terminal write exposure."
    inline: false
  - id: D203
    name: external-provider-readonly-lock
    category: process-hygiene
    gate_class: invariant
    description: Fail if any iCloud/Google/Microsoft write capability is exposed in non-control paths; enforce provider read-only boundary.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d203-calendar-external-secrets-lock.sh
    fix_hint: "Keep iCloud/Google ingest read-only, block write capabilities from non-control terminal roles/workers, and keep Microsoft write path locked."
    inline: false
  - id: D204
    name: external-provider-secrets-materialization-lock
    category: process-hygiene
    gate_class: invariant
    description: Fail if required Infisical refs or required external provider contract fields are missing.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d204-calendar-external-ingest-readonly-lock.sh
    fix_hint: "Restore calendar.external.providers.contract required iCloud/Google Infisical refs and ingest contract fields."
    inline: false
  - id: D205
    name: calendar-home-union-ingest-lock
    category: process-hygiene
    gate_class: freshness
    description: Fail if external provider snapshots cannot normalize into calendar-home union schema/location with immutable external layers.
    severity: high
    ring: standard
    check_script: surfaces/verify/d205-calendar-external-snapshot-freshness-lock.sh
    fix_hint: "Run calendar.external.ingest.refresh and ensure snapshots, union index, and external layer manifests are generated in canonical calendar-home paths."
    inline: false
  - id: D206
    name: calendar-ha-readonly-boundary-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce Home Assistant calendar ingest as read-only with provider writeback disabled and no HA calendar mutating capabilities.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d206-calendar-ha-readonly-boundary-lock.sh
    fix_hint: "Keep calendar.ha ingest in read-only mode, disable writeback, and remove any mutating calendar.ha capability exposure."
    inline: false
  - id: D207
    name: calendar-ha-contract-materialization-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce HA calendar ingest contract input/output parity across calendar.ha, calendar.home, and calendar.sync bindings.
    severity: high
    ring: standard
    check_script: surfaces/verify/d207-calendar-ha-contract-materialization-lock.sh
    fix_hint: "Restore calendar.ha.ingest.contract required source/feeds/output/merge fields and keep home/sync contract references aligned."
    inline: false
  - id: D208
    name: calendar-ha-snapshot-freshness-lock
    category: process-hygiene
    gate_class: freshness
    description: Enforce HA calendar snapshot/index freshness and local union layer manifest parity.
    severity: high
    ring: standard
    check_script: surfaces/verify/d208-calendar-ha-snapshot-freshness-lock.sh
    fix_hint: "Run calendar.ha.ingest.refresh and ensure HA snapshot/index plus external_home_assistant layer manifest are fresh and schema-complete."
    inline: false
  - id: D209
    name: communications-tls-health-lock
    category: infra-hygiene
    gate_class: invariant
    description: Enforce Stalwart TLS certificate availability and minimum expiry across IMAPS, SMTPS, STARTTLS, and HTTPS endpoints.
    severity: high
    ring: standard
    check_script: surfaces/verify/d209-communications-tls-health-lock.sh
    fix_hint: "Verify Stalwart ACME config is active and Let's Encrypt certificates are issued for mail.spine.ronny.works. Run communications.tls.status for diagnostics."
    inline: false
  - id: D210
    name: domain-change-request-schema-lock
    category: ssot-hygiene
    gate_class: invariant
    description: Every domain change request YAML must include all required fields from domain.change.request.schema.yaml.
    severity: high
    ring: standard
    check_script: surfaces/verify/d210-domain-change-request-schema-lock.sh
    fix_hint: "Populate all required fields in mailroom/outbox/domains/change-requests/*.yaml using TEMPLATE.domain-change.yaml and schema required_fields."
    inline: false
  - id: D211
    name: domain-change-plan-completeness-lock
    category: ssot-hygiene
    gate_class: invariant
    description: Every domain change request must include non-empty prechecks, postchecks, rollback_steps, and success_criteria.
    severity: high
    ring: standard
    check_script: surfaces/verify/d211-domain-change-plan-completeness-lock.sh
    fix_hint: "Ensure each change request has non-empty prechecks, postchecks, rollback_steps, and success_criteria before planning/execution."
    inline: false
  - id: D212
    name: secrets-runtime-namespace-lock
    category: secrets-hygiene
    gate_class: invariant
    description: Live namespace enforcement must be strict OK with root path hard-zero and governed key placement.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d212-secrets-runtime-namespace-lock.sh
    fix_hint: "Run secrets.namespace.status, remove all root-path keys, and restore /spine/* key placement before rerunning."
    inline: false
  - id: D213
    name: secrets-registered-route-lock
    category: secrets-hygiene
    gate_class: freshness
    description: Canonical infisical-agent must fail closed for unregistered infrastructure/prod keys and deny root path fallback.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d213-secrets-registered-route-lock.sh
    fix_hint: "Ensure infisical-agent resolves infrastructure/prod keys through registered policy routes only and guards get/set/delete/cached paths."
    inline: false
  - id: D214
    name: secrets-deprecated-alias-lock
    category: secrets-hygiene
    gate_class: invariant
    description: Deprecated secret aliases must remain banned from canonical bundle routes and runtime/governance references.
    severity: high
    ring: standard
    check_script: surfaces/verify/d214-secrets-deprecated-alias-lock.sh
    fix_hint: "Replace deprecated aliases with canonical keys in contracts/docs/runtime surfaces and keep aliases listed as forbidden root keys."
    inline: false
  - id: D215
    name: mintprints-tunnel-ingress-lock
    category: domain-drift
    gate_class: freshness
    description: Enforce mintprints.com tunnel ingress rules (apex, www, customer) exist with correct service target (quote-page:3341).
    severity: high
    ring: standard
    check_script: surfaces/verify/d215-mintprints-tunnel-ingress-lock.sh
    fix_hint: "Run cloudflare.tunnel.ingress.set to restore missing ingress rules for mintprints.com hostnames."
    inline: false
  - id: D216
    name: mintprints-mail-dns-parity-lock
    category: domain-drift
    gate_class: invariant
    description: Enforce mintprints.com Microsoft 365 mail DNS records unchanged (MX, SPF, DKIM selector1/selector2/default, DMARC, autodiscover).
    severity: critical
    ring: standard
    check_script: surfaces/verify/d216-mintprints-mail-dns-parity-lock.sh
    fix_hint: "Verify Cloudflare DNS for mintprints.com zone — restore any missing or changed mail records from W56 baseline."
    inline: false
  - id: D217
    name: mintprints-co-tunnel-ingress-lock
    category: domain-drift
    gate_class: invariant
    description: Enforce mintprints.co tunnel ingress rules (12 hostnames) exist with correct service targets for all mint-os services.
    severity: high
    ring: standard
    check_script: surfaces/verify/d217-mintprints-co-tunnel-ingress-lock.sh
    fix_hint: "Run cloudflare.tunnel.ingress.set to restore missing ingress rules for mintprints.co hostnames."
    inline: false
  - id: D218
    name: mintprints-co-mail-dns-parity-lock
    category: domain-drift
    gate_class: invariant
    description: Enforce mintprints.co Resend transactional email and Stalwart spine mail DNS records unchanged (3 MX, 4 SPF/DKIM TXT, 2 DMARC, 1 A for Stalwart).
    severity: critical
    ring: standard
    check_script: surfaces/verify/d218-mintprints-co-mail-dns-parity-lock.sh
    fix_hint: "Verify Cloudflare DNS for mintprints.co zone — restore any missing or changed mail records for Resend and Stalwart."
    inline: false
  - id: D219
    name: hantash-mail-dns-parity-lock
    category: domain-drift
    gate_class: invariant
    description: Enforce hantash.com iCloud custom domain mail DNS records unchanged (MX mx01/mx02, DKIM sig1 CNAME, SPF, apple-domain verification).
    severity: critical
    ring: standard
    check_script: surfaces/verify/d219-hantash-mail-dns-parity-lock.sh
    fix_hint: "Verify Cloudflare DNS for hantash.com zone — restore any missing or changed iCloud mail records."
    inline: false
  - id: D220
    name: media-recyclarr-language-enforcement-lock
    category: media-hygiene
    gate_class: freshness
    description: Enforce language custom formats (Not English, Not Original) scored at -10000 in all *arr Recyclarr service sections to prevent non-English media grabs.
    severity: high
    ring: standard
    check_script: surfaces/verify/d220-media-recyclarr-language-enforcement-lock.sh
    fix_hint: "Add language custom formats to missing *arr sections in workbench/agents/media/config/recyclarr.yml and run recyclarr.sync."
    inline: false
  - id: D221
    name: stalwart-mail-dns-parity-lock
    category: domain-drift
    gate_class: invariant
    description: Enforce spine.ronny.works Stalwart mail DNS records unchanged (A mail host, MX, SPF, DKIM, DMARC) plus ronny.works apex anti-spoofing (SPF -all, DMARC reject).
    severity: critical
    ring: standard
    check_script: surfaces/verify/d221-stalwart-mail-dns-parity-lock.sh
    fix_hint: "Verify Cloudflare DNS for ronny.works zone — restore any missing or changed Stalwart mail records or apex anti-spoofing records."
    inline: false
  - id: D222
    name: quote-alert-provider-boundary-lock
    category: process-hygiene
    gate_class: invariant
    description: Enforce quote-created alerts to stay on Resend with info@mintprints.com destination and block Microsoft/Stalwart routing drift.
    severity: critical
    ring: standard
    check_script: surfaces/verify/d222-quote-alert-provider-boundary-lock.sh
    fix_hint: "Keep communications.providers quote_created route on resend and ensure live n8n workflow A01 remains resend-only (no microsoft/stalwart surfaces)."
    inline: false
  - id: D223
    name: media-vpn-routing-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce canonical Privado VPN routing in media stack: gluetun healthy, slskd tunneled via gluetun, and qBittorrent route matching vpn.provider policy."
    severity: high
    ring: standard
    check_script: surfaces/verify/d223-media-vpn-routing-lock.sh
    fix_hint: "Align ops/bindings/vpn.provider.yaml, download-stack compose network modes, and live container routing/health for gluetun/slskd/qBittorrent."
    inline: false
  - id: D224
    name: media-secrets-canonical-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce canonical secret placement for media stacks: compose vars registered in policy, keys route to infrastructure project at /spine/vm-infra/media-stack/{download|streaming}, no legacy media-stack project fallback for active keys, SSH targets wired."
    severity: high
    ring: instant
    check_script: surfaces/verify/d224-media-secrets-canonical-lock.sh
    fix_hint: "Register compose secret vars in secrets.namespace.policy.yaml key_path_overrides and secrets.runway.contract.yaml key_overrides. Migrate stack_defaults from legacy media-stack project to infrastructure project."
    inline: false
  - id: D225
    name: mint-live-before-auth-lock
    category: process-hygiene
    gate_class: freshness
    description: "Fail-closed sequencing lock: EQ-1 auth work remains deferred until live module health, contract parity, and agent smoke checks are green."
    severity: critical
    ring: standard
    check_script: surfaces/verify/d225-mint-live-before-auth-lock.sh
    fix_hint: "Run mint.live.baseline.status to identify failing prerequisite checks. Keep EQ-1 marked BLOCKED_BY_D225 until all prerequisites are green."
    inline: false
  - id: D226
    name: mint-live-claim-stamp-lock
    category: doc-hygiene
    gate_class: invariant
    description: "Fail-closed lock: block Mint live/verified wording unless canonical runtime-truth and Ronny stamp policy references are present."
    severity: high
    ring: standard
    check_script: surfaces/verify/d226-mint-live-claim-stamp-lock.sh
    fix_hint: "Reference MINT_RUNTIME_TRUTH_CANONICAL_20260225.md and apply claim status taxonomy before asserting live state."
    inline: false
  - id: D227
    name: mint-no-legacy-authority-lock
    category: process-hygiene
    gate_class: invariant
    description: "Fail-closed lock: ensure docker-host and ronny-ops are treated as LEGACY_ONLY/reference-only, never authoritative runtime truth."
    severity: high
    ring: standard
    check_script: surfaces/verify/d227-mint-no-legacy-authority-lock.sh
    fix_hint: "Mark docker-host module-equivalent stacks as non-authoritative and keep legacy endpoints disabled in runtime authority surfaces."
    inline: false
  - id: D228
    name: jellyfin-introskipper-config-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce safe IntroSkipper plugin settings: AutoDetectIntros=false (prevents re-analysis loop), AnalyzeMovies=false (no wasteful NFS reads), MaxParallelism<=2, unnecessary scan modes (Recap/Preview/Commercial) disabled."
    severity: high
    ring: standard
    check_script: surfaces/verify/d228-jellyfin-introskipper-config-lock.sh
    fix_hint: "SSH to streaming-stack, edit /config/plugins/configurations/IntroSkipper.xml inside jellyfin container. Set AutoDetectIntros=false, AnalyzeMovies=false, ScanRecap/Preview/Commercial=false, MaxParallelism<=2. Restart Jellyfin."
    inline: false
  - id: D229
    name: media-nfs-io-health-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce NFS I/O health on both media VMs: metadata latency <2s, zero retransmit growth, read ops responding."
    severity: high
    ring: standard
    check_script: surfaces/verify/d229-media-nfs-io-health-lock.sh
    fix_hint: "Check NFS mount latency and retransmit stats on download-stack and streaming-stack. Investigate NFS server load, network issues, or concurrent I/O contention (IntroSkipper, library scans)."
    inline: false
  - id: D230
    name: lidarr-root-folder-health-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce Lidarr root folder accessibility and no RootFolderCheck health errors on download-stack."
    severity: high
    ring: standard
    check_script: surfaces/verify/d230-lidarr-root-folder-health-lock.sh
    fix_hint: "Verify Lidarr root folder path exists and is accessible. Check Settings > Media Management > Root Folders in Lidarr UI. Ensure NFS mount is healthy and path matches /media/music (not /music)."
    inline: false
  - id: D231
    name: media-docker-network-parity-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce Lidarr container attached to both music-net and default compose network for cross-service connectivity."
    severity: high
    ring: standard
    check_script: surfaces/verify/d231-media-docker-network-parity-lock.sh
    fix_hint: "Add music-net to Lidarr networks in docker-compose.yaml and run docker compose up -d. Verify Lidarr can resolve sabnzbd (default network) and slskd (music-net)."
    inline: false
  - id: D232
    name: media-sqlite-storage-lock
    category: media-hygiene
    gate_class: freshness
    description: "Enforce slskd SQLite databases reside on local storage, not NFS. NFS causes WAL/lock corruption and database locks."
    severity: high
    ring: standard
    check_script: surfaces/verify/d232-media-sqlite-storage-lock.sh
    fix_hint: "Move slskd data volume to a local Docker volume or local bind mount. Do not place SQLite .db files on NFS mounts. Restart slskd after volume change."
    inline: false
  - id: D233
    name: communications-mail-archiver-nonboot-storage-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Enforce mail-archiver high-write paths on communications-stack are bind-mounted to /srv/mail-archiver (non-boot disk) and never boot-backed overlay."
    severity: high
    ring: standard
    check_script: surfaces/verify/d233-communications-mail-archiver-nonboot-storage-lock.sh
    fix_hint: "On communications-stack, bind /app/uploads, /tmp, and /var/lib/postgresql/data to /srv/mail-archiver/* paths in compose, then recreate containers and verify mount source device differs from root filesystem."
    inline: false
  - id: D234
    name: infra-boot-drive-usage-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Enforce boot drive usage below 80% on all active shop-site VMs. Validates storage placement policy exists and violations have gap entries."
    severity: high
    ring: standard
    check_script: surfaces/verify/d234-infra-boot-drive-usage-lock.sh
    fix_hint: "Check boot drive usage on failing VMs with df -h /. Attach ZFS zvol or NFS mount for persistent data per infra.storage.placement.policy.yaml. Move Docker volumes/bind-mounts to non-boot storage."
    inline: false
  - id: D235
    name: infra-storage-placement-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Report/enforce docker-root placement drift against storage placement policy and ensure STOR-002/STOR-004 remain clustered as docker-root-on-boot."
    severity: high
    ring: standard
    check_script: surfaces/verify/d235-infra-storage-placement-lock.sh
    fix_hint: "Align vm_storage target tiers with observed docker-root placement and keep STOR mapping cluster invariants synchronized."
    inline: false
  - id: D236
    name: mint-data-persistence-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Report/enforce mint-data persistence contracts for postgres/minio/redis mounts and Redis durability settings."
    severity: high
    ring: instant
    check_script: surfaces/verify/d236-mint-data-persistence-lock.sh
    fix_hint: "Ensure mint-data containers are running, persistent mounts resolve to expected storage tier, and Redis durability posture matches contract policy."
    inline: false
  - id: D237
    name: docker-root-budget-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Report/enforce root and docker footprint budgets for mint-data and mint-apps to catch image/build-cache and local-volume bloat."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d237-docker-root-budget-lock.sh
    fix_hint: "Reduce docker footprint per policy thresholds or move persistent usage to non-boot storage tiers before enforcing."
    inline: false
  - id: D238
    name: mint-apps-write-surface-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Report/enforce mint-apps temp/upload write-surface governance and container writable-layer budget limits."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d238-mint-apps-write-surface-lock.sh
    fix_hint: "Govern app temp/upload surfaces with bind/named mounts and reduce container writable layer growth beyond threshold."
    inline: false
  - id: D239
    name: storage-audit-snapshot-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Validate read-only storage snapshot wrapper emits deterministic STOR-001..STOR-008 findings with governance linkage payload."
    severity: medium
    ring: deep
    check_script: surfaces/verify/d239-storage-audit-snapshot-lock.sh
    fix_hint: "Restore snapshot wrapper output schema and ensure governance mapping is present for all STOR findings."
    inline: false
  - id: D240
    name: media-import-list-policy-lock
    category: media-hygiene
    gate_class: invariant
    description: "Enforce Radarr import list policy: tier tags required, banned TMDb keyword/company types blocked, fill-later uses archive root."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d240-media-import-list-policy-lock.sh
    fix_hint: "Add tier tags to untagged import lists, disable banned TMDb keyword/company lists, set fill-later lists to archive root and monitor=none."
    inline: false
  - id: D241
    name: mint-legacy-authority-lock
    category: process-hygiene
    gate_class: invariant
    description: "Report/enforce mint authority lock so mint capabilities/probes stay pinned to mint-apps and mint-data."
    severity: high
    ring: standard
    check_script: surfaces/verify/d241-mint-legacy-authority-lock.sh
    fix_hint: "Restore mint probe/capability authority to VM212/VM213 and keep mint command surfaces on ops/plugins/mint."
    inline: false
  - id: D242
    name: mint-legacy-path-lock
    category: process-hygiene
    gate_class: invariant
    description: "Report/enforce no ronny-ops legacy runtime paths in active mint capability commands and mint plugin scripts."
    severity: high
    ring: standard
    check_script: surfaces/verify/d242-mint-legacy-path-lock.sh
    fix_hint: "Remove ronny-ops path references from mint capability/plugin runtime surfaces."
    inline: false
  - id: D243
    name: mint-legacy-ingress-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Report/enforce legacy ingress hold semantics for docker-host mint stacks and disabled legacy mint probes."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d243-mint-legacy-ingress-lock.sh
    fix_hint: "Preserve legacy-only/non-authoritative compose flags and keep legacy mint endpoints disabled with hold semantics."
    inline: false
  - id: D244
    name: mint-legacy-data-ice-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Report/enforce VM200 legacy-data-ice classification and required legacy data service preservation without mint authority promotion."
    severity: medium
    ring: deep
    check_script: surfaces/verify/d244-mint-legacy-data-ice-lock.sh
    fix_hint: "Keep VM200 lifecycle/data services/backup targets aligned to hold-state and keep mint probes on VM212/VM213."
    inline: false
  - id: D245
    name: mint-secrets-inventory-lock
    category: secrets-hygiene
    gate_class: invariant
    description: "Validate W45 mint secrets inventory contract completeness for shipping/payment/notifications."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d245-mint-secrets-inventory-lock.sh
    fix_hint: "Restore mint.secrets.promotion.contract.yaml module inventory, runtime config paths, and source contract bindings."
    inline: false
  - id: D246
    name: mint-secrets-alias-drift-lock
    category: secrets-hygiene
    gate_class: invariant
    description: "Report/enforce runtime env alias mapping drift for mint shipping/payment/notifications modules."
    severity: high
    ring: standard
    check_script: surfaces/verify/d246-mint-secrets-alias-drift-lock.sh
    fix_hint: "Align runtime env keys to canonical module-scoped secret aliases in mint.secrets.promotion.contract.yaml."
    inline: false
  - id: D247
    name: mint-shipping-secrets-contract-lock
    category: secrets-hygiene
    gate_class: invariant
    description: "Report/enforce shipping secret route parity across W45 promotion contract, namespace policy, and runway contract."
    severity: high
    ring: standard
    check_script: surfaces/verify/d247-mint-shipping-secrets-contract-lock.sh
    fix_hint: "Align SHIPPING_* canonical keys and namespace routes between mint promotion and secrets contracts."
    inline: false
  - id: D248
    name: mint-payment-secrets-contract-lock
    category: secrets-hygiene
    gate_class: invariant
    description: "Report/enforce payment secret route parity across W45 promotion contract, namespace policy, and runway contract."
    severity: high
    ring: standard
    check_script: surfaces/verify/d248-mint-payment-secrets-contract-lock.sh
    fix_hint: "Align PAYMENT_* canonical keys and namespace routes between mint promotion and secrets contracts."
    inline: false
  - id: D249
    name: mint-notifications-secrets-contract-lock
    category: secrets-hygiene
    gate_class: invariant
    description: "Report/enforce notifications secret route parity and communications provider dependency routing."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d249-mint-notifications-secrets-contract-lock.sh
    fix_hint: "Align NOTIFICATIONS_* keys and communications provider routes between mint promotion and secrets contracts."
    inline: false
  - id: D250
    name: mint-secrets-promotion-readiness-lock
    category: process-hygiene
    gate_class: invariant
    description: "Guard report-to-enforce promotion for D245-D249 with explicit three-run clean evidence."
    severity: medium
    ring: deep
    check_script: surfaces/verify/d250-mint-secrets-promotion-readiness-lock.sh
    fix_hint: "Record three clean report runs in W45E cert artifact and promote default policy to enforce only after zero-finding evidence."
    inline: false
  - id: D251
    name: nightly-closeout-lifecycle-lock
    category: process-hygiene
    gate_class: invariant
    description: "Enforce canonical nightly closeout lifecycle wiring across contract, capability map, routing, and governance references."
    severity: high
    ring: standard
    check_script: surfaces/verify/d251-nightly-closeout-lifecycle-lock.sh
    fix_hint: "Repair nightly.closeout contract/capability/routing bindings and required governance receipt templates before rerunning."
    inline: false
  - id: D252
    name: container-oom-exit-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Report/enforce W52 containment contract coverage for container OOM exit classification, containment, and escalation routing policy."
    severity: high
    ring: standard
    check_script: surfaces/verify/d252-container-oom-exit-lock.sh
    fix_hint: "Populate and maintain D252 control in W52 contract with linked gap, report-mode posture, and explicit enforce-promotion criteria."
    inline: false
  - id: D253
    name: service-health-state-aware-lock
    category: process-hygiene
    gate_class: freshness
    description: "Report/enforce W52 containment contract coverage for state-aware service health semantics (expected-stopped vs expected-running)."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d253-service-health-state-aware-lock.sh
    fix_hint: "Maintain D253 policy criteria so health checks distinguish intentional stop state from degraded expected-running state before enforce promotion."
    inline: false
  - id: D254
    name: image-age-budget-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Report/enforce W52 containment contract coverage for image freshness budgets and stale-image escalation policy."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d254-image-age-budget-lock.sh
    fix_hint: "Keep D254 linked to MinIO stale-image findings with explicit thresholds and enforce-promotion evidence in mapping artifacts."
    inline: false
  - id: D255
    name: md1400-capacity-monitor-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Report/enforce W52 containment contract coverage for MD1400 capacity visibility, threshold policy, and guard criteria."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d255-md1400-capacity-monitor-lock.sh
    fix_hint: "Codify MD1400 baseline and threshold criteria in D255 before enabling enforce mode."
    inline: false
  - id: D256
    name: credential-spof-lock
    category: secrets-hygiene
    gate_class: freshness
    description: "Report/enforce W52 containment contract coverage for credential SPOF reduction, break-glass flow, and operator redundancy criteria."
    severity: high
    ring: deep
    check_script: surfaces/verify/d256-credential-spof-lock.sh
    fix_hint: "Maintain D256 control with auditable redundancy and escalation criteria before enforce promotion."
    inline: false
  - id: D257
    name: media-capacity-guard-lock
    category: media-hygiene
    gate_class: freshness
    description: "Report/enforce media pool capacity governance with ownership and stale-drift checks."
    severity: high
    ring: standard
    check_script: surfaces/verify/d257-media-capacity-guard-lock.sh
    fix_hint: "Keep media capacity below WARN, link an open owning gap/loop when WARN/FAIL, and attach downward trend evidence before stale threshold."
    inline: false
  - id: D258
    name: ssh-lifecycle-cross-registry-parity-lock
    category: ssot-hygiene
    gate_class: invariant
    description: "Enforce active shop VM parity across vm.lifecycle ssh_target/tailscale_ip, ssh.targets host, SERVICE_REGISTRY hosts, and workbench ssh attach contract anchors."
    severity: high
    ring: standard
    check_script: surfaces/verify/d258-ssh-lifecycle-cross-registry-parity-lock.sh
    fix_hint: "Keep vm.lifecycle, ssh.targets, and SERVICE_REGISTRY in lockstep for active shop VMs and preserve canonical workbench attach contract anchors."
    inline: false
  - id: D259
    name: onboarding-canonical-registration-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Require canonical SSH + Tailscale registration before shop VM lifecycle can be registered/active."
    severity: high
    ring: standard
    check_script: surfaces/verify/d259-onboarding-canonical-registration-lock.sh
    fix_hint: "Before status registered/active, ensure vm.lifecycle tailscale_ip + ssh_target are populated and parity-linked to ssh.targets and SERVICE_REGISTRY hosts."
    inline: false
  - id: D260
    name: noninteractive-monitor-access-lock
    category: process-hygiene
    gate_class: invariant
    description: "Ensure machine monitor surfaces remain non-interactive and forbid interactive Tailscale SSH transport paths."
    severity: high
    ring: standard
    check_script: surfaces/verify/d260-noninteractive-monitor-access-lock.sh
    fix_hint: "Machine monitor transport must use approved non-interactive modes only; interactive tailscale ssh paths are forbidden."
    inline: false
  - id: D261
    name: auth-loop-blocked-auth-guard-lock
    category: process-hygiene
    gate_class: invariant
    description: "Require auth-challenge detection to classify lane state BLOCKED_AUTH and stop retries."
    severity: high
    ring: standard
    check_script: surfaces/verify/d261-auth-loop-blocked-auth-guard-lock.sh
    fix_hint: "Monitor wrappers must detect auth URL/additional-check patterns, emit BLOCKED_AUTH, and set retry_allowed=false."
    inline: false
  - id: D262
    name: ssh-tailscale-duplicate-truth-lock
    category: ssot-hygiene
    gate_class: invariant
    description: "Detect duplicate or undocumented truth paths for tailscale IPs, ssh target hosts, and hostname-to-target aliasing."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d262-ssh-tailscale-duplicate-truth-lock.sh
    fix_hint: "Keep host/tailscale mappings unique and explicitly document any hostname-to-ssh_target override in lifecycle contract."
    inline: false
  - id: D263
    name: governance-audits-write-target-lock
    category: process-hygiene
    gate_class: invariant
    description: "Block runtime write-target drift back into docs/governance/_audits; canonical output path is receipts/audits/governance."
    severity: high
    ring: standard
    check_script: surfaces/verify/d263-governance-audits-write-target-lock.sh
    fix_hint: "Update emitter contracts/scripts to receipts/audits/governance and keep docs/governance/_audits as historical/tombstoned surface only."
    inline: false
  - id: D264
    name: worktree-root-lock
    category: git-hygiene
    gate_class: invariant
    description: "Enforce canonical worktree root policy (~/.wt) and block legacy .worktrees/waves defaults."
    severity: high
    ring: standard
    check_script: surfaces/verify/d264-worktree-root-lock.sh
    fix_hint: "Keep canonical_worktree_root and wave/session defaults pinned to ~/.wt layout; remove legacy .worktrees/waves references."
    inline: false
  - id: D265
    name: active-lease-delete-lock
    category: git-hygiene
    gate_class: invariant
    description: "Block worktree delete flows when an active lease exists."
    severity: high
    ring: standard
    check_script: surfaces/verify/d265-active-lease-delete-lock.sh
    fix_hint: "Require active lease guard in cleanup path and close lifecycle owner before delete."
    inline: false
  - id: D266
    name: archive-before-delete-lock
    category: git-hygiene
    gate_class: invariant
    description: "Enforce report-only -> archive-only -> delete cleanup lifecycle with archive manifest gate."
    severity: high
    ring: standard
    check_script: surfaces/verify/d266-archive-before-delete-lock.sh
    fix_hint: "Run cleanup in three phases and require archive evidence before delete."
    inline: false
  - id: D267
    name: branch-merged-or-explicit-token-lock
    category: git-hygiene
    gate_class: invariant
    description: "Require merged branch or explicit token gate before destructive cleanup."
    severity: high
    ring: standard
    check_script: surfaces/verify/d267-branch-merged-or-explicit-token-lock.sh
    fix_hint: "Block delete unless branch is merged to main or explicit cleanup token is provided."
    inline: false
  - id: D268
    name: resend-mcp-transactional-send-authority-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Enforce that transactional email send authority remains spine-only. Resend MCP send_email and batch_send_emails must be classified as forbidden in coexistence policy."
    severity: high
    ring: deep
    check_script: surfaces/verify/d268-resend-mcp-transactional-send-authority-lock.sh
    fix_hint: "Ensure expansion contract declares spine as transactional send owner with strict enforcement, and MCP coexistence policy classifies send_email as FORBIDDEN."
    inline: false
  - id: D269
    name: communications-resend-webhook-schema-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Enforce that Resend webhook event schema requirements are documented in expansion contract before any webhook ingest surface is wired."
    severity: medium
    ring: deep
    check_script: surfaces/verify/d269-communications-resend-webhook-schema-lock.sh
    fix_hint: "Ensure expansion contract inbound section defines webhook_events list and webhook_schema_requirements with at least sent/delivered/bounced/complained events."
    inline: false
  - id: D270
    name: communications-contacts-governance-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Enforce that contacts lifecycle governance requires manual approval, rate guards, and suppression enforcement before any contact mutations are enabled."
    severity: medium
    ring: deep
    check_script: surfaces/verify/d270-communications-contacts-governance-lock.sh
    fix_hint: "Ensure expansion contract contacts section has safety requirements including manual approval, rate guard, and suppression list enforcement."
    inline: false
  - id: D271
    name: communications-broadcast-governance-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Enforce that broadcast campaign governance requires manual approval, rate guards, budget limits, and suppression enforcement before any broadcast sends are enabled."
    severity: high
    ring: deep
    check_script: surfaces/verify/d271-communications-broadcast-governance-lock.sh
    fix_hint: "Ensure expansion contract broadcasts section has safety requirements including manual approval for sends, rate guard, budget guard, suppression enforcement, and unsubscribe link."
    inline: false
  - id: D272
    name: n8n-resend-direct-bypass-lock
    category: process-hygiene
    gate_class: invariant
    description: "Detect and report n8n workflows that call Resend API directly, bypassing spine governed preview-execute flow. Reports if bypass is documented with gap reference."
    severity: high
    ring: deep
    check_script: surfaces/verify/d272-n8n-resend-direct-bypass-lock.sh
    fix_hint: "Migrate n8n Resend HTTP nodes to official Resend n8n node or spine capability call. If bypass remains, document in expansion contract with gap reference."
    inline: false
  - id: D273
    name: communications-resend-expansion-contract-parity-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Enforce that Resend expansion contract and MCP coexistence policy exist, contain all required sections, and are internally consistent."
    severity: high
    ring: deep
    check_script: surfaces/verify/d273-communications-resend-expansion-contract-parity-lock.sh
    fix_hint: "Ensure both expansion contract and MCP coexistence policy exist with all required sections, correct gate references, and forbidden tool classifications."
    inline: false
  - id: D274
    name: receipt-closeout-completeness-lock
    category: process-hygiene
    gate_class: invariant
    description: "Fail closeout hygiene when untracked planning receipt crumbs remain after lane closeout."
    severity: high
    ring: standard
    check_script: surfaces/verify/d274-receipt-closeout-completeness-lock.sh
    fix_hint: "Use wave.closeout.finalize to stage/commit/push expected receipts and clear untracked receipt crumbs before cleanup/delete."
    inline: false
  - id: D275
    name: single-authority-per-concern-lock
    category: ssot-hygiene
    gate_class: invariant
    description: "Enforce exactly one authoritative source per concern with explicit projection/tombstoned markers."
    severity: critical
    ring: standard
    check_script: surfaces/verify/d275-single-authority-per-concern-lock.sh
    fix_hint: "Update authority.concerns.yaml and source markers so each concern has exactly one authoritative source, explicit projection/tombstoned companions, and no unmapped authoritative surfaces."
    inline: false
  - id: D276
    name: fix-to-lock-closure-lock
    category: process-hygiene
    gate_class: invariant
    description: "Require root-cause plus regression-lock evidence for closed P0/P1 W60 findings."
    severity: critical
    ring: standard
    check_script: surfaces/verify/d276-fix-to-lock-closure-lock.sh
    fix_hint: "Populate W60 fix-to-lock mapping with root_cause, regression_lock_id, owner, expiry_check, and lock evidence for every closed P0/P1 item."
    inline: false
  - id: D277
    name: runtime-freshness-reconcile-automation-lock
    category: process-hygiene
    gate_class: freshness
    description: "Require scheduled observed-state freshness reconciliation automation (not human-only snapshot refresh)."
    severity: high
    ring: standard
    check_script: surfaces/verify/d277-runtime-freshness-reconcile-automation-lock.sh
    fix_hint: "Wire launchd/runtime scripts so freshness reconciliation runs on schedule and includes observed runtime probes."
    inline: false
  - id: D278
    name: gate-domain-profiles-high-churn-parity-lock
    category: ssot-hygiene
    gate_class: invariant
    description: "Protect high-churn gate.domain.profiles parity against unknown/duplicate gate IDs."
    severity: high
    ring: standard
    check_script: surfaces/verify/d278-gate-domain-profiles-high-churn-parity-lock.sh
    fix_hint: "Keep gate.domain.profiles gate IDs unique and aligned to gate.registry/topology."
    inline: false
  - id: D279
    name: plugins-manifest-high-churn-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: "Protect high-churn ops/plugins/MANIFEST parity across plugin paths, scripts, and capabilities."
    severity: high
    ring: standard
    check_script: surfaces/verify/d279-plugins-manifest-high-churn-parity-lock.sh
    fix_hint: "Ensure each MANIFEST plugin path/script/capability exists and remains aligned to ops/capabilities.yaml."
    inline: false
  - id: D280
    name: services-health-high-churn-parity-lock
    category: infra-hygiene
    gate_class: invariant
    description: "Protect high-churn services.health projection parity and endpoint host integrity."
    severity: high
    ring: standard
    check_script: surfaces/verify/d280-services-health-high-churn-parity-lock.sh
    fix_hint: "Keep services.health projection markers and endpoint host references aligned with SERVICE_REGISTRY/ssh.targets."
    inline: false
  - id: D281
    name: ssh-target-lifecycle-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Block decommissioned SSH target usage in active runtime reference surfaces."
    severity: high
    ring: standard
    check_script: surfaces/verify/d281-ssh-target-lifecycle-lock.sh
    fix_hint: "Remove decommissioned targets from active reference surfaces or update lifecycle contract."
    inline: false
  - id: D282
    name: verify-routing-correctness-lock
    category: process-hygiene
    gate_class: invariant
    description: "Require verify routing contract correctness and wrong-domain recommendation failure behavior."
    severity: high
    ring: standard
    check_script: surfaces/verify/d282-verify-routing-correctness-lock.sh
    fix_hint: "Align topology assignments and verify-topology recommendations with domain ownership expectations."
    inline: false
  - id: D283
    name: domain-taxonomy-bridge-parity-lock
    category: ssot-hygiene
    gate_class: freshness
    description: "Enforce agents.registry, terminal.role.contract, and docs/governance/domains taxonomy bridge parity."
    severity: high
    ring: standard
    check_script: surfaces/verify/d283-domain-taxonomy-bridge-parity-lock.sh
    fix_hint: "Keep active runtime role/agent/domain mappings in taxonomy bridge contract synchronized with registry and docs folders."
    inline: false
  - id: D284
    name: gap-reference-integrity-lock
    category: loop-gap-hygiene
    gate_class: invariant
    description: "Fail when loop-scope or W60 planning references undeclared GAP-OP IDs."
    severity: high
    ring: standard
    check_script: surfaces/verify/d284-gap-reference-integrity-lock.sh
    fix_hint: "Register missing gap IDs in operational.gaps.yaml or remove orphan references."
    inline: false
  - id: D285
    name: entry-surface-gate-metadata-no-manual-drift-lock
    category: agent-surface-hygiene
    gate_class: invariant
    description: "Require generated entry-surface gate metadata projection from gate.registry authority."
    severity: high
    ring: standard
    check_script: surfaces/verify/d285-entry-surface-gate-metadata-no-manual-drift-lock.sh
    fix_hint: "Run gen-entry-surface-gate-metadata.sh and do not hand-edit entry-surface metadata blocks."
    inline: false
  - id: D286
    name: critical-asset-utilization-freshness-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Alert on long-idle critical assets when capability exists but operational usage evidence is stale."
    severity: medium
    ring: deep
    check_script: surfaces/verify/d286-critical-asset-utilization-freshness-lock.sh
    fix_hint: "Execute critical-asset capabilities or adjust utilization contract thresholds with documented rationale."
    inline: false
  - id: D287
    name: verify-failure-snapshot-fatigue-lock
    category: process-hygiene
    gate_class: freshness
    description: "Classify deterministic vs freshness verify failures to reduce recurring snapshot-noise false negatives."
    severity: high
    ring: standard
    check_script: surfaces/verify/d287-verify-failure-snapshot-fatigue-lock.sh
    fix_hint: "Keep verify failure classification contract populated and runtime collector wired to classifier."
    inline: false
  - id: D288
    name: receipts-subtraction-automation-lock
    category: process-hygiene
    gate_class: invariant
    description: "Require automated >30-day receipts archive reconciliation with checksum parity evidence before lifecycle subtraction."
    severity: high
    ring: standard
    check_script: surfaces/verify/d288-receipts-subtraction-automation-lock.sh
    fix_hint: "Run scheduled receipts archive reconcile path with checksum parity report before rotate/delete lifecycle steps."
    inline: false
  - id: D289
    name: loop-closeout-completeness-lock
    category: loop-gap-hygiene
    gate_class: invariant
    description: "Enforce deterministic loop closeout primitive wiring, acceptance validation, and fix-to-lock guardrails."
    severity: high
    ring: standard
    check_script: surfaces/verify/d289-loop-closeout-completeness-lock.sh
    fix_hint: "Keep loop.closeout.finalize capability/contract wired and enforce acceptance-plus-fix-to-lock closeout lifecycle."
    inline: false
  - id: D290
    name: outcome-slo-presence-lock
    category: process-hygiene
    gate_class: invariant
    description: "Fail when critical-tier domains lack outcome probes in outcome.slo.contract or probe capability wiring drifts."
    severity: high
    ring: standard
    check_script: surfaces/verify/d290-outcome-slo-presence-lock.sh
    fix_hint: "Maintain communications/media/mint critical outcome probes in outcome.slo.contract with live capability wiring."
    inline: false
  - id: D291
    name: gate-budget-add-one-retire-one-lock
    category: process-hygiene
    gate_class: advisory
    description: "Report when net-new invariant gates are introduced without corresponding retirement or demotion plan coverage."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d291-gate-budget-add-one-retire-one-lock.sh
    fix_hint: "Publish W65 budget report and add retirement/demotion plan coverage for any net-new invariants."
    inline: false
    warn_only: false
  - id: D292
    name: communications-queue-pipeline-lock
    category: process-hygiene
    gate_class: invariant
    description: "Enforce communications queue pipeline capabilities/contracts and safety approval parity."
    severity: high
    ring: standard
    check_script: surfaces/verify/d292-communications-queue-pipeline-lock.sh
    fix_hint: "Restore required communications queue capabilities/contracts and canonical safety approval invariants."
    inline: false
  - id: D293
    name: ha-invariant-precondition-fail-open-lock
    category: process-hygiene
    gate_class: invariant
    description: "Fail when HA invariant gate scripts contain report-mode precondition bypasses (silent-pass risk)."
    severity: high
    ring: standard
    check_script: surfaces/verify/d293-ha-invariant-precondition-fail-open-lock.sh
    fix_hint: "Keep D113/D114/D118/D120 precondition paths fail-closed in invariant lane; use explicit report-only surfaces outside invariant verify."
    inline: false
  - id: D294
    name: proxmox-rogue-vm-detection-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Detect runtime Proxmox VM IDs not declared in vm.lifecycle authority."
    severity: high
    ring: standard
    check_script: surfaces/verify/d294-proxmox-rogue-vm-detection-lock.sh
    fix_hint: "Register active VMs in vm.lifecycle or decommission rogue runtime VMs. Report-only mode must emit explicit non-green evidence."
    inline: false
  - id: D295
    name: undeclared-docker-stack-detection-lock
    category: infra-hygiene
    gate_class: freshness
    description: "Detect runtime docker compose projects not declared in docker.compose.targets authority."
    severity: high
    ring: standard
    check_script: surfaces/verify/d295-undeclared-docker-stack-detection-lock.sh
    fix_hint: "Declare observed compose projects in docker.compose.targets or retire stale runtime stacks. Report-only mode must emit explicit non-green evidence."
    inline: false
  - id: D296
    name: runtime-job-wrapper-enforcement-lock
    category: process-hygiene
    gate_class: invariant
    description: "Enforce job-wrapper sourcing and spine_job_run usage across top-level scheduled runtime scripts."
    severity: high
    ring: standard
    check_script: surfaces/verify/d296-runtime-job-wrapper-enforcement-lock.sh
    fix_hint: "Source ops/runtime/lib/job-wrapper.sh and execute runtime jobs through spine_job_run to preserve telemetry+alert parity."
    inline: false
  - id: D297
    name: runtime-script-registry-name-parity-lock
    category: process-hygiene
    gate_class: invariant
    description: "Enforce 1:1 parity between ops/runtime script names, launchd template labels, and scheduler registry template mappings."
    severity: high
    ring: standard
    check_script: surfaces/verify/d297-runtime-script-registry-name-parity-lock.sh
    fix_hint: "Keep runtime script basename, com.ronny.* plist label, and launchd.scheduler.registry template_path aligned."
    inline: false
  - id: D298
    name: orphan-runtime-script-detection-lock
    category: process-hygiene
    gate_class: invariant
    description: "Fail when top-level ops/runtime scripts are not referenced by any launchd template."
    severity: medium
    ring: standard
    check_script: surfaces/verify/d298-orphan-runtime-script-detection-lock.sh
    fix_hint: "Delete stale runtime scripts or wire them into governed launchd templates."
    inline: false
