schema_version: '1.0'
updated: '2026-02-22'
description: Canonical gate registry for D1-D151 drift surface including D131-D149 quality gates, D150 code-root hygiene, and D151 communications boundary lock. Source of truth for gate metadata.
gate_count:
  total: 151
  active: 150
  retired: 1
categories:
  - id: path-hygiene
    description: Path and filesystem constraints
  - id: git-hygiene
    description: Git worktree, branch, and remote constraints
  - id: ssot-hygiene
    description: SSOT and binding consistency
  - id: secrets-hygiene
    description: Secrets and API constraints
  - id: doc-hygiene
    description: Documentation and indexing constraints
  - id: loop-gap-hygiene
    description: Work registration and traceability
  - id: workbench-hygiene
    description: Workbench-specific constraints
  - id: infra-hygiene
    description: Infrastructure and service binding checks
  - id: agent-surface-hygiene
    description: Agent entry and discovery surfaces
  - id: process-hygiene
    description: Operational processes and metadata
  - id: media-hygiene
    description: Media stack service and infrastructure checks
  - id: retired
    description: Retired/reserved gate slots
gates:
  - id: D1
    name: top-level-dirs
    category: path-hygiene
    description: Top-level directory policy (7 allowed dirs)
    severity: high
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Only bin/ docs/ fixtures/ mailroom/ ops/ receipts/ surfaces/ allowed at top level. Remove or move extra directories.
    inline: true
  - id: D2
    name: no-runs-trace
    category: path-hygiene
    description: No runs/ directory (traces in receipts/sessions/)
    severity: medium
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Remove runs/ directory. Execution traces belong in receipts/sessions/.
    inline: true
  - id: D3
    name: entrypoint-smoke
    category: process-hygiene
    description: bin/ops preflight must succeed (dedicated script)
    severity: critical
    check_script: surfaces/verify/d3-entrypoint-smoke.sh
    fix_hint: Ensure bin/ops is executable and preflight passes from spine root.
    inline: false
  - id: D4
    name: watcher
    category: process-hygiene
    description: LaunchAgent com.ronny.agent-inbox loaded and running
    severity: low
    check_script: surfaces/verify/drift-gate.sh
    inline: true
    warn_only: true
  - id: D5
    name: no-legacy-coupling
    category: path-hygiene
    description: No ~/agent or $HOME/agent references in runtime scripts
    severity: high
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Replace ~/agent or $HOME/agent references with mailroom/ paths. Legacy coupling is forbidden.
    inline: true
  - id: D6
    name: receipts-exist
    category: process-hygiene
    description: Latest 5 receipt dirs have receipt.md
    severity: medium
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Ensure receipt.md exists in latest receipt dirs. Capabilities auto-generate receipts.
    inline: true
  - id: D7
    name: executables-bounded
    category: path-hygiene
    description: Shell scripts only in bin/, ops/, surfaces/verify/
    severity: high
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Shell scripts only allowed in bin/, ops/, surfaces/verify/. Move or remove out-of-bounds .sh files.
    inline: true
  - id: D8
    name: no-backup-clutter
    category: path-hygiene
    description: No .bak or fix_bak files in bin/ or ops/
    severity: low
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Remove .bak and fix_bak files from bin/ and ops/. These are accidental leftovers.
    inline: true
  - id: D9
    name: receipt-stamps
    category: process-hygiene
    description: Latest receipt has required fields (Run ID, Generated, Status, Model, Inputs, Outputs)
    severity: medium
    check_script: surfaces/verify/drift-gate.sh
    inline: true
  - id: D10
    name: logs-under-mailroom
    category: path-hygiene
    description: No spurious $SPINE/logs directory (must be mailroom/logs)
    severity: medium
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: Move or remove $SPINE/logs. Logs belong under mailroom/logs/.
    inline: true
  - id: D11
    name: home-surface
    category: path-hygiene
    description: ~/agent must be symlink to agentic-spine/mailroom (if exists)
    severity: medium
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: 'If ~/agent exists it must be a symlink to agentic-spine/mailroom. Fix: ln -sf ~/code/agentic-spine/mailroom ~/agent'
    inline: true
  - id: D12
    name: core-lock-exists
    category: doc-hygiene
    description: docs/core/CORE_LOCK.md repo validity marker exists
    severity: critical
    check_script: surfaces/verify/drift-gate.sh
    fix_hint: docs/core/CORE_LOCK.md is the repo validity marker. Restore it if deleted.
    inline: true
  - id: D13
    name: api-capability-preconditions
    category: secrets-hygiene
    description: API capability secrets preconditions enforced
    severity: high
    check_script: surfaces/verify/api-preconditions.sh
    fix_hint: Run secrets.binding and secrets.auth.status before API-touching capabilities.
  - id: D14
    name: cloudflare-drift-gate
    category: infra-hygiene
    description: Cloudflare surface drift (no legacy smells)
    severity: medium
    check_script: surfaces/verify/cloudflare-drift-gate.sh
    fix_hint: Check Cloudflare SSOT docs for legacy references. Update or remove stale entries.
  - id: D15
    name: github-actions-drift-gate
    category: infra-hygiene
    description: GitHub Actions surface drift (no legacy smells, no leaked secrets)
    severity: medium
    check_script: surfaces/verify/github-actions-gate.sh
    fix_hint: Check .github/workflows/ for legacy patterns. No leaked secrets in workflow files.
  - id: D16
    name: docs-quarantine
    category: doc-hygiene
    description: No competing truth documents in docs/governance/
    severity: high
    check_script: surfaces/verify/d16-docs-quarantine.sh
    fix_hint: Remove competing truth documents. Only one canonical doc per topic in docs/governance/.
  - id: D17
    name: root-allowlist
    category: path-hygiene
    description: No agents/, _imports/, or drift magnets at repo root
    severity: high
    check_script: surfaces/verify/d17-root-allowlist.sh
    fix_hint: Remove unexpected files/dirs from repo root. Only allowlisted entries permitted.
  - id: D18
    name: docker-compose-drift
    category: infra-hygiene
    description: Docker compose references match SSOT
    severity: medium
    check_script: surfaces/verify/d18-docker-compose-drift.sh
    fix_hint: Update docker compose references to match SSOT. Remove legacy service names.
  - id: D19
    name: backup-drift
    category: infra-hygiene
    description: Backup surface inventory, no legacy smells, no secret printing
    severity: medium
    check_script: surfaces/verify/d19-backup-drift.sh
    fix_hint: Check backup SSOT for stale entries. No secret printing in backup scripts.
  - id: D20
    name: secrets-drift
    category: secrets-hygiene
    description: Secrets configuration drift (verbose subcheck)
    severity: high
    check_script: surfaces/verify/d20-secrets-drift.sh
    fix_hint: Review secrets configuration. Ensure Infisical CLI is installed and configured.
    verbose_only: true
    composite_parent: D55
  - id: D21
    name: reserved
    category: retired
    description: Retired — was agent-entry-surface-lock, merged into D56
    severity: none
    retired: true
  - id: D22
    name: nodes-drift
    category: infra-hygiene
    description: SSH node references match DEVICE_IDENTITY_SSOT
    severity: medium
    check_script: surfaces/verify/d22-nodes-drift.sh
    fix_hint: Update SSH node references to match DEVICE_IDENTITY_SSOT.yaml current IPs.
  - id: D23
    name: health-drift
    category: infra-hygiene
    description: Service health endpoints match SERVICE_REGISTRY
    severity: medium
    check_script: surfaces/verify/d23-health-drift.sh
    fix_hint: Check service health endpoints match SERVICE_REGISTRY.yaml. No auth credentials in health checks.
  - id: D24
    name: github-labels-drift
    category: infra-hygiene
    description: GitHub labels match governance
    severity: low
    check_script: surfaces/verify/d24-github-labels-drift.sh
    fix_hint: Sync GitHub labels with label governance. Run via gh CLI.
  - id: D25
    name: secrets-cli-canonical-lock
    category: secrets-hygiene
    description: Infisical CLI only, no legacy vault patterns (verbose subcheck)
    severity: high
    check_script: surfaces/verify/d25-secrets-cli-canonical-lock.sh
    fix_hint: Use infisical CLI only (no legacy vault patterns). Check capabilities.yaml for correct paths.
    verbose_only: true
    composite_parent: D55
  - id: D26
    name: agent-read-surface
    category: agent-surface-hygiene
    description: Agent read surfaces (AGENTS.md, CLAUDE.md) not stale (verbose subcheck)
    severity: medium
    check_script: surfaces/verify/d26-agent-read-surface.sh
    fix_hint: Check agent read surfaces (AGENTS.md, CLAUDE.md) for stale references.
    verbose_only: true
    composite_parent: D56
  - id: D27
    name: fact-duplication-lock
    category: doc-hygiene
    description: No raw IPs/ports in no-fact docs
    severity: high
    check_script: surfaces/verify/d27-fact-duplication-lock.sh
    fix_hint: Remove raw IPs/ports from no-fact docs. Reference SSOT docs instead of duplicating facts.
  - id: D28
    name: legacy-path-lock
    category: path-hygiene
    description: Active legacy absolute paths + extraction queue contract
    severity: medium
    check_script: surfaces/verify/d28-legacy-path-lock.sh
    fix_hint: Replace legacy absolute paths with ~/code/ relative paths. Check archive queue.
  - id: D29
    name: active-entrypoint-lock
    category: process-hygiene
    description: LaunchD/cron entries use ~/code/ paths, not legacy locations
    severity: high
    check_script: surfaces/verify/d29-active-entrypoint-lock.sh
    fix_hint: Ensure launchd/cron entries use ~/code/agentic-spine paths, not legacy locations.
  - id: D30
    name: active-config-lock
    category: path-hygiene
    description: No legacy config references or plaintext tokens in active configs
    severity: high
    check_script: surfaces/verify/d30-active-config-lock.sh
    fix_hint: Remove legacy config references and plaintext tokens from active configs.
  - id: D31
    name: home-output-sink-lock
    category: path-hygiene
    description: No log/out/err files at home root
    severity: medium
    check_script: surfaces/verify/d31-home-output-sink-lock.sh
    fix_hint: Move log/out/err files from ~/ to project paths. No home-root output sinks.
  - id: D32
    name: codex-instruction-source-lock
    category: agent-surface-hygiene
    description: AGENTS.md points to spine governance (verbose subcheck)
    severity: medium
    check_script: surfaces/verify/d32-codex-instruction-source-lock.sh
    fix_hint: Ensure AGENTS.md points to spine governance, not external sources.
    verbose_only: true
    composite_parent: D56
  - id: D33
    name: extraction-pause-lock
    category: process-hygiene
    description: Extraction must stay paused during stabilization
    severity: medium
    check_script: surfaces/verify/d33-extraction-pause-lock.sh
    fix_hint: Extraction must stay paused during stabilization. Do not resume without operator approval.
  - id: D34
    name: loop-ledger-integrity-lock
    category: loop-gap-hygiene
    description: Loop summary matches deduped counts
    severity: high
    check_script: surfaces/verify/d34-loop-ledger-integrity-lock.sh
    fix_hint: Check loop scope files match deduped counts. Run loops.reconcile if stale.
  - id: D35
    name: infra-relocation-parity-lock
    category: infra-hygiene
    description: Cross-SSOT consistency for service relocations
    severity: high
    check_script: surfaces/verify/d35-infra-relocation-parity-lock.sh
    fix_hint: 'Update all SSOTs when relocating services: DEVICE_IDENTITY, SERVICE_REGISTRY, SSH config.'
  - id: D36
    name: legacy-exception-hygiene-lock
    category: process-hygiene
    description: Stale/near-expiry legacy exceptions flagged
    severity: low
    check_script: surfaces/verify/d36-legacy-exception-hygiene-lock.sh
    fix_hint: Review stale or near-expiry legacy exceptions. Remove expired ones.
  - id: D37
    name: infra-placement-policy-lock
    category: infra-hygiene
    description: Infra placement matches governance policy (verbose subcheck)
    severity: medium
    check_script: surfaces/verify/d37-infra-placement-policy-lock.sh
    fix_hint: Check infra placement against governance policy. Verify VM/host assignments.
    verbose_only: true
    composite_parent: D57
  - id: D38
    name: extraction-hygiene-lock
    category: process-hygiene
    description: EXTRACTION_PROTOCOL.md compliance
    severity: medium
    check_script: surfaces/verify/d38-extraction-hygiene-lock.sh
    fix_hint: Check EXTRACTION_PROTOCOL.md compliance. Extraction queue must be clean.
  - id: D39
    name: infra-hypervisor-identity-lock
    category: infra-hygiene
    description: Hypervisor identity entries match live infrastructure (verbose subcheck)
    severity: medium
    check_script: surfaces/verify/d39-infra-hypervisor-identity-lock.sh
    fix_hint: Verify hypervisor identity entries match live infrastructure.
    verbose_only: true
    composite_parent: D57
  - id: D40
    name: maker-tools-drift
    category: process-hygiene
    description: Maker tools binding validity and script hygiene
    severity: low
    check_script: surfaces/verify/d40-maker-tools-drift.sh
    fix_hint: Check maker tools binding validity. Ensure scripts match inventory.
  - id: D41
    name: hidden-root-governance-lock
    category: path-hygiene
    description: Home-root hidden dir inventory + forbidden pattern enforcement
    severity: medium
    check_script: surfaces/verify/d41-hidden-root-governance-lock.sh
    fix_hint: Review ~/. entries against home-root inventory. Remove ungoverned hidden dirs.
  - id: D42
    name: code-path-case-lock
    category: path-hygiene
    description: Runtime scripts use lowercase ~/code/ (no ~/Code/)
    severity: high
    check_script: surfaces/verify/d42-code-path-case-lock.sh
    fix_hint: Use lowercase ~/code/ in all paths. Check bin/, ops/, surfaces/verify/*.sh and capabilities.yaml.
  - id: D43
    name: secrets-namespace-lock
    category: secrets-hygiene
    description: Secrets namespace policy + capability wiring
    severity: high
    check_script: surfaces/verify/d43-secrets-namespace-lock.sh
    fix_hint: Use governed namespace for secrets. Check ops/bindings/secrets.namespace.yaml.
  - id: D44
    name: cli-tools-discovery-lock
    category: process-hygiene
    description: CLI tools inventory + cross-refs + probes
    severity: low
    check_script: surfaces/verify/d44-cli-tools-discovery-lock.sh
    fix_hint: Update cli.tools.inventory.yaml to match installed tools. Run tool probes.
  - id: D45
    name: naming-consistency-lock
    category: process-hygiene
    description: Cross-file identity surface verification
    severity: medium
    check_script: surfaces/verify/d45-naming-consistency-lock.sh
    fix_hint: Fix cross-file naming inconsistencies. Check identity surfaces for drift.
  - id: D46
    name: claude-instruction-source-lock
    category: agent-surface-hygiene
    description: ~/.claude/CLAUDE.md is redirect shim only (verbose subcheck)
    severity: high
    check_script: surfaces/verify/d46-claude-instruction-source-lock.sh
    fix_hint: Ensure ~/.claude/CLAUDE.md is a redirect shim only. Governance lives in spine.
    verbose_only: true
    composite_parent: D56
  - id: D47
    name: brain-surface-path-lock
    category: path-hygiene
    description: No legacy brain surface path in runtime scripts (must be docs/brain/)
    severity: medium
    check_script: surfaces/verify/d47-brain-surface-path-lock.sh
    fix_hint: Use docs/brain/ path in runtime scripts. D47 enforces path governance.
  - id: D48
    name: codex-worktree-hygiene
    category: git-hygiene
    description: Detect stale/orphaned/detached/dirty worktrees and orphaned stashes
    severity: high
    check_script: surfaces/verify/d48-codex-worktree-hygiene.sh
    fix_hint: 'Clean up stale/orphaned worktrees. Run: ops close loop <LOOP_ID> for merged branches.'
  - id: D49
    name: agent-discovery-lock
    category: agent-surface-hygiene
    description: agents.registry.yaml + agent contracts valid
    severity: medium
    check_script: surfaces/verify/d49-agent-discovery-lock.sh
    fix_hint: Update ops/bindings/agents.registry.yaml. All domain agents must be registered.
  - id: D50
    name: gitea-ci-workflow-lock
    category: infra-hygiene
    description: CI workflow file references drift-gate.sh correctly
    severity: medium
    check_script: surfaces/verify/d50-gitea-ci-workflow-lock.sh
    fix_hint: Ensure .gitea/workflows/ CI config references drift-gate.sh correctly.
  - id: D51
    name: caddy-proto-lock
    category: infra-hygiene
    description: X-Forwarded-Proto on all Authentik upstreams in Caddy
    severity: medium
    check_script: surfaces/verify/d51-caddy-proto-lock.sh
    fix_hint: Add X-Forwarded-Proto header to all Authentik upstreams in Caddy config.
  - id: D52
    name: udr6-gateway-assertion
    category: infra-hygiene
    description: Shop SSOT docs reference correct gateway network
    severity: low
    check_script: surfaces/verify/d52-udr6-gateway-assertion.sh
    fix_hint: Ensure shop SSOT docs reference correct gateway for UDR6 network.
  - id: D53
    name: change-pack-integrity-lock
    category: process-hygiene
    description: Change pack template + sequencing + companion files
    severity: medium
    check_script: surfaces/verify/d53-change-pack-integrity-lock.sh
    fix_hint: Check change pack template, sequencing, and companion files. Fix missing items.
  - id: D54
    name: ssot-ip-parity-lock
    category: ssot-hygiene
    description: Device identity ↔ shop server ↔ bindings IP consistency
    severity: high
    check_script: surfaces/verify/d54-ssot-ip-parity-lock.sh
    fix_hint: Ensure IPs match across DEVICE_IDENTITY, shop server SSOT, and bindings.
  - id: D55
    name: secrets-runtime-readiness-lock
    category: secrets-hygiene
    description: 'Composite: secrets binding + CLI + auth readiness'
    severity: high
    check_script: surfaces/verify/d55-secrets-runtime-readiness-lock.sh
    fix_hint: Run secrets.binding then secrets.auth.status before API work.
    composite_of:
      - D20
      - D25
  - id: D56
    name: agent-entry-surface-lock
    category: agent-surface-hygiene
    description: 'Composite: agent read surface + codex/claude instruction source'
    severity: high
    check_script: surfaces/verify/d56-agent-entry-surface-lock.sh
    fix_hint: Run ops/hooks/sync-agent-surfaces.sh to sync agent entry surfaces.
    composite_of:
      - D26
      - D32
      - D46
  - id: D57
    name: infra-identity-cohesion-lock
    category: infra-hygiene
    description: 'Composite: infra placement + hypervisor identity'
    severity: medium
    check_script: surfaces/verify/d57-infra-identity-cohesion-lock.sh
    fix_hint: Ensure infra identity is consistent across all SSOTs and bindings.
    composite_of:
      - D37
      - D39
  - id: D58
    name: ssot-freshness-lock
    category: ssot-hygiene
    description: last_reviewed/last_verified dates enforced (max 21 days)
    severity: high
    check_script: surfaces/verify/d58-ssot-freshness-lock.sh
    fix_hint: Update last_reviewed/last_verified dates on stale SSOTs (max 21 days).
  - id: D59
    name: cross-registry-completeness-lock
    category: ssot-hygiene
    description: Bidirectional host coverage between registries
    severity: medium
    check_script: surfaces/verify/d59-cross-registry-completeness-lock.sh
    fix_hint: Ensure bidirectional host coverage between registries.
  - id: D60
    name: deprecation-sweeper
    category: process-hygiene
    description: Known deprecated terms in governance docs
    severity: medium
    check_script: surfaces/verify/d60-deprecation-sweeper.sh
    fix_hint: Replace deprecated terms in governance docs. Check ops/bindings/deprecated.terms.yaml.
  - id: D61
    name: session-loop-traceability-lock
    category: loop-gap-hygiene
    description: Session closeout freshness (every 48h)
    severity: medium
    check_script: surfaces/verify/d61-session-loop-traceability-lock.sh
    fix_hint: Run agent.session.closeout. Sessions require closeout every 48h.
  - id: D62
    name: git-remote-parity-lock
    category: git-hygiene
    description: origin/main == github/main
    severity: high
    check_script: surfaces/verify/d62-git-remote-parity-lock.sh
    fix_hint: 'Push to both origin (Gitea) and github: git push origin main && git push github main.'
  - id: D63
    name: capabilities-metadata-lock
    category: process-hygiene
    description: Registry integrity (API caps need touches_api + requires)
    severity: high
    check_script: surfaces/verify/d63-capabilities-metadata-lock.sh
    fix_hint: Fix capabilities.yaml metadata. API caps need touches_api + requires fields.
  - id: D64
    name: git-remote-authority-warn
    category: git-hygiene
    description: Gitea is canonical, GitHub is mirror only
    severity: low
    check_script: surfaces/verify/d64-git-remote-authority-warn.sh
    fix_hint: Gitea is canonical remote. Do not merge PRs on GitHub directly.
  - id: D65
    name: agent-briefing-sync-lock
    category: agent-surface-hygiene
    description: AGENTS.md + CLAUDE.md governance brief matches canonical source
    severity: critical
    check_script: surfaces/verify/d65-agent-briefing-sync-lock.sh
    fix_hint: Run ops/hooks/sync-agent-surfaces.sh after editing AGENT_GOVERNANCE_BRIEF.md.
  - id: D66
    name: mcp-server-parity-gate
    category: agent-surface-hygiene
    description: Local MCP agents vs MCPJungle copies in sync
    severity: medium
    check_script: surfaces/verify/d66-mcp-parity-gate.sh
    fix_hint: Sync MCP server copies between local agents and MCPJungle.
  - id: D67
    name: capability-map-lock
    category: process-hygiene
    description: capability_map.yaml covers all entries in capabilities.yaml
    severity: high
    check_script: surfaces/verify/d67-capability-map-lock.sh
    fix_hint: Update ops/bindings/capability_map.yaml to cover all entries in capabilities.yaml.
  - id: D68
    name: rag-canonical-only-gate
    category: doc-hygiene
    description: RAG manifest excludes non-canonical paths
    severity: medium
    check_script: surfaces/verify/d68-rag-canonical-only-gate.sh
    fix_hint: Remove non-canonical paths from RAG manifest. Exclude _audits/, _archived/, legacy/.
  - id: D69
    name: vm-creation-governance-lock
    category: infra-hygiene
    description: New VMs need SSH + SERVICE_REGISTRY + backup + health entries
    severity: high
    check_script: surfaces/verify/d69-vm-creation-governance-lock.sh
    fix_hint: New VMs need entries in SSH config, SERVICE_REGISTRY, backup, and health checks.
  - id: D70
    name: secrets-deprecated-alias-lock
    category: secrets-hygiene
    description: Deprecated secret project write protection
    severity: medium
    check_script: surfaces/verify/d70-secrets-deprecated-alias-lock.sh
    fix_hint: Do not write to deprecated secret projects. Use current namespace.
  - id: D71
    name: deprecated-ref-allowlist-lock
    category: process-hygiene
    description: Workbench scripts vs deprecated reference allowlist
    severity: low
    check_script: surfaces/verify/d71-deprecated-ref-allowlist-lock.sh
    fix_hint: Add legitimate legacy refs to allowlist, or replace with current names.
  - id: D72
    name: macbook-hotkey-ssot-lock
    category: workbench-hygiene
    description: Workbench launcher surfaces match spine MACBOOK_SSOT AUTO blocks
    severity: medium
    check_script: surfaces/verify/d72-macbook-hotkey-ssot-lock.sh
    fix_hint: Sync workbench launcher surfaces with spine MACBOOK_SSOT AUTO blocks.
  - id: D73
    name: opencode-governed-entry-lock
    category: workbench-hygiene
    description: OpenCode config model/provider/launcher path correct
    severity: medium
    check_script: surfaces/verify/d73-opencode-governed-entry-lock.sh
    fix_hint: Ensure opencode.json uses model openai/glm-5 and launcher path is correct.
  - id: D74
    name: billing-provider-lane-lock
    category: workbench-hygiene
    description: Background defaults + launchd template invariants
    severity: medium
    check_script: surfaces/verify/d74-billing-provider-lane-lock.sh
    fix_hint: Check ZAI_MODEL=glm-5 in launchd template and background defaults.
  - id: D75
    name: gap-registry-mutation-lock
    category: loop-gap-hygiene
    description: operational.gaps.yaml mutated only via capabilities
    severity: critical
    check_script: surfaces/verify/d75-gap-registry-mutation-lock.sh
    fix_hint: Use gaps.file/gaps.close capabilities only. No direct edits to operational.gaps.yaml.
  - id: D76
    name: home-surface-hygiene-lock
    category: workbench-hygiene
    description: Home directory drift prevention
    severity: medium
    check_script: surfaces/verify/d76-home-surface-hygiene-lock.sh
    fix_hint: Check home directory for drift. Remove ungoverned files per home-surface policy.
  - id: D77
    name: workbench-contract-lock
    category: workbench-hygiene
    description: Plist/runtime/bare-exec enforcement
    severity: medium
    check_script: surfaces/verify/d77-workbench-contract-lock.sh
    fix_hint: Fix workbench plist/runtime/bare-exec contract violations.
  - id: D78
    name: workbench-path-lock
    category: workbench-hygiene
    description: No uppercase /Code/ + no legacy repo name in workbench
    severity: high
    check_script: surfaces/verify/d78-workbench-path-lock.sh
    fix_hint: Use lowercase ~/code/ in workbench scripts. Remove legacy repo name references.
  - id: D79
    name: workbench-script-allowlist-lock
    category: workbench-hygiene
    description: Governed workbench script surface
    severity: medium
    check_script: surfaces/verify/d79-workbench-script-allowlist-lock.sh
    fix_hint: Add new workbench scripts to allowlist or remove ungoverned ones.
  - id: D80
    name: workbench-authority-trace-lock
    category: workbench-hygiene
    description: Legacy naming violations in workbench
    severity: medium
    check_script: surfaces/verify/d80-workbench-authority-trace-lock.sh
    fix_hint: Fix legacy naming violations in workbench. Use current repo/project names.
  - id: D81
    name: plugin-test-regression-lock
    category: process-hygiene
    description: New plugins must have tests or explicit exemption
    severity: medium
    check_script: surfaces/verify/d81-plugin-test-regression-lock.sh
    fix_hint: New plugins must have tests/ dir with test scripts, or an explicit exemption.
  - id: D82
    name: share-publish-governance-lock
    category: process-hygiene
    description: Share publish allowlist/denylist + capability wiring
    severity: medium
    check_script: surfaces/verify/d82-share-publish-governance-lock.sh
    fix_hint: Check share publish allowlist/denylist. Ensure capability wiring is correct.
  - id: D83
    name: proposal-queue-health-lock
    category: loop-gap-hygiene
    description: Proposal manifest + fields + SLA + parity
    severity: high
    check_script: surfaces/verify/d83-proposal-queue-health-lock.sh
    fix_hint: Fix malformed proposal manifests. Check status, required fields, SLA compliance.
  - id: D84
    name: docs-index-registration-lock
    category: doc-hygiene
    description: Every governance .md registered in _index.yaml
    severity: medium
    check_script: surfaces/verify/d84-docs-index-registration-lock.sh
    fix_hint: Register new governance .md files in docs/governance/_index.yaml.
  - id: D85
    name: gate-registry-parity-lock
    category: process-hygiene
    description: gate.registry.yaml covers every gate in drift-gate.sh, all scripts exist
    severity: high
    check_script: surfaces/verify/d85-gate-registry-parity-lock.sh
    fix_hint: Update ops/bindings/gate.registry.yaml to match gate scripts in surfaces/verify/.
  - id: D86
    name: vm-operating-profile-parity-lock
    category: infra-hygiene
    description: Every active VM in vm.lifecycle.yaml has a valid operating profile entry
    severity: medium
    check_script: surfaces/verify/d86-vm-operating-profile-parity-lock.sh
    fix_hint: Update ops/bindings/vm.operating.profile.yaml to cover all active VMs with valid enum fields.
  - id: D87
    name: rag-workspace-contract-lock
    category: infra-hygiene
    description: RAG workspace contract binding exists and is consistent with CLI defaults
    severity: medium
    check_script: surfaces/verify/d87-rag-workspace-contract-lock.sh
    fix_hint: Update ops/bindings/rag.workspace.contract.yaml to match RAG CLI defaults for slug, eligible roots, exclusions, and timeouts.
  - id: D88
    name: rag-remote-reindex-governance-lock
    category: infra-hygiene
    description: RAG remote reindex runner binding, scripts, capability wiring, and auth-token hygiene are enforced
    severity: high
    check_script: surfaces/verify/d88-rag-remote-reindex-governance-lock.sh
    fix_hint: Ensure rag.remote.runner binding exists, rag.reindex.remote.* capabilities are wired, scripts are executable, and rag CLI does not pass bearer token in process args.
  - id: D89
    name: rag-reindex-quality-contract-lock
    category: infra-hygiene
    description: RAG reindex quality contract binding exists with required thresholds and verify/probe capabilities are registered
    severity: high
    check_script: surfaces/verify/d89-rag-reindex-quality-contract-lock.sh
    fix_hint: Ensure rag.reindex.quality.yaml binding exists with completion/index_health/dependency_slos fields and rag.reindex.remote.verify + rag.remote.dependency.probe capabilities are registered.
  - id: D90
    name: rag-reindex-runtime-quality-gate
    category: infra-hygiene
    description: RAG reindex runtime quality gate enforces clean completion when session is stopped (failed uploads, checkpoint, inflation ratio)
    severity: high
    check_script: surfaces/verify/d90-rag-reindex-runtime-quality-gate.sh
    fix_hint: Run rag.reindex.remote.verify to diagnose. If session is stopped with failures, clean checkpoint and retry or investigate timeout root cause.
  - id: D91
    name: aof-product-foundation-lock
    category: process-hygiene
    description: AOF product docs, tenant bindings, policy presets, and tenant capabilities exist and are correctly wired
    severity: high
    check_script: surfaces/verify/d91-aof-product-foundation-lock.sh
    fix_hint: Create missing product docs in docs/product/, bindings in ops/bindings/, tenant capabilities in ops/plugins/tenant/. Ensure docs/README.md references product/.
  - id: D92
    name: ha-config-version-control
    category: infrastructure-parity
    description: HA config files extracted to workbench for version control and diff visibility
    severity: high
    check_script: surfaces/verify/d92-ha-config-version-control.sh
    fix_hint: Run ./bin/ops cap run ha.config.extract to pull config files from HA to workbench/infra/homeassistant/config/.
  - id: D93
    name: tenant-storage-boundary-lock
    category: process-hygiene
    description: Tenant storage contract binding exists with all boundary declarations and isolation mode
    severity: high
    check_script: surfaces/verify/d93-tenant-storage-boundary-lock.sh
    fix_hint: Create ops/bindings/tenant.storage.contract.yaml with boundaries for receipts, ledger, mailroom, loop scopes. Run tenant.storage.audit.
  - id: D94
    name: policy-runtime-enforcement-lock
    category: process-hygiene
    description: Policy runtime contract binding exists with all 11 knobs declared and enforcement wiring status
    severity: high
    check_script: surfaces/verify/d94-policy-runtime-enforcement-lock.sh
    fix_hint: Create ops/bindings/policy.runtime.contract.yaml with all policy preset knobs and enforcement_point declarations. Run policy.runtime.audit.
  - id: D95
    name: version-compat-matrix-lock
    category: process-hygiene
    description: Version compatibility matrix exists with valid source references and dependency graph
    severity: medium
    check_script: surfaces/verify/d95-version-compat-matrix-lock.sh
    fix_hint: Create ops/bindings/version.compat.matrix.yaml with component versions and dependency declarations. Run version.compat.verify.
  - id: D96
    name: evidence-retention-policy-lock
    category: process-hygiene
    description: Evidence retention policy exists with retention classes, purge rules, and export configuration
    severity: medium
    check_script: surfaces/verify/d96-evidence-retention-policy-lock.sh
    fix_hint: Create ops/bindings/evidence.retention.policy.yaml with retention classes for receipts, ledger, loops, gaps, proposals. Run evidence.export.plan.
  - id: D97
    name: surface-readonly-contract-lock
    category: process-hygiene
    description: Surface readonly contract exists with all status surfaces declared and no mutating access
    severity: medium
    check_script: surfaces/verify/d97-surface-readonly-contract-lock.sh
    fix_hint: Create ops/bindings/surface.readonly.contract.yaml with surface inventory and access declarations. Run surface.readonly.audit.
  - id: D98
    name: z2m-device-parity
    category: home-automation
    description: Z2M device registry exists, is non-empty, and fresh (<14 days)
    severity: medium
    check_script: surfaces/verify/d98-z2m-device-parity.sh
    fix_hint: Run ha.z2m.devices.snapshot to regenerate ops/bindings/z2m.devices.yaml from HA.
  - id: D99
    name: ha-token-freshness
    category: home-automation
    description: HA API token from Infisical returns HTTP 200 (not stale)
    severity: high
    check_script: surfaces/verify/d99-ha-token-freshness.sh
    fix_hint: Rotate HA_API_TOKEN in Infisical home-assistant/prod and restart dependents (Stream Deck, MCP).
  - id: D100
    name: vm-ip-parity-lock
    category: ssot-integrity
    description: vm.lifecycle.yaml LAN IPs match DEVICE_IDENTITY_SSOT.md and MINILAB_SSOT.md
    severity: high
    check_script: surfaces/verify/d100-vm-ip-parity-lock.sh
    fix_hint: Cross-reference live UniFi clients against both SSOTs. Update both files simultaneously.
  - id: D101
    name: ha-addon-inventory-parity
    category: home-automation
    description: HA add-on inventory exists, is non-empty, and fresh (<14 days)
    severity: medium
    check_script: surfaces/verify/d101-ha-addon-inventory-parity.sh
    fix_hint: Run ha.addons.snapshot to regenerate ops/bindings/ha.addons.yaml from HA Supervisor API.
  - id: D102
    name: ha-device-map-freshness
    category: home-automation
    description: HA device map exists, is non-empty, and fresh (<14 days)
    severity: medium
    check_script: surfaces/verify/d102-ha-device-map-freshness.sh
    fix_hint: Run ha.device.map.build to regenerate ops/bindings/ha.device.map.yaml from HA API.
  - id: D103
    name: streamdeck-config-lock
    category: workbench-hygiene
    description: Stream Deck HA controller config is tracked in workbench and valid JSON
    severity: low
    check_script: surfaces/verify/d103-streamdeck-config-lock.sh
    fix_hint: Run host.streamdeck.snapshot to sync runtime config to tracked location.
  - id: D104
    name: home-dhcp-audit-freshness
    category: home-automation
    description: DHCP audit summary exists, has devices checked, and is fresh (<14 days)
    severity: medium
    check_script: surfaces/verify/d104-home-dhcp-audit-freshness.sh
    fix_hint: Run network.home.dhcp.audit to regenerate ops/bindings/home.dhcp.audit.yaml.
  - id: D105
    name: ha-mcp-governance-lock
    category: home-automation
    description: HA MCP server has GOVERNED_TOOLS block, ha_call_service blocked, and policy doc present
    severity: low
    check_script: surfaces/verify/d105-ha-mcp-governance-lock.sh
    fix_hint: Run ha.mcp.status to diagnose. Check GOVERNED_TOOLS in MCP source and HASS_MCP_INTEGRATION.md.
  - id: D106
    name: media-port-collision-lock
    category: media-hygiene
    description: No duplicate ports across media VMs (download-stack, streaming-stack)
    severity: high
    check_script: surfaces/verify/d106-media-port-collision-lock.sh
    fix_hint: Review ops/bindings/media.services.yaml ports section. Ensure no duplicate ports within each VM.
  - id: D107
    name: media-nfs-mount-lock
    category: media-hygiene
    description: Both media VMs can reach pve:/media with correct mount modes (RW/RO)
    severity: high
    check_script: surfaces/verify/d107-media-nfs-mount-lock.sh
    fix_hint: Check NFS mount on VMs. download-stack needs RW, streaming-stack needs RO. Verify /etc/fstab entries.
  - id: D108
    name: media-health-endpoint-parity-lock
    category: media-hygiene
    description: Every active media service with health endpoint responds HTTP 200
    severity: medium
    check_script: surfaces/verify/d108-media-health-endpoint-parity-lock.sh
    fix_hint: Check service health endpoints. Run media.health.check for detailed diagnostics.
  - id: D109
    name: media-compose-config-match-lock
    category: media-hygiene
    description: Live containers match services declared in media.services.yaml
    severity: medium
    check_script: surfaces/verify/d109-media-compose-config-match-lock.sh
    fix_hint: Review ops/bindings/media.services.yaml status fields. Update parked/stopped services or start missing containers.
  - id: D110
    name: media-ha-duplicate-audit-lock
    category: media-hygiene
    description: HA add-ons duplicating shop services are flagged for review
    severity: low
    check_script: surfaces/verify/d110-media-ha-duplicate-audit-lock.sh
    fix_hint: Review ha_overlaps section in media.services.yaml. Decommission or justify HA add-ons duplicating shop services.
  - id: D111
    name: rag-embedding-smoke-preflight
    category: doc-hygiene
    description: Recent successful smoke test required before full RAG reindex authorization
    severity: high
    check_script: surfaces/verify/d111-rag-embedding-smoke-preflight.sh
    fix_hint: Run rag.reindex.smoke --execute to generate fresh smoke evidence. Gate validates uploaded>0, failed=0, and <24h freshness.
  - id: D112
    name: secrets-access-pattern-lock
    category: secrets-hygiene
    description: All secret access uses canonical infisical-agent.sh (no CLI pattern, no inline auth)
    severity: high
    check_script: surfaces/verify/d112-secrets-access-pattern-lock.sh
    fix_hint: Replace infisical CLI calls with infisical-agent.sh get/auth-token. Replace inline curl to universal-auth/login with infisical-agent.sh auth-token.
  - id: D113
    name: coordinator-health-probe
    category: home-automation
    description: Radio coordinator health (Z2M started, SLZB-06MU ethernet up, firmware versions logged)
    severity: medium
    check_script: surfaces/verify/d113-coordinator-health-probe.sh
    fix_hint: Check Z2M add-on is started in HA. Verify SLZB-06MU is powered and ethernet connected. Restart add-ons if needed.
  - id: D114
    name: ha-automation-stability
    category: home-automation
    description: HA automation count matches expected (27 automations)
    severity: medium
    check_script: surfaces/verify/d114-ha-automation-stability.sh
    fix_hint: Check HA automations in Settings > Automations. Update expected count in gate script if automations were intentionally added or removed.
  - id: D115
    name: ha-ssot-baseline-freshness
    category: ssot-hygiene
    description: HA SSOT baseline exists, fresh (14d), sub-bindings on disk, unexpected unavailable below threshold
    severity: medium
    check_script: surfaces/verify/d115-ha-ssot-baseline-freshness.sh
    fix_hint: Run ha.ssot.baseline.build to refresh. If sub-bindings missing, run individual snapshot capabilities first.
  - id: D116
    name: mailroom-bridge-consumers-registry-lock
    category: ssot-hygiene
    description: Bridge Cap-RPC consumer registry parity (allowlist + RBAC roles + docs + JSON contract caps)
    severity: high
    check_script: surfaces/verify/d116-mailroom-bridge-consumers-registry-lock.sh
    fix_hint: "Run: bash ops/plugins/mailroom-bridge/bin/mailroom-bridge-consumers-sync (then rerun spine.verify)."
  - id: D117
    name: iot-device-naming-parity
    category: home-automation
    description: IoT device naming convention parity across registry, HA entities, and Tuya names
    severity: medium
    check_script: surfaces/verify/d117-iot-device-naming-parity.sh
    fix_hint: Check ha_entities and tuya_name fields in home.device.registry.yaml against IoT naming convention in naming.policy.yaml.
  - id: D118
    name: z2m-device-health
    category: home-automation
    description: Z2M device battery levels above 20%, staleness within 48h, bridge connected
    severity: medium
    check_script: surfaces/verify/d118-z2m-device-health.sh
    fix_hint: "Check battery levels in HA. Replace batteries for devices below 20%. Check Z2M bridge if disconnected. Run ha.z2m.health for details."
  - id: D119
    name: z2m-naming-parity
    category: home-automation
    description: Z2M naming parity across z2m.naming.yaml, z2m.devices.yaml, and ha.device.map.yaml
    severity: medium
    check_script: surfaces/verify/d119-z2m-naming-parity.sh
    fix_hint: "Check z2m.naming.yaml canonical names match z2m.devices.yaml friendly_name. Run ha.z2m.devices.snapshot + ha.device.map.build to refresh."
  - id: D120
    name: ha-area-parity
    category: home-automation
    description: HA areas match SSOT binding ha.areas.yaml — names, icons, area count
    severity: medium
    check_script: surfaces/verify/d120-ha-area-parity.sh
    fix_hint: "Check ha.areas.yaml matches live HA areas. Run ha.areas.snapshot to refresh."
  - id: D121
    name: fabric-boundary-lock
    category: process-hygiene
    description: Lean-spine boundary lock (plane metadata + active workbench agent implementation path policy)
    severity: high
    check_script: surfaces/verify/d121-fabric-boundary-lock.sh
    fix_hint: "Update ops/bindings/fabric.boundary.contract.yaml or adjust violating capability/agent implementation paths."
  - id: D122
    name: domain-doc-route-lock
    category: doc-hygiene
    description: Domain docs routing lock (spine pointer stubs + workbench target parity via domain.docs.routes.yaml)
    severity: high
    check_script: surfaces/verify/d122-domain-doc-route-lock.sh
    fix_hint: "Update ops/bindings/domain.docs.routes.yaml and ensure each route has source stub, workbench target, and domain stub."
  - id: D123
    name: balanced-policy-safety-lock
    category: process-hygiene
    description: Balanced policy lock with multi-session proposal safety enforcement
    severity: high
    check_script: surfaces/verify/d123-strict-migration-policy-lock.sh
    fix_hint: "Set tenant policy preset to balanced and enforce proposal-only writes when multi-session is active."
  - id: D124
    name: entry-surface-parity-lock
    category: agent-surface-hygiene
    description: Startup contract block parity across AGENTS, CLAUDE, OPENCODE, and ~/.claude surfaces
    severity: high
    check_script: surfaces/verify/d124-entry-surface-parity-lock.sh
    fix_hint: "Sync SPINE_STARTUP_BLOCK sections to match ops/bindings/entry.surface.contract.yaml."
  - id: D125
    name: mcp-runtime-parity-lock
    category: workbench-hygiene
    description: MCP runtime server registration parity across Codex, Claude Desktop, and OpenCode
    severity: high
    check_script: surfaces/verify/d125-mcp-runtime-parity-lock.sh
    fix_hint: "Align runtime configs with ops/bindings/mcp.runtime.contract.yaml and rerun mcp.runtime.status."
  - id: D126
    name: workbench-implementation-path-lock
    category: workbench-hygiene
    description: Domain-external capability implementation paths resolve to canonical workbench files/dirs
    severity: high
    check_script: surfaces/verify/d126-workbench-implementation-path-lock.sh
    fix_hint: "Run ./bin/ops cap run workbench.impl.audit --list and correct implementation_repo/implementation_path drift."
  - id: D127
    name: domain-assignment-drift-lock
    category: process-hygiene
    description: 'Topology lock: all active gates must have primary_domain assignment; all domain refs defined; release sequence complete'
    severity: high
    check_script: surfaces/verify/d127-domain-assignment-drift-lock.sh
    fix_hint: Update gate.execution.topology.yaml domain_metadata/gate_assignments/release_sequence to satisfy full domain coverage.
  - id: D128
    name: gate-registration-contract-lock
    category: process-hygiene
    description: 'Gate registry/topology mutation lock: require governed capability provenance and clean contract files'
    severity: high
    check_script: surfaces/verify/d128-gate-registration-contract-lock.sh
    fix_hint: Use gate.registry.* / gate.topology.* / domain.onboard.new capabilities and include Gate-* trailers on commits touching gate contracts.
  - id: D129
    name: spine-schema-conventions-lock
    category: process-hygiene
    description: Schema conventions lock for ops/bindings normalization (disallowed aliases, status vocabulary, date format).
    severity: high
    check_script: surfaces/verify/d129-spine-schema-conventions-lock.sh
    fix_hint: Run schema.conventions.audit and normalize changed binding files to spine.schema.conventions.yaml rules.
    inline: false
  - id: D130
    name: boundary-authority-lock
    category: process-hygiene
    description: Boundary authority consistency (baseline authoritative_surfaces + README spine-ownership + mailroom contract paths).
    severity: high
    check_script: surfaces/verify/d130-boundary-authority-lock.sh
    fix_hint: Ensure README.md spine-ownership matches spine.boundary.baseline.yaml authoritative_surfaces and mailroom.runtime.contract.yaml paths are consistent.
    inline: false
  - id: D131
    name: catalog-freshness-lock
    category: process-hygiene
    description: Catalog freshness enforcement (domain last_synced within 7 days, CAPABILITIES.md present per domain).
    severity: high
    check_script: surfaces/verify/d131-catalog-freshness-lock.sh
    fix_hint: Run catalog-domain-sync to refresh last_synced dates and ensure docs/governance/domains/<domain>/CAPABILITIES.md exists.
    inline: false
  - id: D132
    name: mutation-atomicity-lock
    category: process-hygiene
    description: Mutation atomicity enforcement (all governed mutating scripts must source git-lock.sh and call acquire_git_lock).
    severity: high
    check_script: surfaces/verify/d132-mutation-atomicity-lock.sh
    fix_hint: Add `source "$ROOT/ops/lib/git-lock.sh"` and `acquire_git_lock` to mutating scripts.
    inline: false
  - id: D133
    name: output-vocabulary-lock
    category: process-hygiene
    description: Output vocabulary normalization (gate scripts must reference their gate ID in output statements for traceability).
    severity: high
    check_script: surfaces/verify/d133-output-vocabulary-lock.sh
    fix_hint: "Add gate ID (D<N>) to echo/printf output in gate scripts. Use canonical D<N> PASS/FAIL patterns."
    inline: false
  - id: D134
    name: topology-metadata-quality-lock
    category: process-hygiene
    description: Topology metadata quality (domain_metadata required fields, criticality enum, gate_assignments completeness).
    severity: high
    check_script: surfaces/verify/d134-topology-metadata-quality-lock.sh
    fix_hint: Add missing required fields (domain_id, description, criticality, capability_prefixes, path_triggers, added_date) to gate.execution.topology.yaml.
    inline: false
  - id: D135
    name: terminal-scope-lock
    category: process-hygiene
    description: Post-stabilization terminal scope lock (canonical terminal IDs + no active scope collisions in shared repos).
    severity: high
    check_script: surfaces/verify/d135-terminal-scope-lock.sh
    fix_hint: Post terminal heartbeats (`terminal.heartbeat.post`) with canonical ROLE-DOMAIN-## terminal IDs and resolve overlapping write scopes before parallel work.
    inline: false
  - id: D136
    name: lifecycle-hygiene
    category: process-hygiene
    description: Lifecycle hygiene (lifecycle.rules.yaml required fields, schema file, no orphaned gaps, aging advisory).
    severity: medium
    check_script: surfaces/verify/d136-lifecycle-hygiene.sh
    fix_hint: Run `ops cap run lifecycle.health` for details. Ensure lifecycle.rules.yaml exists with all required fields and no open gaps are linked to closed loops.
    inline: false
  - id: D137
    name: infra-capability-metadata-parity
    category: infra-hygiene
    description: Validates infra capabilities declare plane, domain, and requires metadata
    severity: medium
    check_script: surfaces/verify/d137-infra-capability-metadata-parity.sh
    fix_hint: ""
    inline: false
  - id: D138
    name: site-parity-maintenance-order
    category: infra-hygiene
    description: Validates startup.sequencing.yaml has site tags and both shop/home sites represented
    severity: medium
    check_script: surfaces/verify/d138-site-parity-maintenance-order.sh
    fix_hint: ""
    inline: false
  - id: D139
    name: nas-baseline-coverage
    category: infra-hygiene
    description: Validates NAS identity in device registry and backup coverage in backup inventory
    severity: medium
    check_script: surfaces/verify/d139-nas-baseline-coverage.sh
    fix_hint: ""
    inline: false
  - id: D140
    name: worktree-session-isolation
    category: git-hygiene
    description: Worktree session isolation enforcement (non-main branches require explicit worktree identity per contract)
    severity: high
    check_script: surfaces/verify/d140-worktree-session-isolation.sh
    fix_hint: "Create isolated worktree: ./bin/ops start loop <LOOP_ID> or set OPS_WORKTREE_ISOLATION_BYPASS=1"
    inline: false
  - id: D141
    name: alerting-rule-parity
    category: loop-gap-hygiene
    description: Every critical domain in stability.control.contract must have exactly one alerting rule entry.
    severity: medium
    check_script: surfaces/verify/d141-alerting-rule-parity.sh
    fix_hint: Add or deduplicate domain entries in ops/bindings/alerting.rules.yaml to match stability.control.contract critical_domains.
    inline: false
  - id: D142
    name: receipt-index-freshness
    category: process-hygiene
    description: Receipt intelligence index must exist, be fresh (<48h), and session receipts cannot exceed 2x retention horizon.
    severity: medium
    check_script: surfaces/verify/d142-receipt-index-freshness.sh
    fix_hint: Run receipts.index.build and archive stale sessions with receipts.rotate --execute to restore freshness/retention compliance.
    inline: false
  - id: D143
    name: session-handoff-hygiene
    category: loop-gap-hygiene
    description: Session handoff config and lifecycle hygiene (required fields present, no active handoffs older than 2x TTL).
    severity: medium
    check_script: surfaces/verify/d143-session-handoff-hygiene.sh
    fix_hint: Run session.handoff.expire to clear stale active handoffs and fix malformed handoff artifacts/config.
    inline: false
  - id: D144
    name: briefing-config-parity
    category: process-hygiene
    description: Briefing config parity (enabled section IDs must be unique and map to executable runner scripts).
    severity: medium
    check_script: surfaces/verify/d144-briefing-config-parity.sh
    fix_hint: Update ops/bindings/briefing.config.yaml runner mappings and ensure each runner script exists + executable.
    inline: false
  - id: D145
    name: aof-decomposition-vocabulary-lock
    category: process-hygiene
    description: Active loop scopes and product docs use canonical decomposition vocabulary (Step) only.
    severity: medium
    check_script: surfaces/verify/d145-aof-decomposition-vocabulary-lock.sh
    fix_hint: Replace WS/Move/Wave/Phase/P-tier labels with Step labels in active loop scopes and docs/product.
    inline: false
  - id: D146
    name: calendar-surface-matrix-lock
    category: process-hygiene
    description: Canonical calendar surface matrix lock (calendar+graph+backup+AOF control-plane contracts, artifacts, and planner surfaces).
    severity: medium
    check_script: surfaces/verify/d146-calendar-surface-lock.sh
    fix_hint: Run calendar.surface.audit and repair missing capabilities/contracts/artifacts before rerunning verify pack.
    inline: false
  - id: D147
    name: communications-canonical-routing-lock
    category: process-hygiene
    description: Enforce canonical Twilio/Resend provider usage through spine communications surface only (no direct provider calls in other active runtime/agent code paths).
    severity: high
    check_script: surfaces/verify/d147-communications-canonical-routing-lock.sh
    fix_hint: Route outbound transactional sends through communications.send.preview + communications.send.execute; remove direct provider API usage from non-communications surfaces.
    inline: false
  - id: D148
    name: mcp-agent-runtime-binding-lock
    category: workbench-hygiene
    description: Enforce canonical Claude Desktop runtime path linkage and explicit active-agent MCP runtime binding contracts.
    severity: high
    check_script: surfaces/verify/d148-mcp-agent-runtime-binding-lock.sh
    fix_hint: Normalize mcp.runtime.contract surface paths + required servers and add runtime_bindings/runtime_binding_exempt_reason in agents.registry for active MCP agents.
    inline: false
  - id: D149
    name: infra-core-service-parity-lock
    category: infra-hygiene
    description: Infra-core service parity lock across SERVICE_REGISTRY, services.health, infra.core.slo, stability.control probe wiring, and capability registration.
    severity: high
    check_script: surfaces/verify/d149-infra-core-service-parity-lock.sh
    fix_hint: Align infra-core required services (caddy/authentik/vaultwarden/infisical/cloudflared) across contracts and keep infra.core.slo.status as the canonical stability probe.
    inline: false
  - id: D150
    name: code-root-hygiene-lock
    category: path-hygiene
    description: Block loose files at ~/code/ root. Agent-generated documentation must flow through the mailroom (mailroom/outbox/reports/, mailroom/outbox/proposals/, or docs/governance/_audits/).
    severity: high
    check_script: surfaces/verify/d150-code-root-hygiene-lock.sh
    fix_hint: "Move loose files out of ~/code/. Reports → mailroom/outbox/reports/. Proposals → ./bin/ops cap run proposals.submit. Audits → docs/governance/_audits/."
    inline: false
  - id: D151
    name: communications-boundary-lock
    category: process-hygiene
    description: Communications boundary enforcement (no Outlook as automated sender, no stale domains, stack-provider mode parity)
    severity: high
    check_script: surfaces/verify/d151-communications-boundary-lock.sh
    fix_hint: "Update communications.stack.contract.yaml send_test and mailboxes off @mintprints.com. Align transactional.mode across stack and provider contracts."
    inline: false
