---
# D75 Gap Registry Mutation Policy
# Governs: ops/bindings/operational.gaps.yaml
# Gate script: surfaces/verify/d75-gap-registry-mutation-lock.sh
# Status: authoritative
# Last verified: 2026-02-13
version: 1
gate_id: D75
description: >
  Enforces capability-only mutation evidence for the gap registry.
  Direct manual edits bypass the claim + git-lock workflow.
  D75 detects uncommitted changes and commits lacking required trailers.
file: ops/bindings/operational.gaps.yaml

# Number of recent commits touching the file to inspect.
window: 50

# Commits before this SHA are exempt (pre-enforcement baseline).
# Advanced 2026-02-15: operator restructuring (re-parent GAP-OP-308,
# link parent_loop for 321-323, 324-328, HA gaps 333-342, iPhone gaps 351-353;
# bulk gap registration 346-350) â€” capability system lacks re-parent/bulk support.
# Advanced 2026-02-15: 82c8f53 rules commit swept staged gaps changes via
# multi-agent collision (not a manual edit). Advance past it.
enforcement_after_sha: "82c8f53"

# Required git trailers in commit messages that touch the registry.
required_trailers:
  - Gap-Mutation
  - Gap-Capability
  - Gap-Run-Key

# Limitation: governance evidence only, not cryptographic tamper-proofing.
# A determined actor with direct git access can forge trailers.
# D75 prevents accidental manual edits, not intentional circumvention.
strict: true
