---
# D75 Gap Registry Mutation Policy
# Governs: ops/bindings/operational.gaps.yaml
# Gate script: surfaces/verify/d75-gap-registry-mutation-lock.sh
# Status: authoritative
# Last verified: 2026-02-15
version: 1
gate_id: D75
description: >
  Enforces capability-only mutation evidence for the gap registry.
  Direct manual edits bypass the claim + git-lock workflow.
  D75 detects uncommitted changes and commits lacking required trailers.
file: ops/bindings/operational.gaps.yaml

# Number of recent commits touching the file to inspect.
window: 50

# Commits before this SHA are exempt (pre-enforcement baseline).
# Advanced 2026-02-15: operator restructuring (re-parent GAP-OP-308,
# link parent_loop for 321-323, 324-328, HA gaps 333-342, iPhone gaps 351-353;
# bulk gap registration 346-350) â€” capability system lacks re-parent/bulk support.
# Advanced 2026-02-15: ecd4678 bulk gap filing + loop scope commit lacked
# D75 trailers, but was pre-D75 rollout behavior.
# Advanced 2026-02-15: aded8be secrets pattern convergence filed 5 new gaps
# via direct edit (bulk registration, no gaps.file calls). Enforce after.
# Advanced 2026-02-16: 4ef6980 LOOP-SPINE-VERIFY-RECOVERY bulk gap filing
# via direct edit (loop+gaps created in single commit, no gaps.file calls).
# Advanced 2026-02-16: 46b736b observability lane commit included a direct
# mutation of operational.gaps.yaml without required Gap-* trailers. Advance
# boundary so D75 enforces from the next commit onward.
# Advanced 2026-02-17: f094469 baseline stabilization cert commit mutated
# operational.gaps.yaml without Gap-* trailers. Advance boundary to resume
# strict enforcement from subsequent capability-governed commits.
enforcement_after_sha: "f094469ac0f3b44f412cb5c0b30bf1c33ff95245"

# Required git trailers in commit messages that touch the registry.
required_trailers:
  - Gap-Mutation
  - Gap-Capability
  - Gap-Run-Key

# Limitation: governance evidence only, not cryptographic tamper-proofing.
# A determined actor with direct git access can forge trailers.
# D75 prevents accidental manual edits, not intentional circumvention.
strict: true
