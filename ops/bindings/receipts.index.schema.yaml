# Receipts Index Schema Contract
# Status: authoritative
# Last verified: 2026-02-18
# Scope: receipts intelligence index shape

version: "1.0"
updated_at: "2026-02-18"
owner: "@ronny"
scope: receipts-index-schema

index_contract:
  path: ops/plugins/evidence/state/receipt-index.yaml
  top_level_fields:
    - version
    - updated_at_utc
    - source_root
    - watermark
    - retention_days
    - entries

watermark:
  required_fields:
    - updated_at_utc
    - mode
  mode_values:
    - full
    - incremental

entry:
  required_fields:
    - run_id
    - capability
    - status
    - domain
    - plane
    - generated_at_utc
    - receipt_path
    - output_path
    - indexed_at_utc
  optional_fields:
    - exit_code

retention:
  source_policy: ops/bindings/evidence.retention.policy.yaml
  class: session_receipts
