# ═══════════════════════════════════════════════════════════════════════════
# CLI Tools Inventory — Cross-Domain Agent Discovery SSOT
# ═══════════════════════════════════════════════════════════════════════════
#
# Purpose: single lookup surface for agents to discover installed CLI tools.
# Agents MUST consult this file when asked to use a CLI tool.
#
# This file does NOT replace domain-specific bindings (e.g. maker.tools).
# It provides cross-domain visibility via cross-refs (source_binding field)
# and registers general-purpose tools that have no domain binding.
#
# Adding tool N+1:
#   1. If tool belongs to an existing domain binding, add it there first
#   2. Add a cross-ref entry here with source_binding pointer
#   3. If no domain binding exists, add a full entry here
#   4. Install (brew/pip/apt)
#   5. Verify: ops cap run spine.verify
#
# Status: authoritative
# Last verified: 2026-02-07
# ═══════════════════════════════════════════════════════════════════════════

version: 1
updated: "2026-02-07"

tools:
  # ─────────────────────────────────────────────────────────────────────────
  # Cross-refs from maker.tools.inventory.yaml
  # Full entries (install method, hardware flags) live in the source binding.
  # ─────────────────────────────────────────────────────────────────────────

  - id: qrencode
    category: encoding
    description: "QR code generation (PNG/SVG/terminal)"
    probe: "command -v qrencode"
    source_binding: "ops/bindings/maker.tools.inventory.yaml"
    cross_domain: true

  - id: zint
    category: encoding
    description: "50+ barcode formats (Code128, EAN, DataMatrix, QR, UPC)"
    probe: "command -v zint"
    source_binding: "ops/bindings/maker.tools.inventory.yaml"
    cross_domain: true

  - id: imagemagick
    category: imaging
    description: "Image compositing, resize, annotate, convert"
    probe: "command -v magick"
    source_binding: "ops/bindings/maker.tools.inventory.yaml"
    cross_domain: true

  - id: brother-ql
    category: printing
    description: "Brother QL thermal label printers (USB)"
    probe: "command -v brother_ql"
    source_binding: "ops/bindings/maker.tools.inventory.yaml"
    cross_domain: true
    hardware_required: true
    hardware_note: "Requires Brother QL-series printer connected via USB"

  - id: libnfc
    category: nfc
    description: "NFC tag read/write"
    probe: "command -v nfc-list"
    source_binding: "ops/bindings/maker.tools.inventory.yaml"
    cross_domain: true
    hardware_required: true
    hardware_note: "Requires ACR122U NFC reader connected via USB"

  # ─────────────────────────────────────────────────────────────────────────
  # General CLI tools (no domain-specific binding)
  # ─────────────────────────────────────────────────────────────────────────

  - id: jq
    category: data
    description: "JSON processor and query tool"
    probe: "command -v jq"
    install_method: brew
    install_command: "brew install jq"
    cross_domain: true

  - id: yq
    category: data
    description: "YAML/JSON/XML processor (Go version)"
    probe: "command -v yq"
    install_method: brew
    install_command: "brew install yq"
    cross_domain: true

  - id: ripgrep
    category: search
    description: "Fast recursive grep (rg)"
    probe: "command -v rg"
    install_method: brew
    install_command: "brew install ripgrep"
    cross_domain: true

  - id: ffmpeg
    category: media
    description: "Audio/video transcoding, streaming, conversion"
    probe: "command -v ffmpeg"
    install_method: brew
    install_command: "brew install ffmpeg"
    cross_domain: true

  - id: yt-dlp
    category: media
    description: "Video/audio downloader (YouTube, etc.)"
    probe: "command -v yt-dlp"
    install_method: brew
    install_command: "brew install yt-dlp"
    cross_domain: true

  - id: exiftool
    category: metadata
    description: "Read/write file metadata (EXIF, IPTC, XMP)"
    probe: "command -v exiftool"
    install_method: brew
    install_command: "brew install exiftool"
    cross_domain: true

  - id: tesseract
    category: ocr
    description: "OCR engine — extract text from images"
    probe: "command -v tesseract"
    install_method: brew
    install_command: "brew install tesseract"
    cross_domain: true

  - id: nmap
    category: network
    description: "Network scanner and host discovery"
    probe: "command -v nmap"
    install_method: brew
    install_command: "brew install nmap"
    cross_domain: true

  - id: rclone
    category: storage
    description: "Cloud storage sync (S3, GCS, SFTP, etc.)"
    probe: "command -v rclone"
    install_method: brew
    install_command: "brew install rclone"
    cross_domain: true

  - id: gh
    category: dev
    description: "GitHub CLI — PRs, issues, actions, API"
    probe: "command -v gh"
    install_method: brew
    install_command: "brew install gh"
    cross_domain: true

  - id: tree
    category: utility
    description: "Directory tree listing"
    probe: "command -v tree"
    install_method: brew
    install_command: "brew install tree"
    cross_domain: true

  - id: sshpass
    category: network
    description: "Non-interactive SSH password authentication (for LAN-only devices without key auth)"
    probe: "command -v sshpass"
    install_method: brew
    install_command: "brew install hudochenkov/sshpass/sshpass"
    cross_domain: true

  - id: infisical
    category: secrets
    description: "Infisical secrets management CLI (optional — infisical-agent.sh uses API directly)"
    probe: "command -v infisical"
    install_method: brew
    install_command: "brew install infisical/get-cli/infisical"
    cross_domain: true
    notes: "Optional. The spine's infisical-agent.sh works without the CLI binary via direct API calls."

  - id: opencode
    category: ai
    description: "OpenCode AI coding agent (governed GLM-5 lane)"
    probe: "command -v opencode"
    install_method: npm
    install_command: "npm install -g opencode-ai"
    cross_domain: true
    config:
      main_config: "~/.config/opencode/opencode.json"
      plugin_config: "~/.config/opencode/oh-my-opencode.json"
      commands_dir: "~/.config/opencode/commands"
      auth_store: "~/.local/share/opencode/auth.json"
      symlink_source: "~/code/workbench/dotfiles/opencode/"
    plugins:
      - name: oh-my-opencode
        install: "cd ~/.config/opencode && npm install oh-my-opencode"
      - name: "@f97/opencode-morph-fast-apply"
        install: "cd ~/.config/opencode && npm install @f97/opencode-morph-fast-apply"
      - name: opencode-wakatime
        install: "cd ~/.config/opencode && npm install opencode-wakatime"
      - name: opencode-pty
        install: "cd ~/.config/opencode && npm install opencode-pty"
    command_surface:
      - "gsd-* (Get Shit Done pack)"
      - "ralph-loop"
      - "ralphloop"
      - "ulw"
    provider: zai
    model: openai/glm-5
    notes: "Primary AI coding tool with governed plugin baseline and compatibility command shims."
