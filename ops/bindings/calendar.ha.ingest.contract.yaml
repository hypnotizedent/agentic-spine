---
status: authoritative
owner: "@ronny"
last_verified: "2026-02-24"
scope: calendar-ha-ingest-contract-v1
version: 1
updated_at: "2026-02-24"

provider_mode:
  provider: home-assistant
  ingest_mode: read-only
  writeback_enabled: false

source:
  automation_snapshot_binding: "ops/bindings/ha.automations.yaml"
  inventory_snapshot_binding: "ops/bindings/ha.inventory.snapshot.yaml"

feeds:
  automation_triggers:
    enabled: false
    calendar_id: "ha_automation_triggers"
    include_entity_id_prefixes:
      - "automation.chores_"
      - "automation.zigbee_"
      - "automation.system_"
      - "automation.mailbox_"
    include_friendly_name_patterns:
      - "Chores:"
      - "Zigbee:"
      - "System:"
      - "Mailbox:"
    include_without_last_triggered: false
    lookback_days: 14
    default_duration_minutes: 15
    max_events: 200

output:
  snapshot_path: "mailroom/outbox/calendar/ha/ha.snapshot.json"
  index_path: "mailroom/outbox/calendar/ha/ha-calendar-index.json"

merge:
  target_local_store_path: "mailroom/state/calendar-sync/writable/external"
  layer_id: "external_home_assistant"
  read_only: true
  immutable_by_source: true

freshness:
  max_snapshot_age_hours: 24
