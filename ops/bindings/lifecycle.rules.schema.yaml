# Lifecycle Rules Schema â€” Validates lifecycle.rules.yaml
#
# Referenced by: D136 (lifecycle-hygiene)

type: object
required:
  - version
  - updated
  - owner
  - rules

properties:
  version:
    type: string
  updated:
    type: string
  owner:
    type: string
  rules:
    type: object
    required:
      - gap_quick
      - aging
      - loops_auto_close
      - health
    properties:
      gap_quick:
        type: object
        required:
          - default_type
          - default_severity
          - default_discovered_by
        properties:
          default_type:
            type: string
            enum:
              - stale-ssot
              - missing-entry
              - agent-behavior
              - unclear-doc
              - duplicate-truth
              - runtime-bug
          default_severity:
            type: string
            enum: [low, medium, high, critical]
          default_discovered_by:
            type: string
      aging:
        type: object
        required:
          - thresholds
        properties:
          thresholds:
            type: object
            required:
              - warning_days
              - critical_days
            properties:
              warning_days:
                type: integer
              critical_days:
                type: integer
      loops_auto_close:
        type: object
        required:
          - enabled
          - require_all_gaps_resolved
          - skip_zero_gap_loops
        properties:
          enabled:
            type: boolean
          require_all_gaps_resolved:
            type: boolean
          skip_zero_gap_loops:
            type: boolean
      health:
        type: object
        required:
          - orphan_check
          - aging_advisory
        properties:
          orphan_check:
            type: boolean
          aging_advisory:
            type: boolean
