# Status: authoritative
# Owner: "@ronny"
# Last verified: 2026-02-15

schema_version: "1.0"
updated: "2026-02-15"

metrics:
  required_fields:
    - repo_docs
    - path_filtered
    - frontmatter_eligible
    - secrets_excluded
    - rag_eligible
    - rag_indexed
    - parity_ratio
    - inflation_ratio
    - session_state
    - phase

  definitions:
    repo_docs: "Total markdown docs under docs/, ops/, surfaces/."
    path_filtered: "Docs remaining after exclusion-prefix filtering."
    frontmatter_eligible: "Path-filtered docs with required frontmatter."
    secrets_excluded: "Frontmatter-eligible docs removed by secret denylist."
    rag_eligible: "frontmatter_eligible - secrets_excluded"
    rag_indexed: "AnythingLLM workspace document count."
    parity_ratio: "rag_indexed / rag_eligible"
    inflation_ratio: "rag_indexed / rag_eligible"
    session_state: "RUNNING or STOPPED"
    phase: "idle|queued|running|verifying|complete|failed"

threshold_sources:
  min_parity_ratio: ops/bindings/rag.reindex.quality.yaml#index_health.min_parity_ratio
  max_inflation_ratio: ops/bindings/rag.reindex.quality.yaml#index_health.max_index_inflation_ratio

output_contract:
  format: key_value_lines
  example:
    repo_docs: 230
    path_filtered: 183
    frontmatter_eligible: 114
    secrets_excluded: 13
    rag_eligible: 101
    rag_indexed: 100
    parity_ratio: 0.99
    inflation_ratio: 0.99
    session_state: STOPPED
    phase: verifying
