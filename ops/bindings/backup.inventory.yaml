# Seeded from workbench SSOT: ~/code/workbench/infra/data/backup_inventory.json
# NOTE: enabled=false by default; flip true intentionally per target.
# Classifications: critical (26h), important (48h), rebuildable (168h)
# Status: authoritative
# Last verified: 2026-03-01
version: 1
# Canonical timezone source: ops/bindings/tenant.profile.yaml (runtime.timezone)
defaults:
  timezone: "America/New_York"
  ssh_timeout_sec: 6
  stale_after_hours: 26
model:
  authority_state: authoritative
  profile_version: "systemic-v1"
  data_classes:
    small_state:
      description: "Config, lightweight databases, and critical metadata."
    large_state:
      description: "State with material size/cost where VM-level snapshots are primary."
    payload_regenerable:
      description: "Regenerable payload/cache that is excluded by default."
    tier1_critical:
      description: "Highest criticality state requiring explicit drill coverage."
  schedule_classes:
    hourly-monitor-est:
      cron: "15 * * * *"
      timezone: "America/New_York"
    daily-primary-est:
      cron: "0 2 * * *"
      timezone: "America/New_York"
    daily-config-est:
      cron: "45 3 * * *"
      timezone: "America/New_York"
    weekly-est:
      cron: "0 4 * * 0"
      timezone: "America/New_York"
    monthly-drill-est:
      cron: "0 4 1 * *"
      timezone: "America/New_York"
    quarterly-drill-est:
      cron: "0 5 1 */3 *"
      timezone: "America/New_York"
  restore_classes:
    vm-dry-run-quarterly:
      mode: dry_run
      cadence: quarterly
    app-dry-run-monthly:
      mode: dry_run
      cadence: monthly
    media-config-dry-run-monthly:
      mode: dry_run
      cadence: monthly
    tier1-small-state-dry-run-quarterly:
      mode: dry_run
      cadence: quarterly
  destination_lanes:
    pve-vzdump-primary:
      host: pve
      base_path: /tank/backups/vzdump/dump
      max_total_gb: 2500
      max_file_count: 120
    nas-offsite-vm:
      host: nas
      base_path: /volume1/backups/proxmox/vzdump
      max_total_gb: 1600
      max_file_count: 400
    nas-app-backups:
      host: nas
      base_path: /volume1/backups/apps
      max_total_gb: 800
      max_file_count: 5000
    media-config-backups:
      host_group:
        - download-stack
        - streaming-stack
      base_path: /mnt/docker/backups/media-config
      exclusion_policy:
        - /mnt/media
        - "*/cache"
      max_total_gb: 300
      max_file_count: 800
  backup_admission_states:
    - planned
    - production_ready
runtime_units:
  - unit_id: machine-pve
    kind: machine
    hostname: pve
    backup_profile: host-control-plane
    data_class: tier1_critical
    include_paths:
      - /etc/pve/jobs.cfg
      - /tank/backups/vzdump/dump
    exclude_paths: []
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-200-docker-host-primary
      - vm-202-primary
      - vm-203-primary
      - vm-204-infra-core-primary
      - vm-205-observability-primary
      - vm-206-dev-tools-primary
      - vm-207-ai-consolidation-primary
      - vm-209-download-stack-primary
      - vm-210-streaming-stack-primary
      - vm-211-finance-stack-primary
      - vm-212-mint-data-primary
      - vm-213-mint-apps-primary
      - vm-214-communications-stack-primary
    backup_admission_state: production_ready
  - unit_id: machine-proxmox-home
    kind: machine
    hostname: proxmox-home
    backup_profile: home-hypervisor
    data_class: tier1_critical
    include_paths:
      - /etc/pve/jobs.cfg
      - /mnt/pve/synology-backups/dump
    exclude_paths: []
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - home-vm-100-ha-primary
      - home-lxc-105-pihole-primary
    backup_admission_state: production_ready
  - unit_id: machine-nas
    kind: machine
    hostname: nas
    backup_profile: offsite-target
    data_class: large_state
    include_paths:
      - /volume1/backups
    exclude_paths: []
    destination_lane: nas-offsite-vm
    schedule_class: daily-primary-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - vm-offsite-critical
      - app-infisical
      - app-gitea
      - app-vaultwarden
      - app-firefly
      - app-ghostfolio
      - app-paperless-db
      - app-paperless-export
    backup_admission_state: production_ready
  - unit_id: vm-200-docker-host
    kind: vm
    hostname: docker-host
    backup_profile: vm-primary
    data_class: large_state
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-200-docker-host-primary
    backup_admission_state: production_ready
  - unit_id: vm-202-automation-stack
    kind: vm
    hostname: automation-stack
    backup_profile: vm-primary
    data_class: small_state
    include_paths:
      - vm-disk
      - /home/automation/backups/n8n-workflows
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - vm-202-primary
      - app-n8n-workflows
    backup_admission_state: production_ready
  - unit_id: vm-203-immich
    kind: vm
    hostname: immich
    backup_profile: vm-primary
    data_class: large_state
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-203-primary
    backup_admission_state: production_ready
  - unit_id: vm-204-infra-core
    kind: vm
    hostname: infra-core
    backup_profile: vm-tier1
    data_class: tier1_critical
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: tier1-small-state-dry-run-quarterly
    inventory_targets:
      - vm-204-infra-core-primary
      - app-infisical
      - app-vaultwarden
    backup_admission_state: production_ready
  - unit_id: vm-205-observability
    kind: vm
    hostname: observability
    backup_profile: vm-primary
    data_class: small_state
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-205-observability-primary
    backup_admission_state: production_ready
  - unit_id: vm-206-dev-tools
    kind: vm
    hostname: dev-tools
    backup_profile: vm-primary
    data_class: small_state
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - vm-206-dev-tools-primary
      - app-gitea
    backup_admission_state: production_ready
  - unit_id: vm-207-ai-consolidation
    kind: vm
    hostname: ai-consolidation
    backup_profile: vm-primary
    data_class: large_state
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-207-ai-consolidation-primary
    backup_admission_state: production_ready
  - unit_id: vm-209-download-stack
    kind: vm
    hostname: download-stack
    backup_profile: media-lean
    data_class: small_state
    include_paths:
      - /mnt/docker/volumes
      - /opt/appdata
    exclude_paths:
      - /mnt/media
      - /mnt/docker/volumes/*/cache
      - /mnt/docker/volumes/*/tmp
    destination_lane: media-config-backups
    schedule_class: daily-config-est
    restore_class: media-config-dry-run-monthly
    inventory_targets:
      - vm-209-download-stack-primary
      - app-media-config-download-stack
    backup_admission_state: production_ready
  - unit_id: vm-210-streaming-stack
    kind: vm
    hostname: streaming-stack
    backup_profile: media-lean
    data_class: small_state
    include_paths:
      - /mnt/docker/volumes
      - /opt/appdata
    exclude_paths:
      - /mnt/media
      - /mnt/docker/volumes/*/cache
      - /mnt/docker/volumes/*/tmp
    destination_lane: media-config-backups
    schedule_class: daily-config-est
    restore_class: media-config-dry-run-monthly
    inventory_targets:
      - vm-210-streaming-stack-primary
      - app-media-config-streaming-stack
    backup_admission_state: production_ready
  - unit_id: vm-211-finance-stack
    kind: vm
    hostname: finance-stack
    backup_profile: vm-tier1
    data_class: tier1_critical
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: tier1-small-state-dry-run-quarterly
    inventory_targets:
      - vm-211-finance-stack-primary
      - app-firefly
      - app-ghostfolio
      - app-paperless-db
      - app-paperless-export
    backup_admission_state: production_ready
  - unit_id: vm-212-mint-data
    kind: vm
    hostname: mint-data
    backup_profile: vm-tier1
    data_class: tier1_critical
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-212-mint-data-primary
    backup_admission_state: production_ready
  - unit_id: vm-213-mint-apps
    kind: vm
    hostname: mint-apps
    backup_profile: vm-primary
    data_class: small_state
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-213-mint-apps-primary
    backup_admission_state: production_ready
  - unit_id: vm-214-communications-stack
    kind: vm
    hostname: communications-stack
    backup_profile: vm-tier1
    data_class: tier1_critical
    include_paths:
      - vm-disk
      - /srv/mail-archiver/backups
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: tier1-small-state-dry-run-quarterly
    inventory_targets:
      - vm-214-communications-stack-primary
      - app-mail-archiver
    backup_admission_state: production_ready
  - unit_id: vm-100-homeassistant
    kind: vm
    hostname: homeassistant
    backup_profile: vm-tier1
    data_class: tier1_critical
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-offsite-vm
    schedule_class: daily-primary-est
    restore_class: tier1-small-state-dry-run-quarterly
    inventory_targets:
      - home-vm-100-ha-primary
    backup_admission_state: production_ready
  - unit_id: vm-105-pihole-home
    kind: vm
    hostname: pihole-home
    backup_profile: vm-rebuildable
    data_class: payload_regenerable
    include_paths:
      - vm-disk
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-offsite-vm
    schedule_class: weekly-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - home-lxc-105-pihole-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-docker-host
    kind: container-fleet
    hostname: docker-host
    backup_profile: vm-covered
    data_class: small_state
    include_paths:
      - /home/docker-host/stacks
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-200-docker-host-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-infra-core
    kind: container-fleet
    hostname: infra-core
    backup_profile: tier1-small-state
    data_class: tier1_critical
    include_paths:
      - /opt/stacks
      - /volume1/backups/apps/infisical
      - /volume1/backups/apps/vaultwarden
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-app-backups
    schedule_class: daily-primary-est
    restore_class: tier1-small-state-dry-run-quarterly
    inventory_targets:
      - app-infisical
      - app-vaultwarden
    backup_admission_state: production_ready
  - unit_id: container-fleet-download-stack
    kind: container-fleet
    hostname: download-stack
    backup_profile: media-config-lean
    data_class: small_state
    include_paths:
      - /mnt/docker/volumes
      - /opt/appdata
    exclude_paths:
      - /mnt/media
      - /mnt/docker/volumes/*/cache
      - /mnt/docker/volumes/*/tmp
    destination_lane: media-config-backups
    schedule_class: daily-config-est
    restore_class: media-config-dry-run-monthly
    inventory_targets:
      - app-media-config-download-stack
    backup_admission_state: production_ready
  - unit_id: container-fleet-streaming-stack
    kind: container-fleet
    hostname: streaming-stack
    backup_profile: media-config-lean
    data_class: small_state
    include_paths:
      - /mnt/docker/volumes
      - /opt/appdata
    exclude_paths:
      - /mnt/media
      - /mnt/docker/volumes/*/cache
      - /mnt/docker/volumes/*/tmp
    destination_lane: media-config-backups
    schedule_class: daily-config-est
    restore_class: media-config-dry-run-monthly
    inventory_targets:
      - app-media-config-streaming-stack
    backup_admission_state: production_ready
  - unit_id: container-fleet-immich
    kind: container-fleet
    hostname: immich
    backup_profile: vm-covered
    data_class: large_state
    include_paths:
      - ~/immich
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-203-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-ai-consolidation
    kind: container-fleet
    hostname: ai-consolidation
    backup_profile: vm-covered
    data_class: large_state
    include_paths:
      - /opt/stacks/ai-consolidation
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-207-ai-consolidation-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-observability
    kind: container-fleet
    hostname: observability
    backup_profile: vm-covered
    data_class: small_state
    include_paths:
      - /opt/stacks
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-205-observability-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-dev-tools
    kind: container-fleet
    hostname: dev-tools
    backup_profile: app-aware
    data_class: small_state
    include_paths:
      - /opt/stacks/gitea
      - /volume1/backups/apps/gitea
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-app-backups
    schedule_class: daily-primary-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - vm-206-dev-tools-primary
      - app-gitea
    backup_admission_state: production_ready
  - unit_id: container-fleet-automation-stack
    kind: container-fleet
    hostname: automation-stack
    backup_profile: app-aware
    data_class: small_state
    include_paths:
      - /home/automation/stacks
      - /home/automation/backups/n8n-workflows
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-app-backups
    schedule_class: daily-primary-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - vm-202-primary
      - app-n8n-workflows
    backup_admission_state: production_ready
  - unit_id: container-fleet-finance-stack
    kind: container-fleet
    hostname: finance-stack
    backup_profile: tier1-small-state
    data_class: tier1_critical
    include_paths:
      - /opt/stacks/finance
      - /volume1/backups/apps/finance
      - /volume1/backups/apps/ghostfolio
      - /volume1/backups/apps/paperless
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-app-backups
    schedule_class: daily-primary-est
    restore_class: tier1-small-state-dry-run-quarterly
    inventory_targets:
      - app-firefly
      - app-ghostfolio
      - app-paperless-db
      - app-paperless-export
    backup_admission_state: production_ready
  - unit_id: container-fleet-mint-data
    kind: container-fleet
    hostname: mint-data
    backup_profile: vm-covered
    data_class: tier1_critical
    include_paths:
      - /opt/stacks/mint-data
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-212-mint-data-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-mint-apps
    kind: container-fleet
    hostname: mint-apps
    backup_profile: vm-covered
    data_class: small_state
    include_paths:
      - /opt/stacks/mint-apps
    exclude_paths:
      - payload_regenerable
    destination_lane: pve-vzdump-primary
    schedule_class: daily-primary-est
    restore_class: vm-dry-run-quarterly
    inventory_targets:
      - vm-213-mint-apps-primary
    backup_admission_state: production_ready
  - unit_id: container-fleet-communications-stack
    kind: container-fleet
    hostname: communications-stack
    backup_profile: tier1-small-state
    data_class: tier1_critical
    include_paths:
      - /opt/stacks/communications-stack
      - /srv/mail-archiver/backups
    exclude_paths:
      - payload_regenerable
    destination_lane: nas-app-backups
    schedule_class: daily-primary-est
    restore_class: app-dry-run-monthly
    inventory_targets:
      - vm-214-communications-stack-primary
      - app-mail-archiver
    backup_admission_state: production_ready
targets:
  # =============================================================================
  # VM BACKUPS - PRIMARY (pve R730xd) - daily vzdump, 26h threshold
  # =============================================================================
  - name: vm-200-docker-host-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-200-*.vma.zst"
    stale_after_hours: 26
    classification: critical
  - name: vm-202-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-202-*.vma.zst"
    stale_after_hours: 26
    classification: critical
  - name: vm-204-infra-core-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-204-*.vma.zst"
    stale_after_hours: 26
    classification: critical
  - name: vm-205-observability-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-205-*.vma.zst"
    stale_after_hours: 26
    classification: important
  - name: vm-206-dev-tools-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-206-*.vma.zst"
    stale_after_hours: 26
    classification: important
  - name: vm-203-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-203-*.vma.zst"
    stale_after_hours: 26
    classification: important
  - name: vm-209-download-stack-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-209-*.vma.zst"
    stale_after_hours: 26
    classification: important
  - name: vm-210-streaming-stack-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-210-*.vma.zst"
    stale_after_hours: 26
    classification: important
  - name: vm-207-ai-consolidation-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-207-*.vma.zst"
    stale_after_hours: 26
    classification: critical
  - name: vm-211-finance-stack-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-211-*.vma.zst"
    stale_after_hours: 26
    classification: critical
    description: "Finance VM 211. Live — 9/9 containers (LOOP-FINANCE-VM-SEPARATION-20260211 complete)."
  - name: vm-212-mint-data-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-212-*.vma.zst"
    stale_after_hours: 26
    classification: critical
    description: "Mint data plane (fresh-slate). PostgreSQL + MinIO."
  - name: vm-213-mint-apps-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-213-*.vma.zst"
    stale_after_hours: 26
    classification: important
    description: "Mint app plane (fresh-slate). Stateless modules."
  - name: vm-214-communications-stack-primary
    enabled: true
    kind: file_glob
    host: pve
    base_path: "/tank/backups/vzdump/dump"
    glob: "vzdump-qemu-214-*.vma.zst"
    stale_after_hours: 26
    classification: important
    description: "Communications stack VM 214 (Stalwart mail + mail-archiver). Enrolled in vzdump daily job."
  - name: app-mail-archiver
    enabled: true
    kind: file_glob
    host: communications-stack
    base_path: "/srv/mail-archiver/backups"
    glob: "**/*mail-archiver*"
    stale_after_hours: 26
    classification: important
    description: "Mail-archiver app-level backups (pg_dump + uploads snapshot) on communications-stack VM 214."
  # =============================================================================
  # VM BACKUPS - OFFSITE (NAS at house, Tailscale) - daily rsync after vzdump
  # Shop upload ~10-20 Mbps — only critical small VMs synced (not VM 200 @ 186GB)
  # Sync script: /usr/local/bin/vzdump-offsite-sync.sh on pve (cron 09:00)
  # =============================================================================
  - name: vm-offsite-critical
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/proxmox/vzdump/critical"
    glob: "vzdump-qemu-*.vma.zst"
    stale_after_hours: 48
    classification: important
    description: "Covers VMs 204-210. VM 200 excluded (186GB, bandwidth prohibitive)."
  # NOTE: VM 200 offsite disabled — 186GB backup exceeds shop upload capacity (~10-20 Mbps)
  - name: vm-200-docker-host-offsite
    enabled: false
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/proxmox/vzdump"
    glob: "vzdump-qemu-200-*.vma.zst"
    stale_after_hours: 192
    classification: critical
    description: "Disabled: 186GB backup cannot fit in nightly offsite window at 10-20 Mbps."
  # =============================================================================
  # HOME VM BACKUPS - PRIMARY (proxmox-home) - vzdump to NAS NFS
  # Storage: synology-backups (NFS 10.0.0.150:/volume1/backups/proxmox_backups)
  # Retention: keep-last=3 (P0), keep-last=2 (P2)
  # Enabled: 2026-02-11 (LOOP-HOME-BACKUP-INFRASTRUCTURE-ENABLE-20260209)
  # =============================================================================
  - name: home-vm-100-ha-primary
    enabled: true
    kind: file_glob
    host: proxmox-home
    base_path: "/mnt/pve/synology-backups/dump"
    glob: "vzdump-qemu-100-*.vma.zst"
    stale_after_hours: 26
    classification: critical
    description: "P0 tier. Daily 03:00. Artifact confirmed 2026-02-12 (8GB vzdump-qemu-100-2026_02_12-03_00_01.vma.zst)."
  - name: home-lxc-105-pihole-primary
    enabled: true
    kind: file_glob
    host: proxmox-home
    base_path: "/mnt/pve/synology-backups/dump"
    glob: "vzdump-lxc-105-*.tar.zst"
    stale_after_hours: 168
    classification: rebuildable
    description: "P2 tier. Weekly Sun 04:00. LXC stopped. GAP-OP-118 FIXED — tmpdir /var/tmp in jobs.cfg. Validated 2026-02-12 (345MB artifact)."
  # =============================================================================
  # APP-LEVEL BACKUPS (NAS at house, Tailscale)
  # =============================================================================
  - name: app-infisical
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/infisical"
    glob: "*.sql.gz"
    stale_after_hours: 26
    classification: critical
    description: "pg_dump from infra-core (cron 02:50 daily), rsync to NAS."
  - name: app-mint-postgres
    enabled: false
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/mint-postgres"
    glob: "*.sql.gz"
    stale_after_hours: 26
    classification: critical
    description: "Disabled: mint-os-postgres is deprecated but still running with active dependents (files-api, quote-page). Vzdump VM-level backup (vm-200) provides coverage. App-level backup deferred until dependent migration."
  - name: app-gitea
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/gitea"
    glob: "*.sql.gz"
    stale_after_hours: 26
    classification: critical
    description: "gitea dump + pg_dump from dev-tools VM 206 (cron 02:55 daily), rsync to NAS."
  - name: app-vaultwarden
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/vaultwarden"
    glob: "*.tar.gz"
    stale_after_hours: 26
    classification: critical
  - name: app-home-assistant
    enabled: false
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/home-assistant"
    glob: "*.tar"
    stale_after_hours: 48
    classification: important
    description: "Decommissioned 2026-02-16: VM-level backup (home-vm-100-ha-primary) provides adequate coverage. App-level HA backups available via ha.backup.create capability on-demand."
  - name: app-firefly
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/finance"
    glob: "firefly-db-*.sql.gz"
    stale_after_hours: 26
    classification: critical
    description: "Finance stack VM 211 app-level backup. Daily 06:20 via /usr/local/bin/finance-stack-backup.sh; pg_dump -> NAS rsync."
  - name: app-ghostfolio
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/ghostfolio"
    glob: "ghostfolio-db-*.sql.gz"
    stale_after_hours: 26
    classification: important
    description: "Finance stack VM 211 app-level backup. Daily 06:20 via finance-stack-backup.sh; pg_dump -> NAS rsync."
  - name: app-paperless-db
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/paperless"
    glob: "paperless-db-*.sql.gz"
    stale_after_hours: 26
    classification: critical
    description: "Finance stack VM 211 app-level backup. Daily 06:20 via finance-stack-backup.sh; paperless DB dump -> NAS rsync."
  - name: app-paperless-export
    enabled: true
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/paperless"
    glob: "paperless-export-*.zip"
    stale_after_hours: 26
    classification: critical
    description: "Finance stack VM 211 app-level backup. Daily 06:20 via finance-stack-backup.sh; paperless document_exporter zip -> NAS rsync."
  - name: app-minio
    enabled: false
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/minio"
    glob: "*.tar.gz"
    stale_after_hours: 48
    classification: important
    description: "Disabled: 86k+ objects across 8 active buckets. Vzdump VM-level backup (vm-200) provides coverage. App-level mc mirror deferred — not critical path."
  - name: app-n8n-workflows
    enabled: true
    kind: file_glob
    host: automation-stack
    base_path: "/home/automation/backups/n8n-workflows"
    glob: "*/manifest.txt"
    stale_after_hours: 26
    classification: important
    description: "n8n workflow JSON snapshots. Daily 03:00 via cron, 7-day retention. LOOP-N8N-AUTOMATION-RECOVERY-HARDENING-20260212."
  - name: app-media-config-download-stack
    enabled: true
    kind: file_glob
    host: download-stack
    base_path: "/mnt/docker/backups/media-config"
    glob: "download-stack-config-*.tar.gz"
    stale_after_hours: 30
    classification: critical
    description: "Media config-state backups (download-stack). Includes /mnt/docker/volumes + /opt/appdata service metadata and excludes /mnt/media payload."
  - name: app-media-config-streaming-stack
    enabled: true
    kind: file_glob
    host: streaming-stack
    base_path: "/mnt/docker/backups/media-config"
    glob: "streaming-stack-config-*.tar.gz"
    stale_after_hours: 30
    classification: critical
    description: "Media config-state backups (streaming-stack). Includes /mnt/docker/volumes + /opt/appdata service metadata and excludes /mnt/media payload."
  - name: device-ronny-macbook
    enabled: false
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/devices/ronny-macbook"
    glob: "*"
    stale_after_hours: 26
    classification: critical
  - name: asset-dns-domain
    enabled: false
    kind: file_glob
    host: nas
    base_path: "/volume1/backups/apps/cloudflare"
    glob: "*"
    stale_after_hours: 26
    classification: critical
