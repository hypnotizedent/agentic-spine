# Share Publish Allowlist
# 
# Paths that are SAFE to publish to the GitHub share channel.
# Only paths matching these patterns will be included in publish operations.
#
# Status: authoritative
# Last verified: 2026-02-13
# Owner: @ronny

version: "1.0"
updated: "2026-02-13"

# ─────────────────────────────────────────────────────────────
# ALLOWED PATHS
# ─────────────────────────────────────────────────────────────
#
# Each entry defines a path pattern (glob or exact) and rationale.
# Publish operations will ONLY include files matching these patterns.

allowed_paths:
  # ── Documentation (Sanitized) ──
  - pattern: "docs/governance/*.md"
    rationale: "Governance documentation for patterns and policies"
    notes: "Exclude any docs with private host details"

  - pattern: "docs/core/*.md"
    rationale: "Core contracts and spine architecture docs"
    notes: "Review for any machine-specific references"

  - pattern: "docs/brain/*.md"
    rationale: "Agent context and hotkey documentation"
    notes: "Ensure no private service endpoints"

  # ── Scripts and Tooling ──
  - pattern: "bin/*"
    rationale: "Main CLI entrypoint scripts"
    notes: "Verify no embedded secrets"

  - pattern: "scripts/**/*.sh"
    rationale: "Utility scripts for operations"
    notes: "Exclude any scripts with hardcoded paths"

  # ── Configuration Templates ──
  - pattern: "templates/**/*"
    rationale: "Reusable project templates"
    notes: "Templates should be generic"

  - pattern: "ops/plugins/*/templates/**/*"
    rationale: "Plugin configuration templates"
    notes: "Review for any environment-specific values"

  # ── Capabilities Metadata ──
  - pattern: "ops/plugins/*/capability.yaml"
    rationale: "Capability definitions (non-secret)"
    notes: "These define capability contracts"

  # ── Root Files ──
  - pattern: "README.md"
    rationale: "Project README"
    notes: ""

  - pattern: "LICENSE"
    rationale: "License file"
    notes: ""

  - pattern: "CONTRIBUTING.md"
    rationale: "Contribution guidelines"
    notes: ""

# ─────────────────────────────────────────────────────────────
# PATHS REQUIRING MANUAL REVIEW
# ─────────────────────────────────────────────────────────────
#
# These paths require manual review before publishing.
# They are NOT automatically included even if they match allowed_patterns.

review_required:
  - pattern: "docs/governance/DEVICE_IDENTITY_SSOT.md"
    reason: "Contains device hostnames - review for sensitivity"

  - pattern: "docs/governance/SHOP_SERVER_SSOT.md"
    reason: "Contains shop infrastructure details - review for sensitivity"

  - pattern: "docs/governance/MINILAB_SSOT.md"
    reason: "Contains home infrastructure details - review for sensitivity"

  - pattern: "docs/governance/SERVICE_REGISTRY.yaml"
    reason: "Contains service endpoints - review for internal vs external"

  - pattern: "ops/bindings/*.yaml"
    reason: "May contain environment-specific configuration"

# ─────────────────────────────────────────────────────────────
# EXPLICITLY EXCLUDED (Never Publish)
# ─────────────────────────────────────────────────────────────

excluded:
  - pattern: "ops/bindings/secrets.*.yaml"
    reason: "Secrets-related bindings - never share"

  - pattern: "ops/bindings/ssh.targets.yaml"
    reason: "SSH target inventory - contains host details"

  - pattern: "ops/bindings/cross-repo.authority.yaml"
    reason: "Internal authority mapping"

  - pattern: "mailroom/**/*"
    reason: "Runtime state and queues"

  - pattern: "receipts/**/*"
    reason: "Session receipts - may contain sensitive context"

  - pattern: ".env*"
    reason: "Environment files - potential secrets"

  - pattern: "*.pem"
    reason: "Certificate files"

  - pattern: "*.key"
    reason: "Key files"
