#!/usr/bin/env bash
set -euo pipefail

SPINE_REPO="${SPINE_REPO:-$HOME/code/agentic-spine}"
FILTER="--open"

while [[ $# -gt 0 ]]; do
  case "$1" in
    --) shift ;;
    --open|--closed|--all) FILTER="$1"; shift ;;
    -h|--help)
      cat <<'EOF'
Usage:
  loops-list [--open|--closed|--all]

Wrapper for `ops loops list` to expose loop names in capability form.
Default: --open
EOF
      exit 0
      ;;
    *) echo "Unknown arg: $1" >&2; exit 2 ;;
  esac
done

exec "$SPINE_REPO/ops/commands/loops.sh" list "$FILTER"
