#!/usr/bin/env bash
set -euo pipefail
# ha.lock.control â€” Lock or unlock a Home Assistant lock entity (manual approval required)
SPINE_ROOT="${SPINE_ROOT:-$HOME/code/agentic-spine}"

SERVICE="${1:?service required (lock or unlock)}"
ENTITY="${2:?entity_id required}"

if [[ "$SERVICE" != "lock" && "$SERVICE" != "unlock" ]]; then
  echo "ha.lock.control: service must be 'lock' or 'unlock', got: $SERVICE"
  exit 1
fi

exec "$SPINE_ROOT/ops/plugins/ha/bin/ha-service-call" --domain lock --service "$SERVICE" --entity "$ENTITY"
